/*! For license information please see main.6adc91de.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),C(o,t,i,"",function(e){return e})):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var u=0;u<e.length;u++){var c=s+I(a=e[u],u);l+=C(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=C(a=a.value,t,i,c=s+I(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,O(S);else{var t=r(c);null!==t&&D(x,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(T),T=-1),p=!0;var s=f;try{for(b(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(u)&&i(u),b(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,_=null,T=-1,N=5,I=-1;function C(){return!(t.unstable_now()-I<N)}function A(){if(null!==_){var e=t.unstable_now();I=e;var n=!0;try{n=_(!0,e)}finally{n?E():(k=!1,_=null)}}else k=!1}if("function"===typeof w)E=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,E=function(){P.postMessage(null)}}else E=function(){v(A,0)};function O(e){_=e,k||(k=!0,E())}function D(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(y(T),T=-1):g=!0,D(x,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,O(S))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case _:return"Profiler";case k:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Ll){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,ke=null;function _e(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function Te(e){Ee?ke?ke.push(e):ke=[e]:Ee=e}function Ne(){if(Ee){var e=Ee,t=ke;if(ke=Ee=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ie(e,t){return e(t)}function Ce(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==Ee||null!==ke)&&(Ce(),Ne())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Oe=!1}function je(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,o,a,l){Le=!1,Me=null,je.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,Et,kt,_t,Tt=!1,Nt=[],It=null,Ct=null,At=null,Rt=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void _t(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Tt=!1,null!==It&&Ut(It)&&(It=null),null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Ft),Pt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Nt.length){zt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Ct&&zt(Ct,e),null!==At&&zt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var $t=b.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=wt,s=$t.transition;$t.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,$t.transition=s}}function Kt(e,t,n,r){var i=wt,s=$t.transition;$t.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,$t.transition=s}}function Wt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Gt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&xt(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=yi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),dn=M({},un,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),vn=sn(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(M({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function _n(){return kn}var Tn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(Tn),In=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),An=sn(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),On=[9,13,27,32],Dn=c&&"CompositionEvent"in window,jn=null;c&&"documentMode"in document&&(jn=document.documentMode);var Ln=c&&"TextEvent"in window&&!jn,Mn=c&&(!Dn||jn&&8<jn&&11>=jn),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Gn(e){Ur(e,0)}function Qn(e){if(W(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Wn)){var t=[];Hn(t,Wn,e,xe(e)),Re(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Wn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},kr={};function _r(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Er[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=_r("animationend"),Nr=_r("animationiteration"),Ir=_r("animationstart"),Cr=_r("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Nr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Cr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var c=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,u),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re(function(){var r=s,i=xe(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Tr:case Nr:case Ir:l=vn;break;case Cr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&c.push(Hr(p,m,f)))),d)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,yi(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Wr(c),h=Wr(h)}c=null}else c=null;null!==l&&Gr(o,a,l,c,!1),null!==u&&null!==d&&Gr(o,d,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(qn(a))if(Yn)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(v=Kr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Pe(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var Si=[],Ei=-1;function ki(e){return{current:e}}function _i(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function Ti(e,t){Ei++,Si[Ei]=e.current,e.current=t}var Ni={},Ii=ki(Ni),Ci=ki(!1),Ai=Ni;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){_i(Ci),_i(Ii)}function Di(e,t,n){if(Ii.current!==Ni)throw Error(s(168));Ti(Ii,t),Ti(Ci,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Ai=Ii.current,Ti(Ii,e),Ti(Ci,Ci.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=ji(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,_i(Ci),_i(Ii),Ti(Ii,e)):_i(Ci),Ti(Ci,n)}var Ui=null,Fi=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var $i=[],qi=0,Hi=null,Ki=0,Wi=[],Gi=0,Qi=null,Ji=1,Yi="";function Xi(e,t){$i[qi++]=Ki,$i[qi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Wi[Gi++]=Ji,Wi[Gi++]=Yi,Wi[Gi++]=Qi,Qi=e;var r=Ji;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Yi=s+e}else Ji=1<<s|n<<i|r,Yi=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=$i[--qi],$i[qi]=null,Ki=$i[--qi],$i[qi]=null;for(;e===Qi;)Qi=Wi[--Gi],Wi[Gi]=null,Yi=Wi[--Gi],Wi[Gi]=null,Ji=Wi[--Gi],Wi[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Ji,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=ju(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=ju(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case S:return(t=Fu(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Lu(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===a.length)return n(i,d),is&&Xi(i,m),u;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===c?u=d:c.sibling=d,c=d);return is&&Xi(i,m),u}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(i,e)}),is&&Xi(i,m),u}function g(i,a,l,u){var c=j(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var d=c=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,u);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===d?c=w:d.sibling=w,d=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,u))&&(a=o(y,a,g),null===d?c=y:d.sibling=y,d=y);return is&&Xi(i,g),c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),is&&Xi(i,g),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===E){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===P&&ys(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=gs(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===E?((s=Lu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=ju(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fu(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(j(o))return g(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),xs=ws(!1),Ss=ki(null),Es=null,ks=null,_s=null;function Ts(){_s=ks=Es=null}function Ns(e){var t=Ss.current;_i(Ss),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t){Es=e,_s=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Es)throw Error(s(308));ks=e,Es.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Rs=null;function Ps(e){null===Rs?Rs=[e]:Rs.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var js=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;js=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,c=u=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:js=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=d}}function $s(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Hs=ki(qs),Ks=ki(qs),Ws=ki(qs);function Gs(e){if(e===qs)throw Error(s(174));return e}function Qs(e,t){switch(Ti(Ws,t),Ti(Ks,e),Ti(Hs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Hs),Ti(Hs,t)}function Js(){_i(Hs),_i(Ks),_i(Ws)}function Ys(e){Gs(Ws.current);var t=Gs(Hs.current),n=le(t,e.type);t!==n&&(Ti(Ks,e),Ti(Hs,n))}function Xs(e){Ks.current===e&&(_i(Hs),_i(Ks))}var Zs=ki(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,uo=!1,co=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),co){o=0;do{if(co=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(co)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,uo=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var d=c.lane;if((so&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,a=r):u=u.next=h,oo.lanes|=d,Ml|=d}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function ko(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Lo(No.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ro(9,To.bind(null,n,r,i,t),void 0,null),null===Cl)throw Error(s(349));0!==(30&so)||_o(n,t,i)}return i}function _o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&Co(e)}function No(e,t,n){return n(function(){Io(t)&&Co(e)})}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Co(e){var t=Ds(e,1);null!==t&&ru(t,e,1,-1)}function Ao(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return wo().memoizedState}function Oo(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ro(t,n,s,r))}oo.flags|=e,i.memoizedState=Ro(1|t,n,s,r)}function jo(e,t){return Oo(8390656,8,e,t)}function Lo(e,t){return Do(2048,8,e,t)}function Mo(e,t){return Do(4,2,e,t)}function Uo(e,t){return Do(4,4,e,t)}function Fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Fo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ho(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Ko(){return wo().memoizedState}function Wo(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Jo(t,n);else if(null!==(n=Os(e,t,n,r))){ru(n,e,r,tu()),Yo(n,t,r)}}function Go(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Jo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ps(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Os(e,t,i,r))&&(ru(n,e,r,i=tu()),Yo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){co=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xo={readContext:As,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:As,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ao,useDebugValue:zo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=Ho.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Cl)throw Error(s(349));0!==(30&so)||_o(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,jo(No.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Cl.identifierPrefix;if(is){var n=Yi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:As,useCallback:Bo,useContext:As,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:Uo,useMemo:$o,useReducer:xo,useRef:Po,useState:function(){return xo(bo)},useDebugValue:zo,useDeferredValue:function(e){return qo(wo(),ao.memoizedState,e)},useTransition:function(){return[xo(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:As,useCallback:Bo,useContext:As,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:Uo,useMemo:$o,useReducer:So,useRef:Po,useState:function(){return So(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:qo(t,ao.memoizedState,e)},useTransition:function(){return[So(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(ru(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(ru(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fs(e,i,r))&&(ru(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ni,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Pi(t)?Ai:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ni),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Pi(t)?Ai:Ii.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),da(0,t)},n}function pa(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?xs(t,null,n,r):bs(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var s=t.ref;return Cs(t,i),r=go(e,t,n,r,s,i),n=vo(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ou(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ju(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return qa(e,t,i)}return t.flags|=1,(e=Du(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qa(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ta(e,t,n,r,i)}function ka(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Ol,Pl),Pl|=r;return ba(e,t,i,n),t.child}function _a(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Pi(n)?Ai:Ii.current;return s=Ri(t,s),Cs(t,i),n=go(e,t,n,r,s,i),r=vo(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function Na(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(Cs(t,i),null===t.stateNode)$a(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=As(u):u=Ri(t,u=Pi(n)?Ai:Ii.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&aa(t,o,r,u),js=!1;var h=t.memoizedState;o.state=h,Bs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ci.current||js?("function"===typeof c&&(ra(t,n,c,r),l=t.memoizedState),(a=js||sa(t,n,a,r,h,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ms(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:na(t.type,a),o.props=u,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Ri(t,l=Pi(n)?Ai:Ii.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,o,r,l),js=!1,h=t.memoizedState,o.state=h,Bs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ci.current||js?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(u=js||sa(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,s,i)}function Ia(e,t,n,r,i,s){_a(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),qa(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ca(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Qs(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Ra,Pa,Oa,Da,ja={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(Zs,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mu(l,i,0,null),e=Lu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=ja,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,r=ca(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mu({mode:"visible",children:r.children},i,0,null),(o=Lu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=ja,o);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fa(e,t,a,r=ca(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Cl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),ru(r,e,i,-1))}return gu(),Fa(e,t,a,r=ca(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Gi++]=Ji,Wi[Gi++]=Yi,Wi[Gi++]=Qi,Ji=e.id,Yi=e.overflow,Qi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Du(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Du(r,a):(a=Lu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=ja,i}return e=(a=e.child).sibling,i=Du(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Ka(t),null;case 3:return r=t.stateNode,Js(),_i(Ci),_i(Ii),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(au(ss),ss=null))),Pa(e,t),Ka(t),null;case 5:Xs(t);var i=Gs(Ws.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Gs(Hs.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Fr(jr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":J(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Fr(jr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":J(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Fr("scroll",e):null!=c&&w(e,o,c,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Ws.current),Gs(Hs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ka(t),null;case 13:if(_i(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(au(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):gu())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Js(),Pa(e,t),null===e&&Br(t.stateNode.containerInfo),Ka(t),null;case 10:return Ns(t.type._context),Ka(t),null;case 19:if(_i(Zs),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>$l&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ka(t),null}else 2*Ye()-o.renderingStartTime>$l&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=Zs.current,Ti(Zs,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ga(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),_i(Ci),_i(Ii),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(_i(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(Zs),null;case 4:return Js(),null;case 10:return Ns(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(Hs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ja=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_u(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_u(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||Za(n,t);case 6:var r=cl,i=dl;cl=null,hl(e,t,n),dl=i,null!==(cl=r)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=dl,cl=n.stateNode.containerInfo,dl=!0,hl(e,t,n),cl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ja&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_u(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,hl(e,t,n),Ja=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach(function(t){var r=Cu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(s(160));fl(o,a,i),cl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){_u(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){_u(e,e.return,g)}try{nl(5,e,e.return)}catch(g){_u(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){_u(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),we(l,a);var c=we(l,o);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):w(i,d,h,c)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){_u(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){_u(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){_u(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Ye())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(c=Ja)||d,ml(t,e),Ja=c):ml(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){_u(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Xa=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(g){_u(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){_u(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){_u(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xa=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Qa;var u=Ja;if(Qa=o,(Ja=l)&&!u)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Xa=l):Sl(i);for(;null!==s;)Xa=s,wl(s,t,n),s=s.sibling;Xa=i,Qa=a,Ja=u}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):bl(e)}}function bl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&$s(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$s(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&il(t)}catch(f){_u(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function xl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Sl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_u(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_u(t,i,l)}}var s=t.return;try{il(t)}catch(l){_u(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){_u(t,o,l)}}}catch(l){_u(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var El,kl=Math.ceil,_l=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Nl=b.ReactCurrentBatchConfig,Il=0,Cl=null,Al=null,Rl=0,Pl=0,Ol=ki(0),Dl=0,jl=null,Ml=0,Ul=0,Fl=0,Vl=null,zl=null,Bl=0,$l=1/0,ql=null,Hl=!1,Kl=null,Wl=null,Gl=!1,Ql=null,Jl=0,Yl=0,Xl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Il)?Ye():-1!==Zl?Zl:Zl=Ye()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===eu&&(eu=mt()),eu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ru(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Il)&&e===Cl||(e===Cl&&(0===(2&Il)&&(Ul|=n),4===Dl&&lu(e,Rl)),iu(e,r),1===n&&0===Il&&0===(1&t.mode)&&($l=Ye()+500,Fi&&Bi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Cl?Rl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fi=!0,zi(e)}(uu.bind(null,e)):zi(uu.bind(null,e)),oi(function(){0===(6&Il)&&Bi()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Au(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Zl=-1,eu=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=ht(e,e===Cl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Il;Il|=2;var o=mu();for(Cl===e&&Rl===t||(ql=null,$l=Ye()+500,fu(e,t));;)try{wu();break}catch(l){pu(e,l)}Ts(),_l.current=o,Il=i,null!==Al?t=0:(Cl=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=jl,fu(e,0),lu(e,r),iu(e,Ye()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=jl,fu(e,0),lu(e,r),iu(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Su(e,zl,ql);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Su.bind(null,e,zl,ql),t);break}Su(e,zl,ql);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(Su.bind(null,e,zl,ql),r);break}Su(e,zl,ql);break;default:throw Error(s(329))}}}return iu(e,Ye()),e.callbackNode===n?su.bind(null,e):null}function ou(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=zl,zl=n,null!==t&&au(t)),e}function au(e){null===zl?zl=e:zl.push.apply(zl,e)}function lu(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Il))throw Error(s(327));Eu();var t=ht(e,0);if(0===(1&t))return iu(e,Ye()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=jl,fu(e,0),lu(e,t),iu(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Su(e,zl,ql),iu(e,Ye()),null}function cu(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&($l=Ye()+500,Fi&&Bi())}}function du(e){null!==Ql&&0===Ql.tag&&0===(6&Il)&&Eu();var t=Il;Il|=1;var n=Nl.transition,r=wt;try{if(Nl.transition=null,wt=1,e)return e()}finally{wt=r,Nl.transition=n,0===(6&(Il=t))&&Bi()}}function hu(){Pl=Ol.current,_i(Ol)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Js(),_i(Ci),_i(Ii),no();break;case 5:Xs(r);break;case 4:Js();break;case 13:case 19:_i(Zs);break;case 10:Ns(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Cl=e,Al=e=Du(e.current,null),Rl=Pl=t,Dl=0,jl=null,Fl=Ul=Ml=0,zl=Vl=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Rs=null}return e}function pu(e,t){for(;;){var n=Al;try{if(Ts(),ro.current=Xo,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(so=0,lo=ao=oo=null,co=!1,ho=0,Tl.current=null,null===n||null===n.return){Dl=1,jl=t,Al=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ma(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ma(o,c,t),gu();break e}u=Error(s(426))}else if(is&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),ps(ua(u,l));break e}}o=u=ua(u,l),4!==Dl&&(Dl=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,u,t));break e;case 1:l=u;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wl||!Wl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mu(){var e=_l.current;return _l.current=Xo,null===e?Xo:e}function gu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Cl||0===(268435455&Ml)&&0===(268435455&Ul)||lu(Cl,Rl)}function vu(e,t){var n=Il;Il|=2;var r=mu();for(Cl===e&&Rl===t||(ql=null,fu(e,t));;)try{yu();break}catch(i){pu(e,i)}if(Ts(),Il=n,_l.current=r,null!==Al)throw Error(s(261));return Cl=null,Rl=0,Dl}function yu(){for(;null!==Al;)bu(Al)}function wu(){for(;null!==Al&&!Qe();)bu(Al)}function bu(e){var t=El(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?xu(e):Al=t,Tl.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Pl)))return void(Al=n)}else{if(null!==(n=Ga(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Dl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Dl&&(Dl=5)}function Su(e,t,n){var r=wt,i=Nl.transition;try{Nl.transition=null,wt=1,function(e,t,n,r){do{Eu()}while(null!==Ql);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Cl&&(Al=Cl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Au(tt,function(){return Eu(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Nl.transition,Nl.transition=null;var a=wt;wt=1;var l=Il;Il|=4,Tl.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(u=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++d===r&&(u=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(x){_u(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),Il=l,wt=a,Nl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Jl=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&Jl)&&0!==e.tag&&Eu(),o=e.pendingLanes,0!==(1&o)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,Bi()}(e,t,n,r)}finally{Nl.transition=i,wt=r}return null}function Eu(){if(null!==Ql){var e=bt(Jl),t=Nl.transition,n=wt;try{if(Nl.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Jl=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Xa=c;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var f=(d=Xa).sibling,p=d.return;if(sl(d),d===c){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Xa=y;break e}Xa=o.return}}var w=e.current;for(Xa=w;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=w;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){_u(l,l.return,S)}if(l===a){Xa=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xa=x;break e}Xa=l.return}}if(Il=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,Nl.transition=t}}return!1}function ku(e,t,n){e=Fs(e,t=fa(0,t=ua(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),iu(e,t))}function _u(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Fs(t,e=pa(t,e=ua(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),iu(t,e));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Ye()-Bl?fu(e,0):Fl|=n),iu(e,t)}function Nu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ds(e,t))&&(vt(e,t,n),iu(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nu(e,n)}function Cu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Nu(e,n)}function Au(e,t){return We(e,t)}function Ru(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Ru(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ju(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ou(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Lu(n.children,i,o,t);case k:a=8,i|=8;break;case _:return(e=Pu(12,n,t,2|i)).elementType=_,e.lanes=o,e;case C:return(e=Pu(13,n,t,i)).elementType=C,e.lanes=o,e;case A:return(e=Pu(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Mu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case N:a=9;break e;case I:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Mu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,s,o,a,l){return e=new Vu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Bu(e){if(!e)return Ni;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return ji(e,n,t)}return t}function $u(e,t,n,r,i,s,o,a,l){return(e=zu(n,r,!0,e,0,s,0,a,l)).context=Bu(null),n=e.current,(s=Us(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Fs(n,s,i),e.current.lanes=i,vt(e,i,r),iu(e,r),e}function qu(e,t,n,r){var i=t.current,s=tu(),o=nu(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fs(i,t,o))&&(ru(e,i,o,s),Vs(e,i,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Ca(t),fs();break;case 5:Ys(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(Ti(Zs,1&Zs.current),null!==(e=qa(e,t,n))?e.sibling:null);Ti(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return qa(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$a(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);Cs(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ia(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($a(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Na(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ca(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ms(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qa(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),_a(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Ma(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(Ss,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ci.current){t=qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Us(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Cs(t,n),r=r(i=As(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Sa(e,t,r,i=na(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),$a(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Cs(t,n),oa(t,r,i),la(t,r,i,n),Ia(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return ka(e,t,n)}throw Error(s(156,t.tag))};var Gu="function"===typeof reportError?reportError:function(e){console.error(e)};function Qu(e){this._internalRoot=e}function Ju(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hu(o);a.call(e)}}qu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hu(o);s.call(e)}}var o=$u(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),du(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hu(l);a.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),du(function(){qu(t,l,n,r)}),l}(n,t,e,i,r);return Hu(o)}Ju.prototype.render=Qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qu(e,t,null,null)},Ju.prototype.unmount=Qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du(function(){qu(null,e,null,null)}),t[pi]=null}},Ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),iu(t,Ye()),0===(6&Il)&&($l=Ye()+500,Bi()))}break;case 13:du(function(){var t=Ds(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}}),Wu(e,1)}},St=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)ru(t,e,134217728,tu());Wu(e,134217728)}},Et=function(e){if(13===e.tag){var t=nu(e),n=Ds(e,t);if(null!==n)ru(n,e,t,tu());Wu(e,t)}},kt=function(){return wt},_t=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));W(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cu,Ce=du;var tc={usingClientEntryPoint:!1,Events:[wi,bi,xi,Te,Ne,cu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yu(e))throw Error(s(299));var n=!1,r="",i=Gu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=$u(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ju(t)},t.render=function(e,t,n){if(!Xu(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(s(40));return!!e._reactRootContainer&&(du(function(){ec(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>Vt,hasStandardBrowserEnv:()=>Bt,hasStandardBrowserWebWorkerEnv:()=>$t,navigator:()=>zt,origin:()=>qt});var i,s=n(43),o=n.t(s,2),a=n(391),l=n(950),u=n.t(l,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const d="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=i.Pop,u=null,f=v();function v(){return(a.state||{idx:null}).idx}function y(){l=i.Pop;let e=v(),t=null==e?null:e-f;f=e,u&&u({action:l,location:b.location,delta:t})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,a.replaceState(c({},a.state,{idx:f}),""));let b={get action(){return l},get location(){return e(s,a)},listen(e){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(d,y),u=e,()=>{s.removeEventListener(d,y),u=null}},createHref:e=>t(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=i.Push;let r=m(b.location,e,t);n&&n(r,e),f=v()+1;let c=p(r,f),d=b.createHref(r);try{a.pushState(c,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(d)}o&&u&&u({action:l,location:b.location,delta:1})},replace:function(e,t){l=i.Replace;let r=m(b.location,e,t);n&&n(r,e),f=v();let s=p(r,f),c=b.createHref(r);a.replaceState(s,"",c),o&&u&&u({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,r){let i=j(("string"===typeof t?v(t):t).pathname||"/",n);if(null==i)return null;let s=S(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=D(i);o=P(s[a],e,r)}return o}function S(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(h(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=V([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),S(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:R(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of E(e.path))i(e,t,r);else i(e,t)}),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=E(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const k=/^:[\w-]+$/,_=3,T=2,N=1,I=10,C=-2,A=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(A)&&(r+=C),t&&(r+=T),n.filter(e=>!A(e)).reduce((e,t)=>e+(k.test(t)?_:""===t?N:I),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),d=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:V([s,c.pathname]),pathnameBase:z(V([s,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(s=V([s,c.pathnameBase]))}return o}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e,t){let n=M(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=v(e):(i=c({},e),h(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?v(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(r),hash:$(i)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}const V=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],K=(new Set(H),["get",...H]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const G=s.createContext(null);const Q=s.createContext(null);const J=s.createContext(null);const Y=s.createContext(null);const X=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=s.createContext(null);function ee(){return null!=s.useContext(Y)}function te(){return ee()||h(!1),s.useContext(Y).location}function ne(e){s.useContext(J).static||s.useLayoutEffect(e)}function re(){let{isDataRoute:e}=s.useContext(X);return e?function(){let{router:e}=fe(de.UseNavigateStable),t=me(he.UseNavigateStable),n=s.useRef(!1);return ne(()=>{n.current=!0}),s.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))},[e,t])}():function(){ee()||h(!1);let e=s.useContext(G),{basename:t,future:n,navigator:r}=s.useContext(J),{matches:i}=s.useContext(X),{pathname:o}=te(),a=JSON.stringify(U(i,n.v7_relativeSplatPath)),l=s.useRef(!1);return ne(()=>{l.current=!0}),s.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=F(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:V([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,a,o,e])}()}function ie(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(J),{matches:i}=s.useContext(X),{pathname:o}=te(),a=JSON.stringify(U(i,r.v7_relativeSplatPath));return s.useMemo(()=>F(e,JSON.parse(a),o,"path"===n),[e,a,o,n])}function se(e,t,n,r){ee()||h(!1);let{navigator:o}=s.useContext(J),{matches:a}=s.useContext(X),l=a[a.length-1],u=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=te();if(t){var p;let e="string"===typeof t?v(t):t;"/"===c||(null==(p=e.pathname)?void 0:p.startsWith(c))||h(!1),d=e}else d=f;let m=d.pathname||"/",g=m;if("/"!==c){let e=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:g});let w=ce(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:V([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:V([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,r);return t&&w?s.createElement(Y.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:i.Pop}},w):w}function oe(){let e=function(){var e;let t=s.useContext(Z),n=pe(he.UseRouteError),r=me(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const ae=s.createElement(oe,null);class le extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(X.Provider,{value:this.props.routeContext},s.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ue(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(G);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(X.Provider,{value:t},r)}function ce(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||h(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<a.length;s++){let e=a[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=s),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight((e,r,i)=>{let o,d=!1,h=null,f=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ae,u&&(c<0&&0===i?(p="route-fallback",!1||ge[p]||(ge[p]=!0),d=!0,f=null):c===i&&(d=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=o?h:d?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ue,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function fe(e){let t=s.useContext(G);return t||h(!1),t}function pe(e){let t=s.useContext(Q);return t||h(!1),t}function me(e){let t=function(){let e=s.useContext(X);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const ge={};function ve(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}o.startTransition;function ye(e){let{to:t,replace:n,state:r,relative:i}=e;ee()||h(!1);let{future:o,static:a}=s.useContext(J),{matches:l}=s.useContext(X),{pathname:u}=te(),c=re(),d=F(t,U(l,o.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(d);return s.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function we(e){h(!1)}function be(e){let{basename:t="/",children:n=null,location:r,navigationType:o=i.Pop,navigator:a,static:l=!1,future:u}=e;ee()&&h(!1);let c=t.replace(/^\/*/,"/"),d=s.useMemo(()=>({basename:c,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},u)}),[c,u,a,l]);"string"===typeof r&&(r=v(r));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:y="default"}=r,w=s.useMemo(()=>{let e=j(f,c);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:o}},[c,f,p,m,g,y,o]);return null==w?null:s.createElement(J.Provider,{value:d},s.createElement(Y.Provider,{children:n,value:w}))}function xe(e){let{children:t,location:n}=e;return se(Se(t),n)}new Promise(()=>{});s.Component;function Se(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,Se(e.props.children,i));e.type!==we&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Se(e.props.children,i)),n.push(o)}),n}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Fy){}new Map;const Te=o.startTransition;u.flushSync,o.useId;function Ne(e){let{basename:t,children:n,future:r,window:i}=e,o=s.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),y(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return m("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,a)));let l=o.current,[u,c]=s.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=s.useCallback(e=>{d&&Te?Te(()=>c(e)):c(e)},[c,d]);return s.useLayoutEffect(()=>l.listen(h),[l,h]),s.useEffect(()=>ve(r),[r]),s.createElement(be,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=s.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:o,replace:a,state:l,target:u,to:c,preventScrollReset:d,viewTransition:f}=e,p=ke(e,_e),{basename:m}=s.useContext(J),v=!1;if("string"===typeof c&&Ce.test(c)&&(n=c,Ie))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=j(t.pathname,m);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:v=!0}catch(Fy){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||h(!1);let{basename:r,navigator:i}=s.useContext(J),{hash:o,pathname:a,search:l}=ie(e,{relative:n}),u=a;return"/"!==r&&(u="/"===a?r:V([r,a])),i.createHref({pathname:u,search:l,hash:o})}(c,{relative:i}),w=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:l}=void 0===t?{}:t,u=re(),c=te(),d=ie(e,{relative:a});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:g(c)===g(d);u(e,{replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:l})}},[c,u,d,r,i,n,e,o,a,l])}(c,{replace:a,state:l,target:u,preventScrollReset:d,relative:i,viewTransition:f});return s.createElement("a",Ee({},p,{href:n||y,onClick:v||o?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:u}))});var Re,Pe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Re||(Re={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Pe||(Pe={}));var Oe=n(579);function De(){return(0,Oe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 text-white px-6 py-12",children:(0,Oe.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Oe.jsx)("h1",{className:"text-5xl font-bold mb-8 text-center",children:"About MoodTune"}),(0,Oe.jsx)("p",{className:"text-center text-white/70 mb-12 text-lg",children:"MoodTune is your smart music companion, turning emotions into sound. Explore the features below!"}),(0,Oe.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[{title:"\ud83c\udfb5 Personalized Music Experience",description:"MoodTune understands your mood and serves the perfect soundtrack \u2014 happy, relaxed, energetic, calm, or contemplative."},{title:"\ud83d\udca1 Mood Detection",description:"Advanced mood analysis to select songs that resonate with your current emotions, making music more than just sound."},{title:"\u2b50 Favourites & Playlists",description:"Save your favourite songs and create custom playlists. Easily manage and play your personal library."},{title:"\ud83c\udfa4 Voice Control",description:"Hands-free commands to play, pause, skip, or shuffle your music without touching a button."},{title:"\ud83d\udd0a Seamless Playback",description:"Supports local files, online tracks, and playlists. Smooth playback with full control over shuffle, repeat, and volume."},{title:"\ud83c\udf08 Your Music, Your Vibe",description:"MoodTune turns every moment into a personalized soundtrack \u2014 your emotions, your energy, your story."}].map((e,t)=>(0,Oe.jsxs)("div",{className:"bg-black/30 backdrop-blur-sm border border-white/10 rounded-2xl p-6 hover:scale-105 transition-transform duration-300",children:[(0,Oe.jsx)("h2",{className:"text-2xl font-semibold mb-3",children:e.title}),(0,Oe.jsx)("p",{className:"text-white/70 text-sm",children:e.description})]},t))}),(0,Oe.jsxs)("div",{className:"mt-16 text-center",children:[(0,Oe.jsx)("p",{className:"text-white/60 text-lg",children:"MoodTune is not just an app \u2014 it\u2019s your personal DJ, mood tracker, and music library all in one."}),(0,Oe.jsx)("p",{className:"text-white/80 mt-4 font-medium",children:"Start your journey. Feel the music, live the vibe."})]})]})})}function je(e,t){return function(){return e.apply(t,arguments)}}const{toString:Le}=Object.prototype,{getPrototypeOf:Me}=Object,{iterator:Ue,toStringTag:Fe}=Symbol,Ve=(ze=Object.create(null),e=>{const t=Le.call(e);return ze[t]||(ze[t]=t.slice(8,-1).toLowerCase())});var ze;const Be=e=>(e=e.toLowerCase(),t=>Ve(t)===e),$e=e=>t=>typeof t===e,{isArray:qe}=Array,He=$e("undefined");function Ke(e){return null!==e&&!He(e)&&null!==e.constructor&&!He(e.constructor)&&Qe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const We=Be("ArrayBuffer");const Ge=$e("string"),Qe=$e("function"),Je=$e("number"),Ye=e=>null!==e&&"object"===typeof e,Xe=e=>{if("object"!==Ve(e))return!1;const t=Me(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Fe in e)&&!(Ue in e)},Ze=Be("Date"),et=Be("File"),tt=Be("Blob"),nt=Be("FileList"),rt=Be("URLSearchParams"),[it,st,ot,at]=["ReadableStream","Request","Response","Headers"].map(Be);function lt(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),qe(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(Ke(e))return;const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function ut(e,t){if(Ke(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,dt=e=>!He(e)&&e!==ct;const ht=(ft="undefined"!==typeof Uint8Array&&Me(Uint8Array),e=>ft&&e instanceof ft);var ft;const pt=Be("HTMLFormElement"),mt=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),gt=Be("RegExp"),vt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};lt(n,(n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)}),Object.defineProperties(e,r)};const yt=Be("AsyncFunction"),wt=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],ct.addEventListener("message",e=>{let{source:t,data:i}=e;t===ct&&i===n&&r.length&&r.shift()()},!1),e=>{r.push(e),ct.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,Qe(ct.postMessage)),bt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ct):"undefined"!==typeof process&&process.nextTick||wt,xt={isArray:qe,isArrayBuffer:We,isBuffer:Ke,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Qe(e.append)&&("formdata"===(t=Ve(e))||"object"===t&&Qe(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&We(e.buffer),t},isString:Ge,isNumber:Je,isBoolean:e=>!0===e||!1===e,isObject:Ye,isPlainObject:Xe,isEmptyObject:e=>{if(!Ye(e)||Ke(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Fy){return!1}},isReadableStream:it,isRequest:st,isResponse:ot,isHeaders:at,isUndefined:He,isDate:Ze,isFile:et,isBlob:tt,isRegExp:gt,isFunction:Qe,isStream:e=>Ye(e)&&Qe(e.pipe),isURLSearchParams:rt,isTypedArray:ht,isFileList:nt,forEach:lt,merge:function e(){const{caseless:t}=dt(this)&&this||{},n={},r=(r,i)=>{const s=t&&ut(n,i)||i;Xe(n[s])&&Xe(r)?n[s]=e(n[s],r):Xe(r)?n[s]=e({},r):qe(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&lt(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return lt(t,(t,r)=>{n&&Qe(t)?e[r]=je(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&Me(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Ve,kindOfTest:Be,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(qe(e))return e;let t=e.length;if(!Je(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Ue]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:pt,hasOwnProperty:mt,hasOwnProp:mt,reduceDescriptors:vt,freezeMethods:e=>{vt(e,(t,n)=>{if(Qe(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Qe(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return qe(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ut,global:ct,isContextDefined:dt,isSpecCompliantForm:function(e){return!!(e&&Qe(e.append)&&"FormData"===e[Fe]&&e[Ue])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ye(e)){if(t.indexOf(e)>=0)return;if(Ke(e))return e;if(!("toJSON"in e)){t[r]=e;const i=qe(e)?[]:{};return lt(e,(e,t)=>{const s=n(e,r+1);!He(s)&&(i[t]=s)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:yt,isThenable:e=>e&&(Ye(e)||Qe(e))&&Qe(e.then)&&Qe(e.catch),setImmediate:wt,asap:bt,isIterable:e=>null!=e&&Qe(e[Ue])};function St(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}xt.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xt.toJSONObject(this.config),code:this.code,status:this.status}}});const Et=St.prototype,kt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{kt[e]={value:e}}),Object.defineProperties(St,kt),Object.defineProperty(Et,"isAxiosError",{value:!0}),St.from=(e,t,n,r,i,s)=>{const o=Object.create(Et);return xt.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),St.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const _t=St;function Tt(e){return xt.isPlainObject(e)||xt.isArray(e)}function Nt(e){return xt.endsWith(e,"[]")?e.slice(0,-2):e}function It(e,t,n){return e?e.concat(t).map(function(e,t){return e=Nt(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Ct=xt.toFlatObject(xt,{},null,function(e){return/^is[A-Z]/.test(e)});const At=function(e,t,n){if(!xt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=xt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!xt.isUndefined(t[e])})).metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&xt.isSpecCompliantForm(t);if(!xt.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(xt.isDate(e))return e.toISOString();if(xt.isBoolean(e))return e.toString();if(!a&&xt.isBlob(e))throw new _t("Blob is not supported. Use a Buffer instead.");return xt.isArrayBuffer(e)||xt.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(xt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(xt.isArray(e)&&function(e){return xt.isArray(e)&&!e.some(Tt)}(e)||(xt.isFileList(e)||xt.endsWith(n,"[]"))&&(a=xt.toArray(e)))return n=Nt(n),a.forEach(function(e,r){!xt.isUndefined(e)&&null!==e&&t.append(!0===o?It([n],r,s):null===o?n:n+"[]",l(e))}),!1;return!!Tt(e)||(t.append(It(i,n,s),l(e)),!1)}const c=[],d=Object.assign(Ct,{defaultVisitor:u,convertValue:l,isVisitable:Tt});if(!xt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!xt.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),xt.forEach(n,function(n,s){!0===(!(xt.isUndefined(n)||null===n)&&i.call(t,n,xt.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])}),c.pop()}}(e),t};function Rt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Pt(e,t){this._pairs=[],e&&At(e,this,t)}const Ot=Pt.prototype;Ot.append=function(e,t){this._pairs.push([e,t])},Ot.toString=function(e){const t=e?function(t){return e.call(this,t,Rt)}:Rt;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Dt=Pt;function jt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Lt(e,t,n){if(!t)return e;const r=n&&n.encode||jt;xt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):xt.isURLSearchParams(t)?t.toString():new Dt(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Mt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){xt.forEach(this.handlers,function(t){null!==t&&e(t)})}},Ut={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ft={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Dt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Vt="undefined"!==typeof window&&"undefined"!==typeof document,zt="object"===typeof navigator&&navigator||void 0,Bt=Vt&&(!zt||["ReactNative","NativeScript","NS"].indexOf(zt.product)<0),$t="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,qt=Vt&&window.location.href||"http://localhost",Ht={...r,...Ft};const Kt=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&xt.isArray(r)?r.length:s,a)return xt.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&xt.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&xt.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(xt.isFormData(e)&&xt.isFunction(e.entries)){const n={};return xt.forEachEntry(e,(e,r)=>{t(function(e){return xt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const Wt={transitional:Ut,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=xt.isObject(e);i&&xt.isHTMLForm(e)&&(e=new FormData(e));if(xt.isFormData(e))return r?JSON.stringify(Kt(e)):e;if(xt.isArrayBuffer(e)||xt.isBuffer(e)||xt.isStream(e)||xt.isFile(e)||xt.isBlob(e)||xt.isReadableStream(e))return e;if(xt.isArrayBufferView(e))return e.buffer;if(xt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return At(e,new Ht.classes.URLSearchParams,{visitor:function(e,t,n,r){return Ht.isNode&&xt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((s=xt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return At(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(xt.isString(e))try{return(t||JSON.parse)(e),xt.trim(e)}catch(Fy){if("SyntaxError"!==Fy.name)throw Fy}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Wt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(xt.isResponse(e)||xt.isReadableStream(e))return e;if(e&&xt.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Fy){if(n){if("SyntaxError"===Fy.name)throw _t.from(Fy,_t.ERR_BAD_RESPONSE,this,null,this.response);throw Fy}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ht.classes.FormData,Blob:Ht.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xt.forEach(["delete","get","head","post","put","patch"],e=>{Wt.headers[e]={}});const Gt=Wt,Qt=xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jt=Symbol("internals");function Yt(e){return e&&String(e).trim().toLowerCase()}function Xt(e){return!1===e||null==e?e:xt.isArray(e)?e.map(Xt):String(e)}function Zt(e,t,n,r,i){return xt.isFunction(r)?r.call(this,t,n):(i&&(t=n),xt.isString(t)?xt.isString(r)?-1!==t.indexOf(r):xt.isRegExp(r)?r.test(t):void 0:void 0)}class en{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Yt(t);if(!i)throw new Error("header name must be a non-empty string");const s=xt.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=Xt(e))}const s=(e,t)=>xt.forEach(e,(e,n)=>i(e,n,t));if(xt.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(xt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Qt[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(xt.isObject(e)&&xt.isIterable(e)){let n,r,i={};for(const t of e){if(!xt.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?xt.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=Yt(e)){const n=xt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(xt.isFunction(t))return t.call(this,e,n);if(xt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yt(e)){const n=xt.findKey(this,e);return!(!n||void 0===this[n]||t&&!Zt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Yt(e)){const i=xt.findKey(n,e);!i||t&&!Zt(0,n[i],i,t)||(delete n[i],r=!0)}}return xt.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Zt(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return xt.forEach(this,(r,i)=>{const s=xt.findKey(n,i);if(s)return t[s]=Xt(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(i):String(i).trim();o!==i&&delete t[i],t[o]=Xt(r),n[o]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return xt.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&xt.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Jt]=this[Jt]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Yt(e);t[r]||(!function(e,t){const n=xt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return xt.isArray(e)?e.forEach(r):r(e),this}}en.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),xt.reduceDescriptors(en.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),xt.freezeMethods(en);const tn=en;function nn(e,t){const n=this||Gt,r=t||n,i=tn.from(r.headers);let s=r.data;return xt.forEach(e,function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function rn(e){return!(!e||!e.__CANCEL__)}function sn(e,t,n){_t.call(this,null==e?"canceled":e,_t.ERR_CANCELED,t,n),this.name="CanceledError"}xt.inherits(sn,_t,{__CANCEL__:!0});const on=sn;function an(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new _t("Request failed with status code "+n.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const ln=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),u=r[o];i||(i=l),n[s]=a,r[s]=l;let c=o,d=0;for(;c!==s;)d+=n[c++],c%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const h=u&&l-u;return h?Math.round(1e3*d/h):void 0}};const un=function(e,t){let n,r,i=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];t>=s?o(l,e):(n=l,r||(r=setTimeout(()=>{r=null,o(n)},s-t)))},()=>n&&o(n)]},cn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=ln(50,250);return un(n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,l=i(a);r=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})},n)},dn=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},hn=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xt.asap(()=>e(...n))},fn=Ht.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ht.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ht.origin),Ht.navigator&&/(msie|trident)/i.test(Ht.navigator.userAgent)):()=>!0,pn=Ht.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];xt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),xt.isString(r)&&o.push("path="+r),xt.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function mn(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const gn=e=>e instanceof tn?{...e}:e;function vn(e,t){t=t||{};const n={};function r(e,t,n,r){return xt.isPlainObject(e)&&xt.isPlainObject(t)?xt.merge.call({caseless:r},e,t):xt.isPlainObject(t)?xt.merge({},t):xt.isArray(t)?t.slice():t}function i(e,t,n,i){return xt.isUndefined(t)?xt.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!xt.isUndefined(t))return r(void 0,t)}function o(e,t){return xt.isUndefined(t)?xt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>i(gn(e),gn(t),0,!0)};return xt.forEach(Object.keys({...e,...t}),function(r){const s=l[r]||i,o=s(e[r],t[r],r);xt.isUndefined(o)&&s!==a||(n[r]=o)}),n}const yn=e=>{const t=vn({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=tn.from(a),t.url=Lt(mn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),xt.isFormData(r))if(Ht.hasStandardBrowserEnv||Ht.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Ht.hasStandardBrowserEnv&&(i&&xt.isFunction(i)&&(i=i(t)),i||!1!==i&&fn(t.url))){const e=s&&o&&pn.read(o);e&&a.set(s,e)}return t},wn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=yn(e);let i=r.data;const s=tn.from(r.headers).normalize();let o,a,l,u,c,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){u&&u(),c&&c(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=tn.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());an(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new _t("Request aborted",_t.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new _t("Network Error",_t.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Ut;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new _t(t,i.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,e,m)),m=null},void 0===i&&s.setContentType(null),"setRequestHeader"in m&&xt.forEach(s.toJSON(),function(e,t){m.setRequestHeader(t,e)}),xt.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),f&&([l,c]=cn(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,u]=cn(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",u)),(r.cancelToken||r.signal)&&(o=t=>{m&&(n(!t||t.type?new on(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===Ht.protocols.indexOf(v)?n(new _t("Unsupported protocol "+v+":",_t.ERR_BAD_REQUEST,e)):m.send(i||null)})},bn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof _t?t:new on(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,i(new _t(`timeout ${t} of ms exceeded`,_t.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:a}=r;return a.unsubscribe=()=>xt.asap(o),a}},xn=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Sn=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},En=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of Sn(e))yield*xn(n,t)}(e,t);let s,o=0,a=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let s=r.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},kn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,_n=kn&&"function"===typeof ReadableStream,Tn=kn&&("function"===typeof TextEncoder?(Nn=new TextEncoder,e=>Nn.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Nn;const In=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Fy){return!1}},Cn=_n&&In(()=>{let e=!1;const t=new Request(Ht.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),An=_n&&In(()=>xt.isReadableStream(new Response("").body)),Rn={stream:An&&(e=>e.body)};var Pn;kn&&(Pn=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Rn[e]&&(Rn[e]=xt.isFunction(Pn[e])?t=>t[e]():(t,n)=>{throw new _t(`Response type '${e}' is not supported`,_t.ERR_NOT_SUPPORT,n)})}));const On=async(e,t)=>{const n=xt.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(xt.isBlob(e))return e.size;if(xt.isSpecCompliantForm(e)){const t=new Request(Ht.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return xt.isArrayBufferView(e)||xt.isArrayBuffer(e)?e.byteLength:(xt.isURLSearchParams(e)&&(e+=""),xt.isString(e)?(await Tn(e)).byteLength:void 0)})(t):n},Dn=kn&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:h}=yn(e);u=u?(u+"").toLowerCase():"text";let f,p=bn([i,s&&s.toAbortSignal()],o);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&Cn&&"get"!==n&&"head"!==n&&0!==(g=await On(c,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(xt.isFormData(r)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body){const[e,t]=dn(g,cn(hn(l)));r=En(n.body,65536,e,t)}}xt.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let s=await fetch(f,h);const o=An&&("stream"===u||"response"===u);if(An&&(a||o&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=s[t]});const t=xt.toFiniteNumber(s.headers.get("content-length")),[n,r]=a&&dn(t,cn(hn(a),!0))||[];s=new Response(En(s.body,65536,n,()=>{r&&r(),m&&m()}),e)}u=u||"text";let v=await Rn[xt.findKey(Rn,u)||"text"](s,e);return!o&&m&&m(),await new Promise((t,n)=>{an(t,n,{data:v,headers:tn.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:f})})}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new _t("Network Error",_t.ERR_NETWORK,e,f),{cause:v.cause||v});throw _t.from(v,v&&v.code,e,f)}}),jn={http:null,xhr:wn,fetch:Dn};xt.forEach(jn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Fy){}Object.defineProperty(e,"adapterName",{value:t})}});const Ln=e=>`- ${e}`,Mn=e=>xt.isFunction(e)||null===e||!1===e,Un=e=>{e=xt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!Mn(n)&&(r=jn[(t=String(n)).toLowerCase()],void 0===r))throw new _t(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map(e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(Ln).join("\n"):" "+Ln(e[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Fn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new on(null,e)}function Vn(e){Fn(e),e.headers=tn.from(e.headers),e.data=nn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Un(e.adapter||Gt.adapter)(e).then(function(t){return Fn(e),t.data=nn.call(e,e.transformResponse,t),t.headers=tn.from(t.headers),t},function(t){return rn(t)||(Fn(e),t&&t.response&&(t.response.data=nn.call(e,e.transformResponse,t.response),t.response.headers=tn.from(t.response.headers))),Promise.reject(t)})}const zn="1.11.0",Bn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Bn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const $n={};Bn.transitional=function(e,t,n){function r(e,t){return"[Axios v"+zn+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new _t(r(i," has been removed"+(t?" in "+t:"")),_t.ERR_DEPRECATED);return t&&!$n[i]&&($n[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},Bn.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const qn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new _t("option "+s+" must be "+n,_t.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new _t("Unknown option "+s,_t.ERR_BAD_OPTION)}},validators:Bn},Hn=qn.validators;class Kn{constructor(e){this.defaults=e||{},this.interceptors={request:new Mt,response:new Mt}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Fy){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=vn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&qn.assertOptions(n,{silentJSONParsing:Hn.transitional(Hn.boolean),forcedJSONParsing:Hn.transitional(Hn.boolean),clarifyTimeoutError:Hn.transitional(Hn.boolean)},!1),null!=r&&(xt.isFunction(r)?t.paramsSerializer={serialize:r}:qn.assertOptions(r,{encode:Hn.function,serialize:Hn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),qn.assertOptions(t,{baseUrl:Hn.spelling("baseURL"),withXsrfToken:Hn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&xt.merge(i.common,i[t.method]);i&&xt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=tn.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const l=[];let u;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let c,d=0;if(!a){const e=[Vn.bind(this),void 0];for(e.unshift(...o),e.push(...l),c=e.length,u=Promise.resolve(t);d<c;)u=u.then(e[d++],e[d++]);return u}c=o.length;let h=t;for(d=0;d<c;){const e=o[d++],t=o[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{u=Vn.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,c=l.length;d<c;)u=u.then(l[d++],l[d++]);return u}getUri(e){return Lt(mn((e=vn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}xt.forEach(["delete","get","head","options"],function(e){Kn.prototype[e]=function(t,n){return this.request(vn(n||{},{method:e,url:t,data:(n||{}).data}))}}),xt.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(vn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Kn.prototype[e]=t(),Kn.prototype[e+"Form"]=t(!0)});const Wn=Kn;class Gn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new on(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Gn(function(t){e=t}),cancel:e}}}const Qn=Gn;const Jn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jn).forEach(e=>{let[t,n]=e;Jn[n]=t});const Yn=Jn;const Xn=function e(t){const n=new Wn(t),r=je(Wn.prototype.request,n);return xt.extend(r,Wn.prototype,n,{allOwnKeys:!0}),xt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(vn(t,n))},r}(Gt);Xn.Axios=Wn,Xn.CanceledError=on,Xn.CancelToken=Qn,Xn.isCancel=rn,Xn.VERSION=zn,Xn.toFormData=At,Xn.AxiosError=_t,Xn.Cancel=Xn.CanceledError,Xn.all=function(e){return Promise.all(e)},Xn.spread=function(e){return function(t){return e.apply(null,t)}},Xn.isAxiosError=function(e){return xt.isObject(e)&&!0===e.isAxiosError},Xn.mergeConfig=vn,Xn.AxiosHeaders=tn,Xn.formToJSON=e=>Kt(xt.isHTMLForm(e)?new FormData(e):e),Xn.getAdapter=Un,Xn.HttpStatusCode=Yn,Xn.default=Xn;const Zn=Xn,er=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},tr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(er(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new nr;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class nr extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rr=function(e){return function(e){const t=er(e);return tr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ir=function(e){try{return tr.decodeString(e,!0)}catch(Fy){console.error("base64Decode failed: ",Fy)}return null};const sr=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,or=()=>{try{return sr()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_APP_ID:"1:809321030769:web:1b6782195a8828452b27d0",REACT_APP_FIREBASE_AUTH_DOMAIN:"melodymind-b3fe6.firebaseapp.com",REACT_APP_FIREBASE_KEY:"AIzaSyAw5PoYCr72Dbt2Aw_QEPurAxKR2HSbfvw",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-PFL8PT8H5Q",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"809321030769",REACT_APP_FIREBASE_PROJECT_ID:"melodymind-b3fe6",REACT_APP_FIREBASE_STORAGE_BUCKET:"melodymind-b3fe6.firebasestorage.app",REACT_APP_YOUTUBE_API_KEY:"AIzaSyBu-ZAtxoeL5SWY8stSYLoEluQStEcQQp8"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Fy){return}const t=e&&ir(e[1]);return t&&JSON.parse(t)})()}catch(Fy){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Fy}`)}},ar=e=>{var t,n;return null===(n=null===(t=or())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},lr=()=>{var e;return null===(e=or())||void 0===e?void 0:e.config},ur=e=>{var t;return null===(t=or())||void 0===t?void 0:t[`_${e}`]};class cr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function dr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function hr(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function fr(){return!function(){var e;const t=null===(e=or())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Fy){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pr(){try{return"object"===typeof indexedDB}catch(Fy){return!1}}function mr(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class gr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vr.prototype.create)}}class vr{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(yr,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new gr(n,s,t)}}const yr=/\{\$([^}]+)}/g;function wr(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(br(n)&&br(s)){if(!wr(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function br(e){return null!==e&&"object"===typeof e}function xr(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Sr(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Er(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class kr{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=_r),void 0===r.error&&(r.error=_r),void 0===r.complete&&(r.complete=_r);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Fy){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Fy){"undefined"!==typeof console&&console.error&&console.error(Fy)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _r(){}function Tr(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Nr(e){return e&&e._delegate?e._delegate:e}class Ir{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Cr="[DEFAULT]";class Ar{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new cr;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Fy){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Fy){if(r)return null;throw Fy}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch(Fy){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Fy){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Cr?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr;return this.component?this.component.multipleInstances?e:Cr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Rr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ar(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Pr=[];var Or;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Or||(Or={}));const Dr={debug:Or.DEBUG,verbose:Or.VERBOSE,info:Or.INFO,warn:Or.WARN,error:Or.ERROR,silent:Or.SILENT},jr=Or.INFO,Lr={[Or.DEBUG]:"log",[Or.VERBOSE]:"log",[Or.INFO]:"info",[Or.WARN]:"warn",[Or.ERROR]:"error"},Mr=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Lr[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class Ur{constructor(e){this.name=e,this._logLevel=jr,this._logHandler=Mr,this._userLogHandler=null,Pr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Or))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Dr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Or.DEBUG,...t),this._logHandler(this,Or.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Or.VERBOSE,...t),this._logHandler(this,Or.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Or.INFO,...t),this._logHandler(this,Or.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Or.WARN,...t),this._logHandler(this,Or.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Or.ERROR,...t),this._logHandler(this,Or.ERROR,...t)}}let Fr,Vr;const zr=new WeakMap,Br=new WeakMap,$r=new WeakMap,qr=new WeakMap,Hr=new WeakMap;let Kr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Br.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$r.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Wr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Vr||(Vr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Jr(this),n),Qr(zr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qr(e.apply(Jr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Jr(this),t,...r);return $r.set(s,t.sort?t.sort():[t]),Qr(s)}}function Gr(e){return"function"===typeof e?Wr(e):(e instanceof IDBTransaction&&function(e){if(Br.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Br.set(e,t)}(e),t=e,(Fr||(Fr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Kr):e);var t}function Qr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Qr(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&zr.set(t,e)}).catch(()=>{}),Hr.set(t,e),t}(e);if(qr.has(e))return qr.get(e);const t=Gr(e);return t!==e&&(qr.set(e,t),Hr.set(t,e)),t}const Jr=e=>Hr.get(e);function Yr(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Qr(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Qr(o.result),e.oldVersion,e.newVersion,Qr(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}const Xr=["get","getKey","getAll","getAllKeys","count"],Zr=["put","add","delete","clear"],ei=new Map;function ti(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ei.get(t))return ei.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Zr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Xr.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ei.set(t,s),s}Kr=(e=>({...e,get:(t,n,r)=>ti(t,n)||e.get(t,n,r),has:(t,n)=>!!ti(t,n)||e.has(t,n)}))(Kr);class ni{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const ri="@firebase/app",ii="0.10.13",si=new Ur("@firebase/app"),oi="@firebase/app-compat",ai="@firebase/analytics-compat",li="@firebase/analytics",ui="@firebase/app-check-compat",ci="@firebase/app-check",di="@firebase/auth",hi="@firebase/auth-compat",fi="@firebase/database",pi="@firebase/data-connect",mi="@firebase/database-compat",gi="@firebase/functions",vi="@firebase/functions-compat",yi="@firebase/installations",wi="@firebase/installations-compat",bi="@firebase/messaging",xi="@firebase/messaging-compat",Si="@firebase/performance",Ei="@firebase/performance-compat",ki="@firebase/remote-config",_i="@firebase/remote-config-compat",Ti="@firebase/storage",Ni="@firebase/storage-compat",Ii="@firebase/firestore",Ci="@firebase/vertexai-preview",Ai="@firebase/firestore-compat",Ri="firebase",Pi="[DEFAULT]",Oi={[ri]:"fire-core",[oi]:"fire-core-compat",[li]:"fire-analytics",[ai]:"fire-analytics-compat",[ci]:"fire-app-check",[ui]:"fire-app-check-compat",[di]:"fire-auth",[hi]:"fire-auth-compat",[fi]:"fire-rtdb",[pi]:"fire-data-connect",[mi]:"fire-rtdb-compat",[gi]:"fire-fn",[vi]:"fire-fn-compat",[yi]:"fire-iid",[wi]:"fire-iid-compat",[bi]:"fire-fcm",[xi]:"fire-fcm-compat",[Si]:"fire-perf",[Ei]:"fire-perf-compat",[ki]:"fire-rc",[_i]:"fire-rc-compat",[Ti]:"fire-gcs",[Ni]:"fire-gcs-compat",[Ii]:"fire-fst",[Ai]:"fire-fst-compat",[Ci]:"fire-vertex","fire-js":"fire-js",[Ri]:"fire-js-all"},Di=new Map,ji=new Map,Li=new Map;function Mi(e,t){try{e.container.addComponent(t)}catch(Fy){si.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Fy)}}function Ui(e){const t=e.name;if(Li.has(t))return si.debug(`There were multiple attempts to register component ${t}.`),!1;Li.set(t,e);for(const n of Di.values())Mi(n,e);for(const n of ji.values())Mi(n,e);return!0}function Fi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Vi(e){return void 0!==e.settings}const zi=new vr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Bi{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}const $i="10.14.1";function qi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Pi,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw zi.create("bad-app-name",{appName:String(i)});if(n||(n=lr()),!n)throw zi.create("no-options");const s=Di.get(i);if(s){if(wr(n,s.options)&&wr(r,s.config))return s;throw zi.create("duplicate-app",{appName:i})}const o=new Rr(i);for(const l of Li.values())o.addComponent(l);const a=new Bi(n,r,o);return Di.set(i,a),a}function Hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi;const t=Di.get(e);if(!t&&e===Pi&&lr())return qi();if(!t)throw zi.create("no-app",{appName:e});return t}function Ki(e,t,n){var r;let i=null!==(r=Oi[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void si.warn(e.join(" "))}Ui(new Ir(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const Wi="firebase-heartbeat-store";let Gi=null;function Qi(){return Gi||(Gi=Yr("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Wi)}catch(Fy){console.warn(Fy)}}}).catch(e=>{throw zi.create("idb-open",{originalErrorMessage:e.message})})),Gi}async function Ji(e,t){try{const n=(await Qi()).transaction(Wi,"readwrite"),r=n.objectStore(Wi);await r.put(t,Yi(e)),await n.done}catch(Fy){if(Fy instanceof gr)si.warn(Fy.message);else{const t=zi.create("idb-set",{originalErrorMessage:null===Fy||void 0===Fy?void 0:Fy.message});si.warn(t.message)}}}function Yi(e){return`${e.name}!${e.options.appId}`}class Xi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new es(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Zi();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Fy){si.warn(Fy)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Zi(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ts(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ts(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=rr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Fy){return si.warn(Fy),""}}}function Zi(){return(new Date).toISOString().substring(0,10)}class es{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!pr()&&mr().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Qi()).transaction(Wi),n=await t.objectStore(Wi).get(Yi(e));return await t.done,n}catch(Fy){if(Fy instanceof gr)si.warn(Fy.message);else{const t=zi.create("idb-get",{originalErrorMessage:null===Fy||void 0===Fy?void 0:Fy.message});si.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ji(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ji(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ts(e){return rr(JSON.stringify({version:2,heartbeats:e})).length}var ns;ns="",Ui(new Ir("platform-logger",e=>new ni(e),"PRIVATE")),Ui(new Ir("heartbeat",e=>new Xi(e),"PRIVATE")),Ki(ri,ii,ns),Ki(ri,ii,"esm2017"),Ki("fire-js","");Ki("firebase","10.14.1","app");function rs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function is(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ss=is,os=new vr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),as=new Ur("@firebase/auth");function ls(e){if(as.logLevel<=Or.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];as.error(`Auth (${$i}): ${e}`,...n)}}function us(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ps(e,...n)}function cs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ps(e,...n)}function ds(e,t,n){const r=Object.assign(Object.assign({},ss()),{[t]:n});return new vr("auth","Firebase",r).create(t,{appName:e.name})}function hs(e){return ds(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fs(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&us(e,"argument-error"),ds(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ps(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return os.create(e,...n)}function ms(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ps(t,...r)}}function gs(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ls(t),new Error(t)}function vs(e,t){e||gs(t)}function ys(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ws(){return"http:"===bs()||"https:"===bs()}function bs(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class xs{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dr())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ws()||hr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ss(e,t){vs(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Es{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ks={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_s=new xs(3e4,6e4);function Ts(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ns(e,t,n,r){return Is(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=xr(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Es.fetch()(As(e,e.config.apiHost,n,o),l)})}async function Is(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ks),t);try{const t=new Ps(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Os(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Os(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Os(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Os(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ds(e,a,o);us(e,a)}}catch(Fy){if(Fy instanceof gr)throw Fy;us(e,"network-request-failed",{message:String(Fy)})}}async function Cs(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Ns(e,t,n,r,i);return"mfaPendingCredential"in s&&us(e,"multi-factor-auth-required",{_serverResponse:s}),s}function As(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Ss(e.config,i):`${e.config.apiScheme}://${i}`}function Rs(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ps{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(cs(this.auth,"network-request-failed")),_s.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Os(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cs(e,t,r);return i.customData._tokenResponse=n,i}function Ds(e){return void 0!==e&&void 0!==e.enterprise}class js{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Rs(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ls(e,t){return Ns(e,"GET","/v2/recaptchaConfig",Ts(e,t))}async function Ms(e,t){return Ns(e,"POST","/v1/accounts:lookup",t)}function Us(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Fy){}}function Fs(e){return 1e3*Number(e)}function Vs(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ls("JWT malformed, contained fewer than 3 sections"),null;try{const e=ir(n);return e?JSON.parse(e):(ls("Failed to decode base64 JWT payload"),null)}catch(Fy){return ls("Caught error parsing JWT payload as JSON",null===Fy||void 0===Fy?void 0:Fy.toString()),null}}function zs(e){const t=Vs(e);return ms(t,"internal-error"),ms("undefined"!==typeof t.exp,"internal-error"),ms("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Bs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Fy){throw Fy instanceof gr&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Fy)&&e.auth.currentUser===e&&await e.auth.signOut(),Fy}}class $s{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Fy){return void("auth/network-request-failed"===(null===Fy||void 0===Fy?void 0:Fy.code)&&this.schedule(!0))}this.schedule()}}class qs{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Us(this.lastLoginAt),this.creationTime=Us(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Hs(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Bs(e,Ms(n,{idToken:r}));ms(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Ks(s.providerUserInfo):[],a=(l=e.providerData,u=o,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!c&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qs(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Ks(e){return e.map(e=>{var{providerId:t}=e,n=rs(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Ws{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ms(e.idToken,"internal-error"),ms("undefined"!==typeof e.idToken,"internal-error"),ms("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):zs(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ms(0!==e.length,"internal-error");const t=zs(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ms(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Is(e,{},async()=>{const n=xr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=As(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Es.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ws;return n&&(ms("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ms("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ms("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ws,this.toJSON())}_performRefresh(){return gs("not implemented")}}function Gs(e,t){ms("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Qs{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=rs(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $s(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qs(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Bs(this,this.stsTokenManager.getToken(this.auth,e));return ms(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Nr(e),r=await n.getIdToken(t),i=Vs(r);ms(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Us(Fs(i.auth_time)),issuedAtTime:Us(Fs(i.iat)),expirationTime:Us(Fs(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Nr(e);await Hs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ms(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ms(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Hs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await Bs(this,async function(e,t){return Ns(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:x,stsTokenManager:S}=t;ms(y&&S,e,"internal-error");const E=Ws.fromJSON(this.name,S);ms("string"===typeof y,e,"internal-error"),Gs(c,e.name),Gs(d,e.name),ms("boolean"===typeof w,e,"internal-error"),ms("boolean"===typeof b,e,"internal-error"),Gs(h,e.name),Gs(f,e.name),Gs(p,e.name),Gs(m,e.name),Gs(g,e.name),Gs(v,e.name);const k=new Qs({uid:y,auth:e,email:d,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(k.providerData=x.map(e=>Object.assign({},e))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ws;r.updateFromServerResponse(t);const i=new Qs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Hs(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ms(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Ks(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Ws;o.updateFromIdToken(n);const a=new Qs({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new qs(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Js=new Map;function Ys(e){vs(e instanceof Function,"Expected a class definition");let t=Js.get(e);return t?(vs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Js.set(e,t),t)}class Xs{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xs.type="NONE";const Zs=Xs;function eo(e,t,n){return`firebase:${e}:${t}:${n}`}class to{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=eo(this.userKey,r.apiKey,i),this.fullPersistenceKey=eo("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new to(Ys(Zs),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Ys(Zs);const s=eo(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=Qs._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new to(i,e,n)):new to(i,e,n)}}function no(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(oo(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ro(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(lo(t))return"Blackberry";if(uo(t))return"Webos";if(io(t))return"Safari";if((t.includes("chrome/")||so(t))&&!t.includes("edge/"))return"Chrome";if(ao(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/firefox\//i.test(e)}function io(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function so(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/crios\//i.test(e)}function oo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/iemobile/i.test(e)}function ao(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/android/i.test(e)}function lo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/blackberry/i.test(e)}function uo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/webos/i.test(e)}function co(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ho(){return function(){const e=dr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function fo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();return co(e)||ao(e)||uo(e)||lo(e)||/windows phone/i.test(e)||oo(e)}function po(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=no(dr());break;case"Worker":t=`${no(dr())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${$i}/${r}`}class mo{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Fy){r(Fy)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Fy){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Fy||void 0===Fy?void 0:Fy.message})}}}class go{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class vo{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wo(this),this.idTokenSubscription=new wo(this),this.beforeStateQueue=new mo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=os,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ys(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await to.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Fy){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ms(this,{idToken:e}),n=await Qs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Vi(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Fy){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Fy))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ms(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Fy){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hs(e)}catch(Fy){if("auth/network-request-failed"!==(null===Fy||void 0===Fy?void 0:Fy.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vi(this.app))return Promise.reject(hs(this));const t=e?Nr(e):null;return t&&ms(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ms(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vi(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ys(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ns(e,"GET","/v2/passwordPolicy",Ts(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new go(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vr("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ns(e,"POST","/v2/accounts:revokeToken",Ts(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ys(e)||this._popupRedirectResolver;ms(t,this,"argument-error"),this.redirectPersistenceManager=await to.create(this,[Ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ms(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ms(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=po(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(as.logLevel<=Or.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];as.warn(`Auth (${$i}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function yo(e){return Nr(e)}class wo{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new kr(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ms(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xo(e){return bo.loadJS(e)}function So(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Eo{constructor(e){this.type="recaptcha-enterprise",this.auth=yo(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ds(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ls(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new js(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Ds(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=bo.recaptchaEnterpriseScript;0!==t.length&&(t+=i),xo(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ko(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Eo(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _o(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ko(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ko(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function To(e,t,n){const r=yo(e);ms(r._canInitEmulator,r,"emulator-config-failed"),ms(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=No(t),{host:o,port:a}=function(e){const t=No(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Io(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Io(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function No(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Io(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Co{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,t){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function Ao(e,t){return Ns(e,"POST","/v1/accounts:signUp",t)}async function Ro(e,t){return Cs(e,"POST","/v1/accounts:signInWithPassword",Ts(e,t))}class Po extends Co{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Po(e,t,"password")}static _fromEmailAndCode(e,t){return new Po(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return _o(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ro);case"emailLink":return async function(e,t){return Cs(e,"POST","/v1/accounts:signInWithEmailLink",Ts(e,t))}(e,{email:this._email,oobCode:this._password});default:us(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return _o(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ao);case"emailLink":return async function(e,t){return Cs(e,"POST","/v1/accounts:signInWithEmailLink",Ts(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Oo(e,t){return Cs(e,"POST","/v1/accounts:signInWithIdp",Ts(e,t))}class Do extends Co{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):us("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=rs(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Do(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Oo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Oo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xr(t)}return e}}const jo={USER_NOT_FOUND:"user-not-found"};class Lo extends Co{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Lo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Lo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Cs(e,"POST","/v1/accounts:signInWithPhoneNumber",Ts(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Cs(e,"POST","/v1/accounts:signInWithPhoneNumber",Ts(e,t));if(n.temporaryProof)throw Os(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Cs(e,"POST","/v1/accounts:signInWithPhoneNumber",Ts(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),jo)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Lo({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Mo{constructor(e){var t,n,r,i,s,o;const a=Sr(Er(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ms(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Sr(Er(e)).link,n=t?Sr(Er(t)).deep_link_id:null,r=Sr(Er(e)).deep_link_id;return(r?Sr(Er(r)).link:null)||r||n||t||e}(e);try{return new Mo(t)}catch(n){return null}}}class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(e,t){return Po._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Mo.parseLink(t);return ms(n,"argument-error"),Po._fromEmailAndCode(e,n.code,n.tenantId)}}Uo.PROVIDER_ID="password",Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Fo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Vo extends Fo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zo extends Vo{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zo.credential(t.oauthAccessToken)}catch(n){return null}}}zo.FACEBOOK_SIGN_IN_METHOD="facebook.com",zo.PROVIDER_ID="facebook.com";class Bo extends Vo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Bo.credential(n,r)}catch(i){return null}}}Bo.GOOGLE_SIGN_IN_METHOD="google.com",Bo.PROVIDER_ID="google.com";class $o extends Vo{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $o.credential(t.oauthAccessToken)}catch(n){return null}}}$o.GITHUB_SIGN_IN_METHOD="github.com",$o.PROVIDER_ID="github.com";class qo extends Vo{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return qo.credential(n,r)}catch(i){return null}}}async function Ho(e,t){return Cs(e,"POST","/v1/accounts:signUp",Ts(e,t))}qo.TWITTER_SIGN_IN_METHOD="twitter.com",qo.PROVIDER_ID="twitter.com";class Ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Qs._fromIdTokenResponse(e,n,r),s=Wo(n);return new Ko({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Wo(n);return new Ko({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Wo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Go extends gr{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Go.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Go(e,t,n,r)}}function Qo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Go._fromErrorAndOperation(e,n,t,r);throw n})}async function Jo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Bs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ko._forOperation(e,"link",r)}async function Yo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Vi(r.app))return Promise.reject(hs(r));const i="reauthenticate";try{const s=await Bs(e,Qo(r,i,t,e),n);ms(s.idToken,r,"internal-error");const o=Vs(s.idToken);ms(o,r,"internal-error");const{sub:a}=o;return ms(e.uid===a,r,"user-mismatch"),Ko._forOperation(e,i,s)}catch(Fy){throw"auth/user-not-found"===(null===Fy||void 0===Fy?void 0:Fy.code)&&us(r,"user-mismatch"),Fy}}async function Xo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Vi(e.app))return Promise.reject(hs(e));const r="signIn",i=await Qo(e,r,t),s=await Ko._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Zo(e,t){return Xo(yo(e),t)}async function ea(e){const t=yo(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ta(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Nr(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Bs(i,async function(e,t){return Ns(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function na(e,t,n,r){return Nr(e).onAuthStateChanged(t,n,r)}new WeakMap;const ra="__sak";class ia{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ra,"1"),this.storage.removeItem(ra),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class sa extends ia{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fo(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ho()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sa.type="LOCAL";const oa=sa;class aa extends ia{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aa.type="SESSION";const la=aa;class ua{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ua(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ua.receivers=[];class da{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=ca("",20);r.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function ha(){return window}function fa(){return"undefined"!==typeof ha().WorkerGlobalScope&&"function"===typeof ha().importScripts}const pa="firebaseLocalStorageDb",ma="firebaseLocalStorage",ga="fbase_key";class va{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ya(e,t){return e.transaction([ma],t?"readwrite":"readonly").objectStore(ma)}function wa(){const e=indexedDB.open(pa,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ma,{keyPath:ga})}catch(Fy){n(Fy)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ma)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(pa);return new va(e).toPromise()}(),t(await wa()))})})}async function ba(e,t,n){const r=ya(e,!0).put({[ga]:t,value:n});return new va(r).toPromise()}function xa(e,t){const n=ya(e,!0).delete(t);return new va(n).toPromise()}class Sa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await wa()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Fy){if(t++>3)throw Fy;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fa()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ua._getInstance(fa()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new da(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wa();return await ba(e,ra,"1"),await xa(e,ra),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ba(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=ya(e,!1).get(t),r=await new va(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xa(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=ya(e,!1).getAll();return new va(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Sa.type="LOCAL";const Ea=Sa;So("rcb"),new xs(3e4,6e4);const ka="recaptcha";async function _a(e,t,n){var r;const i=await n.verify();try{let s;if(ms("string"===typeof i,e,"argument-error"),ms(n.type===ka,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ms("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ns(e,"POST","/v2/accounts/mfaEnrollment:start",Ts(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ms("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ms(n,e,"missing-multi-factor-info");const o=await function(e,t){return Ns(e,"POST","/v2/accounts/mfaSignIn:start",Ts(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ns(e,"POST","/v1/accounts:sendVerificationCode",Ts(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Ta{constructor(e){this.providerId=Ta.PROVIDER_ID,this.auth=yo(e)}verifyPhoneNumber(e,t){return _a(this.auth,e,Nr(t))}static credential(e,t){return Lo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ta.credentialFromTaggedObject(t)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Lo._fromTokenResponse(n,r):null}}function Na(e,t){return t?Ys(t):(ms(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ta.PROVIDER_ID="phone",Ta.PHONE_SIGN_IN_METHOD="phone";class Ia extends Co{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ca(e){return Xo(e.auth,new Ia(e),e.bypassAuthState)}function Aa(e){const{auth:t,user:n}=e;return ms(n,t,"internal-error"),Yo(n,new Ia(e),e.bypassAuthState)}async function Ra(e){const{auth:t,user:n}=e;return ms(n,t,"internal-error"),Jo(n,new Ia(e),e.bypassAuthState)}class Pa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Fy){this.reject(Fy)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(Fy){this.reject(Fy)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ca;case"linkViaPopup":case"linkViaRedirect":return Ra;case"reauthViaPopup":case"reauthViaRedirect":return Aa;default:us(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oa=new xs(2e3,1e4);class Da extends Pa{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Da.currentPopupAction&&Da.currentPopupAction.cancel(),Da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ms(e,this.auth,"internal-error"),e}async onExecution(){vs(1===this.filter.length,"Popup operations only handle one event");const e=ca();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Oa.get())};e()}}Da.currentPopupAction=null;const ja=new Map;class La extends Pa{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ja.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Fa(t),r=Ua(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Fy){e=()=>Promise.reject(Fy)}ja.set(this.auth._key(),e)}return this.bypassAuthState||ja.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ma(e,t){ja.set(e._key(),t)}function Ua(e){return Ys(e._redirectPersistence)}function Fa(e){return eo("pendingRedirect",e.config.apiKey,e.name)}async function Va(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Vi(e.app))return Promise.reject(hs(e));const r=yo(e),i=Na(r,t),s=new La(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class za{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $a(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!$a(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(cs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ba(e))}saveEventToCache(e){this.cachedEventUids.add(Ba(e)),this.lastProcessedEventTime=Date.now()}}function Ba(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function $a(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const qa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ha=/^https?/;async function Ka(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ns(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Wa(r))return}catch(n){}us(e,"unauthorized-domain")}function Wa(e){const t=ys(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ha.test(n))return!1;if(qa.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ga=new xs(3e4,6e4);function Qa(){const e=ha().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ja(e){return new Promise((t,n)=>{var r,i,s;function o(){Qa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qa(),n(cs(e,"network-request-failed"))},timeout:Ga.get()})}if(null===(i=null===(r=ha().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ha().gapi)||void 0===s?void 0:s.load)){const t=So("iframefcb");return ha()[t]=()=>{gapi.load?o():n(cs(e,"network-request-failed"))},xo(`${bo.gapiScript}?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Ya=null,e})}let Ya=null;const Xa=new xs(5e3,15e3),Za={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},el=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tl(e){const t=e.config;ms(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ss(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:$i},i=el.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xr(r).slice(1)}`}async function nl(e){const t=await function(e){return Ya=Ya||Ja(e),Ya}(e),n=ha().gapi;return ms(n,e,"internal-error"),t.open({where:document.body,url:tl(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Za,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=cs(e,"network-request-failed"),s=ha().setTimeout(()=>{r(i)},Xa.get());function o(){ha().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const rl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class il{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Fy){}}}function sl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},rl),{width:r.toString(),height:i.toString(),top:s,left:o}),u=dr().toLowerCase();n&&(a=so(u)?"_blank":n),ro(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return co(arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new il(null);const d=window.open(t||"",a,c);ms(d,e,"popup-blocked");try{d.focus()}catch(Fy){}return new il(d)}const ol="__/auth/handler",al="emulator/auth/handler",ll=encodeURIComponent("fac");async function ul(e,t,n,r,i,s){ms(e.config.authDomain,e,"auth-domain-config-required"),ms(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:$i,eventId:i};if(t instanceof Fo){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Vo){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${ll}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${ol}`;return Ss(t,al)}(e)}?${xr(a).slice(1)}${u}`}const cl="webStorageSupport";const dl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=la,this._completeRedirectFn=Va,this._overrideRedirectResult=Ma}async _openPopup(e,t,n,r){var i;vs(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return sl(e,await ul(e,t,n,ys(),r),ca())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ha().location.href=e}(await ul(e,t,n,ys(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(vs(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await nl(e),n=new za(e);return t.register("authEvent",t=>{ms(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cl,{type:cl},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[cl];void 0!==i&&t(!!i),us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ka(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fo()||io()||co()}};var hl="@firebase/auth",fl="1.7.9";class pl{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ms(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ml=ur("authIdTokenMaxAge")||300;let gl=null;function vl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hi();const t=Fi(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Fi(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(wr(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;us(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:dl,persistence:[Ea,oa,la]}),r=ur("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ml)return;const r=null===t||void 0===t?void 0:t.token;gl!==r&&(gl=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Nr(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Nr(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=ar("auth");return s&&To(n,`http://${s}`),n}var yl;bo={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=cs("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},yl="Browser",Ui(new Ir("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ms(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:yl,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:po(yl)},u=new vo(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ys);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ui(new Ir("auth-internal",e=>(e=>new pl(e))(yo(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(hl,fl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(yl)),Ki(hl,fl,"esm2017");var wl,bl,xl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Sl={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);d(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,bl=Sl.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},wl=Sl.Integer=r}).apply("undefined"!==typeof xl?xl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var El,kl,_l,Tl,Nl,Il,Cl,Al,Rl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pl={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Rl&&Rl];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout(()=>{throw e},0)}function k(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let N,I=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){const n=_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);N=()=>{e.then(R)}};var R=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(n){E(n)}var t=_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function j(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&j.aa.h.call(this)}}d(j,O);var L={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):W(e,t,n,!1,r,i)}function W(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):W(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new j(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;x(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ue=[];function ce(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){O.call(this,"d")}function we(){O.call(this,"c")}d(ye,O),d(we,O);var be={},xe=null;function Se(){return xe=xe||new ne}function Ee(e){O.call(this,be.La,e)}function ke(e){const t=Se();re(t,new Ee(t))}function _e(e,t){O.call(this,be.STAT_EVENT,e),this.stat=t}function Te(e){const t=Se();re(t,new _e(t,e))}function Ne(e,t){O.call(this,be.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",d(Ee,O),be.STAT_EVENT="statevent",d(_e,O),be.Ma="timingevent",d(Ne,O),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Re,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function je(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Re=new De;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=dt(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),$e(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&"type"==d[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(u(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function We(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Jt(n)}rn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(u(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),$e(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=u[0]&&"close"!=u[0]||cn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?cn(n,7):Qt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}ke()}catch(c){}}je.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},je.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=h||7==t||ke(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){We(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Te(12),We(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Ue){4==h&&(this.s=4,Te(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Te(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ge(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(d),d.M=!0,Te(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),We(this),Ke(this)}else Ae(this.i,this.l,a,null),Ge(this,a);4==h&&We(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),We(this),Ke(this)}}}catch(Ol){}},je.prototype.cancel=function(){this.J=!0,We(this)},je.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),Te(17)),We(this),this.s=2,Ke(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(St(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),_t(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new xt(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function dt(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function St(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Et(e,t){St(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return St(e),t=Tt(e,t),e.g.has(t)}function _t(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),h(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Nt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function It(){this.g=new fe}function Ct(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(Fy){throw t.push(r+"type="+encodeURIComponent("_badmap")),Fy}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function jt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){St(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){St(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){St(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){St(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return St(this),this.i=null,kt(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(At,pe),At.prototype.g=function(){return new Rt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),d(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Dt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ut=/^https?$/i,Ft=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),$t(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ut.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){qt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Fy){}}}function qt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ll){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Yt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),en(e,n),(t=new je(e,e.j,t)).L=2,t.v=dt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}dn(e)}function Jt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Yt(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;N||A(),I||(N(),I=!0),C.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new je(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function en(e,t){e.H&&y(e.H,function(e,n){ct(t,n,e)}),e.l&&rt({},function(e,n){ct(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Ct(a,e,"req"+n+"_")}catch(Ol){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;N||A(),I||(N(),I=!0),C.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(u(e.Fa,e),un(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new je(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Ne(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(u(e.Ga,e,t),un(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function un(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Ce;if(i.Image){const r=new Image;r.onload=c(Nt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Nt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Nt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Nt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout(()=>{n.abort(),Nt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Nt(0,0,!0,t):Nt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Nt(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),dn(e),Yt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new At({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new je(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ct(n=ot(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(jt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Ye(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Jt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},d(vn,ye),d(yn,we),d(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new vn(e))},wn.prototype.sa=function(e){re(this.g,new yn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Al=Pl.createWebChannelTransport=function(){return new mn},Cl=Pl.getStatEventTarget=function(){return Se()},Il=Pl.Event=be,Nl=Pl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,Tl=Pl.ErrorCode=Pe,Oe.COMPLETE="complete",_l=Pl.EventType=Oe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,kl=Pl.WebChannel=ge,Pl.FetchXmlHttpFactory=At,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,El=Pl.XhrIo=Mt}).apply("undefined"!==typeof Rl?Rl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ol="@firebase/firestore";class Dl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dl.UNAUTHENTICATED=new Dl(null),Dl.GOOGLE_CREDENTIALS=new Dl("google-credentials-uid"),Dl.FIRST_PARTY=new Dl("first-party-uid"),Dl.MOCK_USER=new Dl("mock-user");let jl="10.14.0";const Ll=new Ur("@firebase/firestore");function Ml(){return Ll.logLevel}function Ul(e){if(Ll.logLevel<=Or.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(zl);Ll.debug(`Firestore (${jl}): ${e}`,...i)}}function Fl(e){if(Ll.logLevel<=Or.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(zl);Ll.error(`Firestore (${jl}): ${e}`,...i)}}function Vl(e){if(Ll.logLevel<=Or.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(zl);Ll.warn(`Firestore (${jl}): ${e}`,...i)}}function zl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Bl(){const e=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Fl(e),new Error(e)}function $l(e,t){e||Bl()}function ql(e,t){return e}const Hl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kl extends gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ql{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dl.UNAUTHENTICATED))}shutdown(){}}class Jl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yl{constructor(e){this.t=e,this.currentUser=Dl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$l(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wl,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Ul("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ul("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wl)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ul("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?($l("string"==typeof t.accessToken),new Gl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $l(null===e||"string"==typeof e),new Dl(e)}}class Xl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Dl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Zl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Xl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Dl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tu{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){$l(void 0===this.o);const n=e=>{null!=e.error&&Ul("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Ul("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ul("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ul("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?($l("string"==typeof e.token),this.R=e.token,new eu(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ru{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=nu(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function iu(e,t){return e<t?-1:e>t?1:0}function su(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class ou{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Kl(Hl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Kl(Hl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Kl(Hl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Kl(Hl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ou.fromMillis(Date.now())}static fromDate(e){return ou.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ou(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?iu(this.nanoseconds,e.nanoseconds):iu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class au{constructor(e){this.timestamp=e}static fromTimestamp(e){return new au(e)}static min(){return new au(new ou(0,0))}static max(){return new au(new ou(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lu{constructor(e,t,n){void 0===t?t=0:t>e.length&&Bl(),void 0===n?n=e.length-t:n>e.length-t&&Bl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===lu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lu?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class uu extends lu{construct(e,t,n){return new uu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Kl(Hl.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new uu(e)}static emptyPath(){return new uu([])}}const cu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class du extends lu{construct(e,t,n){return new du(e,t,n)}static isValidIdentifier(e){return cu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),du.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new du(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Kl(Hl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Kl(Hl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Kl(Hl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Kl(Hl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new du(t)}static emptyPath(){return new du([])}}class hu{constructor(e){this.path=e}static fromPath(e){return new hu(uu.fromString(e))}static fromName(e){return new hu(uu.fromString(e).popFirst(5))}static empty(){return new hu(uu.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===uu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return uu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new hu(new uu(e.slice()))}}class fu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fu.UNKNOWN_ID=-1;function pu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=au.fromTimestamp(1e9===r?new ou(n+1,0):new ou(n,r));return new gu(i,hu.empty(),t)}function mu(e){return new gu(e.readTime,e.key,-1)}class gu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gu(au.min(),hu.empty(),-1)}static max(){return new gu(au.max(),hu.empty(),-1)}}function vu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=hu.comparator(e.documentKey,t.documentKey),0!==n?n:iu(e.largestBatchId,t.largestBatchId))}const yu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function bu(e){if(e.code!==Hl.FAILED_PRECONDITION||e.message!==yu)throw e;Ul("LocalStore","Unexpectedly lost primary lease")}class xu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xu((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xu?t:xu.resolve(t)}catch(e){return xu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xu.reject(t)}static resolve(e){return new xu((t,n)=>{t(e)})}static reject(e){return new xu((t,n)=>{n(e)})}static waitFor(e){return new xu((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=xu.resolve(!1);for(const n of e)t=t.next(e=>e?xu.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new xu((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new xu((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Su(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eu(e){return"IndexedDbTransactionError"===e.name}class ku{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function _u(e){return null==e}function Tu(e){return 0===e&&1/e==-1/0}function Nu(e){return"number"==typeof e&&Number.isInteger(e)&&!Tu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}ku.oe=-1;const Iu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Au=Cu,Ru=[...Au,"indexConfiguration","indexState","indexEntries"];function Pu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ou(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Du(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ju{constructor(e,t){this.comparator=e,this.root=t||Mu.EMPTY}insert(e,t){return new ju(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mu.BLACK,null,null))}remove(e){return new ju(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lu(this.root,e,this.comparator,!0)}}class Lu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Mu.RED,this.left=null!=r?r:Mu.EMPTY,this.right=null!=i?i:Mu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Mu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Mu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Mu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bl();if(this.right.isRed())throw Bl();const e=this.left.check();if(e!==this.right.check())throw Bl();return e+(this.isRed()?0:1)}}Mu.EMPTY=null,Mu.RED=!0,Mu.BLACK=!1,Mu.EMPTY=new class{constructor(){this.size=0}get key(){throw Bl()}get value(){throw Bl()}get color(){throw Bl()}get left(){throw Bl()}get right(){throw Bl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Mu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Uu{constructor(e){this.comparator=e,this.data=new ju(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fu(this.data.getIterator())}getIteratorFrom(e){return new Fu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Uu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Uu(this.comparator);return t.data=e,t}}class Fu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Vu{constructor(e){this.fields=e,e.sort(du.comparator)}static empty(){return new Vu([])}unionWith(e){let t=new Uu(du.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Vu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return su(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class zu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new zu("Invalid base64 string: "+e):e}}(e);return new Bu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Bu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return iu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bu.EMPTY_BYTE_STRING=new Bu("");const $u=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qu(e){if($l(!!e),"string"==typeof e){let t=0;const n=$u.exec(e);if($l(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Hu(e.seconds),nanos:Hu(e.nanos)}}function Hu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ku(e){return"string"==typeof e?Bu.fromBase64String(e):Bu.fromUint8Array(e)}function Wu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gu(e){const t=e.mapValue.fields.__previous_value__;return Wu(t)?Gu(t):t}function Qu(e){const t=qu(e.mapValue.fields.__local_write_time__.timestampValue);return new ou(t.seconds,t.nanos)}class Ju{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yu&&e.projectId===this.projectId&&e.database===this.database}}const Xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wu(e)?4:pc(e)?9007199254740991:hc(e)?10:11:Bl()}function ec(e,t){if(e===t)return!0;const n=Zu(e);if(n!==Zu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qu(e).isEqual(Qu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=qu(e.timestampValue),r=qu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ku(e.bytesValue).isEqual(Ku(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Hu(e.geoPointValue.latitude)===Hu(t.geoPointValue.latitude)&&Hu(e.geoPointValue.longitude)===Hu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Hu(e.integerValue)===Hu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Hu(e.doubleValue),r=Hu(t.doubleValue);return n===r?Tu(n)===Tu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return su(e.arrayValue.values||[],t.arrayValue.values||[],ec);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Pu(n)!==Pu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ec(n[i],r[i])))return!1;return!0}(e,t);default:return Bl()}}function tc(e,t){return void 0!==(e.values||[]).find(e=>ec(e,t))}function nc(e,t){if(e===t)return 0;const n=Zu(e),r=Zu(t);if(n!==r)return iu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return iu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Hu(e.integerValue||e.doubleValue),r=Hu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return rc(e.timestampValue,t.timestampValue);case 4:return rc(Qu(e),Qu(t));case 5:return iu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ku(e),r=Ku(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=iu(n[i],r[i]);if(0!==e)return e}return iu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=iu(Hu(e.latitude),Hu(t.latitude));return 0!==n?n:iu(Hu(e.longitude),Hu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ic(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,u=null===(r=a.value)||void 0===r?void 0:r.arrayValue,c=iu((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:ic(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Xu.mapValue&&t===Xu.mapValue)return 0;if(e===Xu.mapValue)return 1;if(t===Xu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=iu(r[o],s[o]);if(0!==e)return e;const t=nc(n[r[o]],i[s[o]]);if(0!==t)return t}return iu(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Bl()}}function rc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return iu(e,t);const n=qu(e),r=qu(t),i=iu(n.seconds,r.seconds);return 0!==i?i:iu(n.nanos,r.nanos)}function ic(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=nc(n[i],r[i]);if(e)return e}return iu(n.length,r.length)}function sc(e){return oc(e)}function oc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=qu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ku(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return hu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=oc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${oc(e.fields[i])}`;return n+"}"}(e.mapValue):Bl()}function ac(e){return!!e&&"integerValue"in e}function lc(e){return!!e&&"arrayValue"in e}function uc(e){return!!e&&"nullValue"in e}function cc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dc(e){return!!e&&"mapValue"in e}function hc(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ou(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=fc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=fc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function pc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class mc{constructor(e){this.value=e}static empty(){return new mc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!dc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(t)}setAll(e){let t=du.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=fc(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());dc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ec(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ou(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new mc(fc(this.value))}}function gc(e){const t=[];return Ou(e.fields,(e,n)=>{const r=new du([e]);if(dc(n)){const e=gc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Vu(t)}class vc{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new vc(e,0,au.min(),au.min(),au.min(),mc.empty(),0)}static newFoundDocument(e,t,n,r){return new vc(e,1,t,au.min(),n,r,0)}static newNoDocument(e,t){return new vc(e,2,t,au.min(),au.min(),mc.empty(),0)}static newUnknownDocument(e,t){return new vc(e,3,t,au.min(),au.min(),mc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(au.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=au.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yc{constructor(e,t){this.position=e,this.inclusive=t}}function wc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?hu.comparator(hu.fromName(o.referenceValue),n.key):nc(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function bc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ec(e.position[n],t.position[n]))return!1;return!0}class xc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Sc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ec{}class kc extends Ec{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Pc(e,t,n):"array-contains"===t?new Lc(e,n):"in"===t?new Mc(e,n):"not-in"===t?new Uc(e,n):"array-contains-any"===t?new Fc(e,n):new kc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Oc(e,n):new Dc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nc(t,this.value)):null!==t&&Zu(this.value)===Zu(t)&&this.matchesComparison(nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _c extends Ec{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new _c(e,t)}matches(e){return Tc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Tc(e){return"and"===e.op}function Nc(e){return Ic(e)&&Tc(e)}function Ic(e){for(const t of e.filters)if(t instanceof _c)return!1;return!0}function Cc(e){if(e instanceof kc)return e.field.canonicalString()+e.op.toString()+sc(e.value);if(Nc(e))return e.filters.map(e=>Cc(e)).join(",");{const t=e.filters.map(e=>Cc(e)).join(",");return`${e.op}(${t})`}}function Ac(e,t){return e instanceof kc?function(e,t){return t instanceof kc&&e.op===t.op&&e.field.isEqual(t.field)&&ec(e.value,t.value)}(e,t):e instanceof _c?function(e,t){return t instanceof _c&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ac(n,t.filters[r]),!0)}(e,t):void Bl()}function Rc(e){return e instanceof kc?function(e){return`${e.field.canonicalString()} ${e.op} ${sc(e.value)}`}(e):e instanceof _c?function(e){return e.op.toString()+" {"+e.getFilters().map(Rc).join(" ,")+"}"}(e):"Filter"}class Pc extends kc{constructor(e,t,n){super(e,t,n),this.key=hu.fromName(n.referenceValue)}matches(e){const t=hu.comparator(e.key,this.key);return this.matchesComparison(t)}}class Oc extends kc{constructor(e,t){super(e,"in",t),this.keys=jc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Dc extends kc{constructor(e,t){super(e,"not-in",t),this.keys=jc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>hu.fromName(e.referenceValue))}class Lc extends kc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lc(t)&&tc(t.arrayValue,this.value)}}class Mc extends kc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tc(this.value.arrayValue,t)}}class Uc extends kc{constructor(e,t){super(e,"not-in",t)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tc(this.value.arrayValue,t)}}class Fc extends kc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>tc(this.value.arrayValue,e))}}class Vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function zc(e){return new Vc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Bc(e){const t=ql(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Cc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),_u(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>sc(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>sc(e)).join(",")),t.ue=e}return t.ue}function $c(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Sc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ac(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bc(e.startAt,t.startAt)&&bc(e.endAt,t.endAt)}function qc(e){return hu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Hc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Kc(e,t,n,r,i,s,o,a){return new Hc(e,t,n,r,i,s,o,a)}function Wc(e){return new Hc(e)}function Gc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Qc(e){return null!==e.collectionGroup}function Jc(e){const t=ql(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Uu(du.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new xc(r,n))}),e.has(du.keyField().canonicalString())||t.ce.push(new xc(du.keyField(),n))}return t.ce}function Yc(e){const t=ql(e);return t.le||(t.le=Xc(t,Jc(e))),t.le}function Xc(e,t){if("F"===e.limitType)return zc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new xc(e.field,t)});const n=e.endAt?new yc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new yc(e.startAt.position,e.startAt.inclusive):null;return zc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Zc(e,t,n){return new Hc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ed(e,t){return $c(Yc(e),Yc(t))&&e.limitType===t.limitType}function td(e){return`${Bc(Yc(e))}|lt:${e.limitType}`}function nd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Rc(e)).join(", ")}]`),_u(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>sc(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>sc(e)).join(",")),`Target(${t})`}(Yc(e))}; limitType=${e.limitType})`}function rd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):hu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Jc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=wc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Jc(e),t))&&!(e.endAt&&!function(e,t,n){const r=wc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Jc(e),t))}(e,t)}function id(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function sd(e){return(t,n)=>{let r=!1;for(const i of Jc(e)){const e=od(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function od(e,t,n){const r=e.field.isKeyField()?hu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?nc(r,i):Bl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Bl()}}class ad{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ou(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Du(this.inner)}size(){return this.innerSize}}const ld=new ju(hu.comparator);function ud(){return ld}const cd=new ju(hu.comparator);function dd(){let e=cd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function hd(e){let t=cd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function fd(){return md()}function pd(){return md()}function md(){return new ad(e=>e.toString(),(e,t)=>e.isEqual(t))}const gd=new ju(hu.comparator),vd=new Uu(hu.comparator);function yd(){let e=vd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const wd=new Uu(iu);function bd(){return wd}function xd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(t)?"-0":t}}function Sd(e){return{integerValue:""+e}}function Ed(e,t){return Nu(t)?Sd(t):xd(e,t)}class kd{constructor(){this._=void 0}}function _d(e,t,n){return e instanceof Id?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Wu(t)&&(t=Gu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cd?Ad(e,t):e instanceof Rd?Pd(e,t):function(e,t){const n=Nd(e,t),r=Dd(n)+Dd(e.Pe);return ac(n)&&ac(e.Pe)?Sd(r):xd(e.serializer,r)}(e,t)}function Td(e,t,n){return e instanceof Cd?Ad(e,t):e instanceof Rd?Pd(e,t):n}function Nd(e,t){return e instanceof Od?function(e){return ac(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Id extends kd{}class Cd extends kd{constructor(e){super(),this.elements=e}}function Ad(e,t){const n=jd(t);for(const r of e.elements)n.some(e=>ec(e,r))||n.push(r);return{arrayValue:{values:n}}}class Rd extends kd{constructor(e){super(),this.elements=e}}function Pd(e,t){let n=jd(t);for(const r of e.elements)n=n.filter(e=>!ec(e,r));return{arrayValue:{values:n}}}class Od extends kd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Dd(e){return Hu(e.integerValue||e.doubleValue)}function jd(e){return lc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ld{constructor(e,t){this.field=e,this.transform=t}}class Md{constructor(e,t){this.version=e,this.transformResults=t}}class Ud{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ud}static exists(e){return new Ud(void 0,e)}static updateTime(e){return new Ud(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vd{}function zd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yd(e.key,Ud.none()):new Kd(e.key,e.data,Ud.none());{const n=e.data,r=mc.empty();let i=new Uu(du.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Wd(e.key,r,new Vu(i.toArray()),Ud.none())}}function Bd(e,t,n){e instanceof Kd?function(e,t,n){const r=e.value.clone(),i=Qd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wd?function(e,t,n){if(!Fd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Qd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function $d(e,t,n,r){return e instanceof Kd?function(e,t,n,r){if(!Fd(e.precondition,t))return n;const i=e.value.clone(),s=Jd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wd?function(e,t,n,r){if(!Fd(e.precondition,t))return n;const i=Jd(e.fieldTransforms,r,t),s=t.data;return s.setAll(Gd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Fd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Nd(r.transform,e||null);null!=i&&(null===n&&(n=mc.empty()),n.set(r.field,i))}return n||null}function Hd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&su(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cd&&t instanceof Cd||e instanceof Rd&&t instanceof Rd?su(e.elements,t.elements,ec):e instanceof Od&&t instanceof Od?ec(e.Pe,t.Pe):e instanceof Id&&t instanceof Id}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Kd extends Vd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wd extends Vd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Gd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Qd(e,t,n){const r=new Map;$l(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Td(o,a,n[i]))}return r}function Jd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,_d(e,s,t))}return r}class Yd extends Vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xd extends Vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Bd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=$d(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=$d(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=pd();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=zd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(au.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yd())}isEqual(e){return this.batchId===e.batchId&&su(this.mutations,e.mutations,(e,t)=>Hd(e,t))&&su(this.baseMutations,e.baseMutations,(e,t)=>Hd(e,t))}}class eh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){$l(e.mutations.length===n.length);let r=gd;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new eh(e,t,n,r)}}class th{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nh{constructor(e,t){this.count=e,this.unchangedNames=t}}var rh,ih;function sh(e){switch(e){default:return Bl();case Hl.CANCELLED:case Hl.UNKNOWN:case Hl.DEADLINE_EXCEEDED:case Hl.RESOURCE_EXHAUSTED:case Hl.INTERNAL:case Hl.UNAVAILABLE:case Hl.UNAUTHENTICATED:return!1;case Hl.INVALID_ARGUMENT:case Hl.NOT_FOUND:case Hl.ALREADY_EXISTS:case Hl.PERMISSION_DENIED:case Hl.FAILED_PRECONDITION:case Hl.ABORTED:case Hl.OUT_OF_RANGE:case Hl.UNIMPLEMENTED:case Hl.DATA_LOSS:return!0}}function oh(e){if(void 0===e)return Fl("GRPC error has no .code"),Hl.UNKNOWN;switch(e){case rh.OK:return Hl.OK;case rh.CANCELLED:return Hl.CANCELLED;case rh.UNKNOWN:return Hl.UNKNOWN;case rh.DEADLINE_EXCEEDED:return Hl.DEADLINE_EXCEEDED;case rh.RESOURCE_EXHAUSTED:return Hl.RESOURCE_EXHAUSTED;case rh.INTERNAL:return Hl.INTERNAL;case rh.UNAVAILABLE:return Hl.UNAVAILABLE;case rh.UNAUTHENTICATED:return Hl.UNAUTHENTICATED;case rh.INVALID_ARGUMENT:return Hl.INVALID_ARGUMENT;case rh.NOT_FOUND:return Hl.NOT_FOUND;case rh.ALREADY_EXISTS:return Hl.ALREADY_EXISTS;case rh.PERMISSION_DENIED:return Hl.PERMISSION_DENIED;case rh.FAILED_PRECONDITION:return Hl.FAILED_PRECONDITION;case rh.ABORTED:return Hl.ABORTED;case rh.OUT_OF_RANGE:return Hl.OUT_OF_RANGE;case rh.UNIMPLEMENTED:return Hl.UNIMPLEMENTED;case rh.DATA_LOSS:return Hl.DATA_LOSS;default:return Bl()}}(ih=rh||(rh={}))[ih.OK=0]="OK",ih[ih.CANCELLED=1]="CANCELLED",ih[ih.UNKNOWN=2]="UNKNOWN",ih[ih.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ih[ih.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ih[ih.NOT_FOUND=5]="NOT_FOUND",ih[ih.ALREADY_EXISTS=6]="ALREADY_EXISTS",ih[ih.PERMISSION_DENIED=7]="PERMISSION_DENIED",ih[ih.UNAUTHENTICATED=16]="UNAUTHENTICATED",ih[ih.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ih[ih.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ih[ih.ABORTED=10]="ABORTED",ih[ih.OUT_OF_RANGE=11]="OUT_OF_RANGE",ih[ih.UNIMPLEMENTED=12]="UNIMPLEMENTED",ih[ih.INTERNAL=13]="INTERNAL",ih[ih.UNAVAILABLE=14]="UNAVAILABLE",ih[ih.DATA_LOSS=15]="DATA_LOSS";let ah=null;function lh(){return new TextEncoder}const uh=new wl([4294967295,4294967295],0);function ch(e){const t=lh().encode(e),n=new bl;return n.update(t),new Uint8Array(n.digest())}function dh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new wl([n,r],0),new wl([i,s],0)]}class hh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new fh(`Invalid padding: ${t}`);if(n<0)throw new fh(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new fh(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new fh(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=wl.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(wl.fromNumber(n)));return 1===r.compare(uh)&&(r=new wl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=ch(e),[n,r]=dh(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new hh(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=ch(e),[n,r]=dh(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class fh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ph{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ph(au.min(),r,new ju(iu),ud(),yd())}}class mh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new mh(n,t,yd(),yd(),yd())}}class gh{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class vh{constructor(e,t){this.targetId=e,this.me=t}}class yh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class wh{constructor(){this.fe=0,this.ge=Sh(),this.pe=Bu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=yd(),t=yd(),n=yd();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Bl()}}),new mh(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Sh()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$l(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class bh{constructor(e){this.Le=e,this.Be=new Map,this.ke=ud(),this.qe=xh(),this.Qe=new ju(iu)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Bl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(qc(i))if(0===n){const e=new hu(i.path);this.Ue(t,e,vc.newNoDocument(e,au.min()))}else $l(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==ah||ah.et(function(e,t,n,r,i){var s,o,a,l,u,c;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==h?void 0:h.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Ku(n).toUint8Array()}catch(e){if(e instanceof zu)return Vl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new hh(s,r,i)}catch(e){return Vl(e instanceof fh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&qc(i.target)){const t=new hu(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,vc.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=yd();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new ph(e,t,this.Qe,this.ke,n);return this.ke=ud(),this.qe=xh(),this.Qe=new ju(iu),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new wh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Uu(iu),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ul("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function xh(){return new ju(hu.comparator)}function Sh(){return new ju(hu.comparator)}const Eh={asc:"ASCENDING",desc:"DESCENDING"},kh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_h={and:"AND",or:"OR"};class Th{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Nh(e,t){return e.useProto3Json||_u(t)?t:{value:t}}function Ih(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ch(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ah(e,t){return Ih(e,t.toTimestamp())}function Rh(e){return $l(!!e),au.fromTimestamp(function(e){const t=qu(e);return new ou(t.seconds,t.nanos)}(e))}function Ph(e,t){return Oh(e,t).canonicalString()}function Oh(e,t){const n=function(e){return new uu(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Dh(e){const t=uu.fromString(e);return $l(ef(t)),t}function jh(e,t){return Ph(e.databaseId,t.path)}function Lh(e,t){const n=Dh(t);if(n.get(1)!==e.databaseId.projectId)throw new Kl(Hl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Kl(Hl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new hu(Vh(n))}function Mh(e,t){return Ph(e.databaseId,t)}function Uh(e){const t=Dh(e);return 4===t.length?uu.emptyPath():Vh(t)}function Fh(e){return new uu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vh(e){return $l(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function zh(e,t,n){return{name:jh(e,t),fields:n.value.mapValue.fields}}function Bh(e,t){let n;if(t instanceof Kd)n={update:zh(e,t.key,t.value)};else if(t instanceof Yd)n={delete:jh(e,t.key)};else if(t instanceof Wd)n={update:zh(e,t.key,t.data),updateMask:Zh(t.fieldMask)};else{if(!(t instanceof Xd))return Bl();n={verify:jh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Id)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Od)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Bl()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ah(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Bl()}(e,t.precondition)),n}function $h(e,t){return{documents:[Mh(e,t.path)]}}function qh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Mh(e,i);const s=function(e){if(0!==e.length)return Xh(_c.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Jh(e.field),direction:Wh(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Nh(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Hh(e){let t=Uh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$l(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Kh(e);return t instanceof _c&&Nc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new xc(Yh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,_u(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new yc(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new yc(n,t)}(n.endAt)),Kc(t,i,o,s,a,"F",l,u)}function Kh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yh(e.unaryFilter.field);return kc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yh(e.unaryFilter.field);return kc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yh(e.unaryFilter.field);return kc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yh(e.unaryFilter.field);return kc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Bl()}}(e):void 0!==e.fieldFilter?function(e){return kc.create(Yh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _c.create(e.compositeFilter.filters.map(e=>Kh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Bl()}}(e.compositeFilter.op))}(e):Bl()}function Wh(e){return Eh[e]}function Gh(e){return kh[e]}function Qh(e){return _h[e]}function Jh(e){return{fieldPath:e.canonicalString()}}function Yh(e){return du.fromServerFormat(e.fieldPath)}function Xh(e){return e instanceof kc?function(e){if("=="===e.op){if(cc(e.value))return{unaryFilter:{field:Jh(e.field),op:"IS_NAN"}};if(uc(e.value))return{unaryFilter:{field:Jh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(cc(e.value))return{unaryFilter:{field:Jh(e.field),op:"IS_NOT_NAN"}};if(uc(e.value))return{unaryFilter:{field:Jh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jh(e.field),op:Gh(e.op),value:e.value}}}(e):e instanceof _c?function(e){const t=e.getFilters().map(e=>Xh(e));return 1===t.length?t[0]:{compositeFilter:{op:Qh(e.op),filters:t}}}(e):Bl()}function Zh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function ef(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class tf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:au.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:au.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new tf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nf{constructor(e){this.ct=e}}function rf(e){const t=Hh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Zc(t,t.limit,"L"):t}class sf{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Hu(e.integerValue));else if("doubleValue"in e){const n=Hu(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Tu(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=qu(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ku(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?pc(e)?this.dt(t,Number.MAX_SAFE_INTEGER):hc(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Bl()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Hu(o)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),hu.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}sf.vt=new sf;class of{constructor(){this.un=new af}addToCollectionParentIndex(e,t){return this.un.add(t),xu.resolve()}getCollectionParents(e,t){return xu.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return xu.resolve()}deleteFieldIndex(e,t){return xu.resolve()}deleteAllFieldIndexes(e){return xu.resolve()}createTargetIndexes(e,t){return xu.resolve()}getDocumentsMatchingTarget(e,t){return xu.resolve(null)}getIndexType(e,t){return xu.resolve(0)}getFieldIndexes(e,t){return xu.resolve([])}getNextCollectionGroupToUpdate(e){return xu.resolve(null)}getMinOffset(e,t){return xu.resolve(gu.min())}getMinOffsetFromCollectionGroup(e,t){return xu.resolve(gu.min())}updateCollectionGroup(e,t,n){return xu.resolve()}updateIndexEntries(e,t){return xu.resolve()}}class af{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Uu(uu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Uu(uu.comparator)).toArray()}}new Uint8Array(0);class lf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new lf(e,lf.DEFAULT_COLLECTION_PERCENTILE,lf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}lf.DEFAULT_COLLECTION_PERCENTILE=10,lf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lf.DEFAULT=new lf(41943040,lf.DEFAULT_COLLECTION_PERCENTILE,lf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lf.DISABLED=new lf(-1,0,0);class uf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new uf(0)}static kn(){return new uf(-1)}}class cf{constructor(){this.changes=new ad(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class df{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&$d(n.mutation,e,Vu.empty(),ou.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,yd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yd();const r=fd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=dd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=fd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,yd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=ud();const s=md(),o=md();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Wd)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),$d(o.mutation,t,o.mutation.getFieldMask(),ou.now())):s.set(t.key,Vu.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new df(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=md();let r=new ju((e,t)=>e-t),i=yd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Vu.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||yd()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=pd();l.forEach(e=>{if(!i.has(e)){const r=zd(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return xu.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return hu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):xu.resolve(fd());let o=-1,a=i;return s.next(t=>xu.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?xu.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,yd())).next(e=>({batchId:o,changes:hd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new hu(t)).next(e=>{let t=dd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=dd();return this.indexManager.getCollectionParents(e,i).next(o=>xu.forEach(o,o=>{const a=function(e,t){return new Hc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,vc.newInvalidDocument(r)))});let n=dd();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&$d(s.mutation,r,Vu.empty(),ou.now()),rd(t,r)&&(n=n.insert(e,r))}),n})}}class ff{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return xu.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Rh(e.createTime)}}(t)),xu.resolve()}getNamedQuery(e,t){return xu.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:rf(e.bundledQuery),readTime:Rh(e.readTime)}}(t)),xu.resolve()}}class pf{constructor(){this.overlays=new ju(hu.comparator),this.Ir=new Map}getOverlay(e,t){return xu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=fd();return xu.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),xu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),xu.resolve()}getOverlaysForCollection(e,t,n){const r=fd(),i=t.length+1,s=new hu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return xu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ju((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=fd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=fd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return xu.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new th(t,n));let i=this.Ir.get(t);void 0===i&&(i=yd(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class mf{constructor(){this.sessionToken=Bu.EMPTY_BYTE_STRING}getSessionToken(e){return xu.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xu.resolve()}}class gf{constructor(){this.Tr=new Uu(vf.Er),this.dr=new Uu(vf.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new vf(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new vf(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new hu(new uu([])),n=new vf(t,e),r=new vf(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new hu(new uu([])),n=new vf(t,e),r=new vf(t,e+1);let i=yd();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new vf(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class vf{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return hu.comparator(e.key,t.key)||iu(e.wr,t.wr)}static Ar(e,t){return iu(e.wr,t.wr)||hu.comparator(e.key,t.key)}}class yf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Uu(vf.Er)}checkEmpty(e){return xu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Zd(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new vf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return xu.resolve(s)}lookupMutationBatch(e,t){return xu.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return xu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xu.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return xu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new vf(t,0),r=new vf(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),xu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Uu(iu);return t.forEach(e=>{const t=new vf(e,0),r=new vf(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),xu.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;hu.isDocumentKey(i)||(i=i.child(""));const s=new vf(new hu(i),0);let o=new Uu(iu);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)},s),xu.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){$l(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return xu.forEach(t.mutations,r=>{const i=new vf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new vf(t,0),r=this.br.firstAfterOrEqual(n);return xu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xu.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wf{constructor(e){this.Mr=e,this.docs=new ju(hu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xu.resolve(n?n.document.mutableCopy():vc.newInvalidDocument(t))}getEntries(e,t){let n=ud();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():vc.newInvalidDocument(e))}),xu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ud();const s=t.path,o=new hu(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||vu(mu(o),n)<=0||(r.has(o.key)||rd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return xu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Bl()}Or(e,t){return xu.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new bf(this)}getSize(e){return xu.resolve(this.size)}}class bf extends cf{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),xu.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class xf{constructor(e){this.persistence=e,this.Nr=new ad(e=>Bc(e),$c),this.lastRemoteSnapshotVersion=au.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gf,this.targetCount=0,this.kr=uf.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),xu.resolve()}getLastRemoteSnapshotVersion(e){return xu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xu.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),xu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),xu.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new uf(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,xu.resolve()}updateTargetData(e,t){return this.Kn(t),xu.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,xu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),xu.waitFor(i).next(()=>r)}getTargetCount(e){return xu.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return xu.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),xu.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),xu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),xu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return xu.resolve(n)}containsKey(e,t){return xu.resolve(this.Br.containsKey(t))}}class Sf{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ku(0),this.Kr=!1,this.Kr=!0,this.$r=new mf,this.referenceDelegate=e(this),this.Ur=new xf(this),this.indexManager=new of,this.remoteDocumentCache=function(e){return new wf(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new nf(t),this.Gr=new ff(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new yf(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Ul("MemoryPersistence","Starting transaction:",e);const r=new Ef(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return xu.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Ef extends wu{constructor(e){super(),this.currentSequenceNumber=e}}class kf{constructor(e){this.persistence=e,this.Jr=new gf,this.Yr=null}static Zr(e){return new kf(e)}get Xr(){if(this.Yr)return this.Yr;throw Bl()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),xu.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),xu.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),xu.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xu.forEach(this.Xr,n=>{const r=hu.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,au.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return xu.or([()=>xu.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class _f{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=yd(),r=yd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new _f(e,t.fromCache,n,r)}}class Tf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Nf{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=fr()?8:Su(dr())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Tf;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Ml()<=Or.DEBUG&&Ul("QueryEngine","SDK will not create cache indexes for query:",nd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),xu.resolve()):(Ml()<=Or.DEBUG&&Ul("QueryEngine","Query:",nd(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Ml()<=Or.DEBUG&&Ul("QueryEngine","The SDK decides to create cache indexes for query:",nd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yc(t))):xu.resolve())}Yi(e,t){if(Gc(t))return xu.resolve(null);let n=Yc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Zc(t,null,"F"),n=Yc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=yd(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,Zc(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return Gc(t)||r.isEqual(au.min())?xu.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?xu.resolve(null):(Ml()<=Or.DEBUG&&Ul("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nd(t)),this.rs(e,s,t,pu(r,-1)).next(e=>e))})}ts(e,t){let n=new Uu(sd(e));return t.forEach((t,r)=>{rd(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return Ml()<=Or.DEBUG&&Ul("QueryEngine","Using full collection scan to execute query:",nd(t)),this.Ji.getDocumentsMatchingQuery(e,t,gu.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class If{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new ju(iu),this._s=new ad(e=>Bc(e),$c),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Cf(e,t,n,r){return new If(e,t,n,r)}async function Af(e,t){const n=ql(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=yd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function Rf(e){const t=ql(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Pf(e,t,n){let r=yd(),i=yd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ud();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(au.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ul("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ps:r,Is:i}})}function Of(e,t){const n=ql(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Df(e,t){const n=ql(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,xu.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new tf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function jf(e,t,n){const r=ql(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Eu(e))throw e;Ul("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Lf(e,t,n){const r=ql(e);let i=au.min(),s=yd();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=ql(e),i=r._s.get(n);return void 0!==i?xu.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Yc(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:au.min(),n?s:yd())).next(e=>(Mf(r,id(t),e),{documents:e,Ts:s})))}function Mf(e,t,n){let r=e.us.get(t)||au.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Uf{constructor(){this.activeTargetIds=bd()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ff{constructor(){this.so=new Uf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Uf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vf{_o(e){}shutdown(){}}class zf{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ul("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ul("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Bf=null;function $f(){return null===Bf?Bf=268435456+Math.round(2147483648*Math.random()):Bf++,"0x"+Bf.toString(16)}const qf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hf{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Kf="WebChannelConnection";class Wf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=$f(),o=this.xo(e,t.toUriEncodedString());Ul("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,o,a,n).then(t=>(Ul("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw Vl("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+jl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=qf[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=$f();return new Promise((s,o)=>{const a=new El;a.setWithCredentials(!0),a.listenOnce(_l.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Tl.NO_ERROR:const t=a.getResponseJson();Ul(Kf,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Tl.TIMEOUT:Ul(Kf,`RPC '${e}' ${i} timed out`),o(new Kl(Hl.DEADLINE_EXCEEDED,"Request time out"));break;case Tl.HTTP_ERROR:const n=a.getStatus();if(Ul(Kf,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Hl).indexOf(t)>=0?t:Hl.UNKNOWN}(t.status);o(new Kl(e,t.message))}else o(new Kl(Hl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Kl(Hl.UNAVAILABLE,"Connection failed."));break;default:Bl()}}finally{Ul(Kf,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);Ul(Kf,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=$f(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Al(),o=Cl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Ul(Kf,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let d=!1,h=!1;const f=new Hf({Io:t=>{h?Ul(Kf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Ul(Kf,`Opening RPC '${e}' stream ${r} transport.`),c.open(),d=!0),Ul(Kf,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},To:()=>c.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,kl.EventType.OPEN,()=>{h||(Ul(Kf,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(c,kl.EventType.CLOSE,()=>{h||(h=!0,Ul(Kf,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(c,kl.EventType.ERROR,t=>{h||(h=!0,Vl(Kf,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Kl(Hl.UNAVAILABLE,"The operation could not be completed")))}),p(c,kl.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];$l(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ul(Kf,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=rh[e];if(void 0!==t)return oh(t)}(t),i=o.message;void 0===n&&(n=Hl.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.So(new Kl(n,i)),c.close()}else Ul(Kf,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}}),p(o,Il.STAT_EVENT,t=>{t.stat===Nl.PROXY?Ul(Kf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Nl.NOPROXY&&Ul(Kf,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function Gf(){return"undefined"!=typeof document?document:null}function Qf(e){return new Th(e,!0)}class Jf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Ul("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Yf{constructor(e,t,n,r,i,s,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Jf(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Hl.RESOURCE_EXHAUSTED?(Fl(t.toString()),Fl("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Hl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Kl(Hl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ul("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ul("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xf extends Yf{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Bl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?($l(void 0===t||"string"==typeof t),Bu.fromBase64String(t||"")):($l(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Bu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Hl.UNKNOWN:oh(e.code);return new Kl(t,e.message||"")}(o);n=new yh(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lh(e,r.document.name),s=Rh(r.document.updateTime),o=r.document.createTime?Rh(r.document.createTime):au.min(),a=new mc({mapValue:{fields:r.document.fields}}),l=vc.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new gh(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Lh(e,r.document),s=r.readTime?Rh(r.readTime):au.min(),o=vc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Lh(e,r.document),s=r.removedTargetIds||[];n=new gh([],s,i,null)}else{if(!("filter"in t))return Bl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new nh(r,i),o=e.targetId;n=new vh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return au.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?au.min():t.readTime?Rh(t.readTime):au.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Fh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=qc(r)?{documents:$h(e,r)}:{query:qh(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ch(e,t.resumeToken);const r=Nh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(au.min())>0){n.readTime=Ih(e,t.snapshotVersion.toTimestamp());const r=Nh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Fh(this.serializer),t.removeTarget=e,this.a_(t)}}class Zf extends Yf{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return $l(!!e.streamToken),this.lastStreamToken=e.streamToken,$l(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){$l(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?($l(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Rh(e.updateTime):Rh(t);return n.isEqual(au.min())&&(n=Rh(t)),new Md(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Rh(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Fh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Bh(this.serializer,e))};this.a_(t)}}class ep extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Kl(Hl.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Mo(e,Oh(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Hl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kl(Hl.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Lo(e,Oh(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Hl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kl(Hl.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class tp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fl(t),this.D_=!1):Ul("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class np{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{dp(this)&&(Ul("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ql(e);t.L_.add(4),await ip(t),t.q_.set("Unknown"),t.L_.delete(4),await rp(t)}(this))})}),this.q_=new tp(n,r)}}async function rp(e){if(dp(e))for(const t of e.B_)await t(!0)}async function ip(e){for(const t of e.B_)await t(!1)}function sp(e,t){const n=ql(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),cp(n)?up(n):Ap(n).r_()&&ap(n,t))}function op(e,t){const n=ql(e),r=Ap(n);n.N_.delete(t),r.r_()&&lp(n,t),0===n.N_.size&&(r.r_()?r.o_():dp(n)&&n.q_.set("Unknown"))}function ap(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(au.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ap(e).A_(t)}function lp(e,t){e.Q_.xe(t),Ap(e).R_(t)}function up(e){e.Q_=new bh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Ap(e).start(),e.q_.v_()}function cp(e){return dp(e)&&!Ap(e).n_()&&e.N_.size>0}function dp(e){return 0===ql(e).L_.size}function hp(e){e.Q_=void 0}async function fp(e){e.q_.set("Online")}async function pp(e){e.N_.forEach((t,n)=>{ap(e,t)})}async function mp(e,t){hp(e),cp(e)?(e.q_.M_(t),up(e)):e.q_.set("Unknown")}async function gp(e,t,n){if(e.q_.set("Online"),t instanceof yh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Ul("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await vp(e,n)}else if(t instanceof gh?e.Q_.Ke(t):t instanceof vh?e.Q_.He(t):e.Q_.We(t),!n.isEqual(au.min()))try{const t=await Rf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Bu.EMPTY_BYTE_STRING,r.snapshotVersion)),lp(e,t);const i=new tf(r.target,t,n,r.sequenceNumber);ap(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ul("RemoteStore","Failed to raise snapshot:",t),await vp(e,t)}}async function vp(e,t,n){if(!Eu(t))throw t;e.L_.add(1),await ip(e),e.q_.set("Offline"),n||(n=()=>Rf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ul("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await rp(e)})}function yp(e,t){return t().catch(n=>vp(e,n,t))}async function wp(e){const t=ql(e),n=Rp(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;bp(t);)try{const e=await Of(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,xp(t,e)}catch(e){await vp(t,e)}Sp(t)&&Ep(t)}function bp(e){return dp(e)&&e.O_.length<10}function xp(e,t){e.O_.push(t);const n=Rp(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Sp(e){return dp(e)&&!Rp(e).n_()&&e.O_.length>0}function Ep(e){Rp(e).start()}async function kp(e){Rp(e).p_()}async function _p(e){const t=Rp(e);for(const n of e.O_)t.m_(n.mutations)}async function Tp(e,t,n){const r=e.O_.shift(),i=eh.from(r,t,n);await yp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await wp(e)}async function Np(e,t){t&&Rp(e).V_&&await async function(e,t){if(function(e){return sh(e)&&e!==Hl.ABORTED}(t.code)){const n=e.O_.shift();Rp(e).s_(),await yp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await wp(e)}}(e,t),Sp(e)&&Ep(e)}async function Ip(e,t){const n=ql(e);n.asyncQueue.verifyOperationInProgress(),Ul("RemoteStore","RemoteStore received new credentials");const r=dp(n);n.L_.add(3),await ip(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await rp(n)}async function Cp(e,t){const n=ql(e);t?(n.L_.delete(2),await rp(n)):t||(n.L_.add(2),await ip(n),n.q_.set("Unknown"))}function Ap(e){return e.K_||(e.K_=function(e,t,n){const r=ql(e);return r.w_(),new Xf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:fp.bind(null,e),Ro:pp.bind(null,e),mo:mp.bind(null,e),d_:gp.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),cp(e)?up(e):e.q_.set("Unknown")):(await e.K_.stop(),hp(e))})),e.K_}function Rp(e){return e.U_||(e.U_=function(e,t,n){const r=ql(e);return r.w_(),new Zf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:kp.bind(null,e),mo:Np.bind(null,e),f_:_p.bind(null,e),g_:Tp.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await wp(e)):(await e.U_.stop(),e.O_.length>0&&(Ul("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class Pp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Pp(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Kl(Hl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Op(e,t){if(Fl("AsyncQueue",`${t}: ${e}`),Eu(e))return new Kl(Hl.UNAVAILABLE,`${t}: ${e}`);throw e}class Dp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||hu.comparator(t.key,n.key):(e,t)=>hu.comparator(e.key,t.key),this.keyedMap=dd(),this.sortedSet=new ju(this.comparator)}static emptySet(e){return new Dp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Dp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class jp{constructor(){this.W_=new ju(hu.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Bl():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Lp{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Lp(e,t,Dp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Mp{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Up{constructor(){this.queries=Fp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=ql(e),r=n.queries;n.queries=Fp(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Kl(Hl.ABORTED,"Firestore shutting down"))}}function Fp(){return new ad(e=>td(e),ed)}async function Vp(e,t){const n=ql(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Mp,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Op(e,`Initialization of query '${nd(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&qp(n)}async function zp(e,t){const n=ql(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Bp(e,t){const n=ql(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&qp(n)}function $p(e,t,n){const r=ql(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function qp(e){e.Y_.forEach(e=>{e.next()})}var Hp,Kp;(Kp=Hp||(Hp={})).ea="default",Kp.Cache="cache";class Wp{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Lp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Lp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hp.Cache}}class Gp{constructor(e){this.key=e}}class Qp{constructor(e){this.key=e}}class Jp{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=yd(),this.mutatedKeys=yd(),this.Aa=sd(e),this.Ra=new Dp(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new jp,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=rd(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),f=!0):this.ga(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Aa(c,a)>0||l&&this.Aa(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bl()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new Lp(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=yd(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Qp(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Gp(n))}),t}ba(e){this.Ta=e.Ts,this.da=yd();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Lp.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Yp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Xp{constructor(e){this.key=e,this.va=!1}}class Zp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ad(e=>td(e),ed),this.Ma=new Map,this.xa=new Set,this.Oa=new ju(hu.comparator),this.Na=new Map,this.La=new gf,this.Ba={},this.ka=new Map,this.qa=uf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function em(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=xm(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await nm(r,t,n,!0),i}async function tm(e,t){const n=xm(e);await nm(n,t,!0,!1)}async function nm(e,t,n,r){const i=await Df(e.localStore,Yc(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await rm(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&sp(e.remoteStore,i),a}async function rm(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Lf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return mm(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const s=await Lf(e.localStore,t,!0),o=new Jp(t,s.Ts),a=o.ma(s.documents),l=mh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);mm(e,n,u.wa);const c=new Yp(t,n,o);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),u.snapshot}async function im(e,t,n){const r=ql(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!ed(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&op(r.remoteStore,i.targetId),fm(r,i.targetId)}).catch(bu)):(fm(r,i.targetId),await jf(r.localStore,i.targetId,!0))}async function sm(e,t){const n=ql(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),op(n.remoteStore,r.targetId))}async function om(e,t){const n=ql(e);try{const e=await function(e,t){const n=ql(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Bu.EMPTY_BYTE_STRING,au.min()).withLastLimboFreeSnapshotVersion(au.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Ur.updateTargetData(e,u))});let a=ud(),l=yd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Pf(e,s,t.documentUpdates).next(e=>{a=e.Ps,l=e.Is})),!r.isEqual(au.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return xu.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&($l(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?$l(r.va):e.removedDocuments.size>0&&($l(r.va),r.va=!1))}),await ym(n,e,t)}catch(e){await bu(e)}}function am(e,t,n){const r=ql(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=ql(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&qp(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function lm(e,t,n){const r=ql(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new ju(hu.comparator);e=e.insert(s,vc.newNoDocument(s,au.min()));const n=yd().add(s),i=new ph(au.min(),new Map,new ju(iu),e,n);await om(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),vm(r)}else await jf(r.localStore,t,!1).then(()=>fm(r,t,n)).catch(bu)}async function um(e,t){const n=ql(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ql(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=xu.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);$l(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=yd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);hm(n,r,null),dm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ym(n,e)}catch(e){await bu(e)}}async function cm(e,t,n){const r=ql(e);try{const e=await function(e,t){const n=ql(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>($l(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);hm(r,t,n),dm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ym(r,e)}catch(n){await bu(n)}}function dm(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function hm(e,t,n){const r=ql(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function fm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||pm(e,t)})}function pm(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(op(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),vm(e))}function mm(e,t,n){for(const r of n)r instanceof Gp?(e.La.addReference(r.key,t),gm(e,r)):r instanceof Qp?(Ul("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||pm(e,r.key)):Bl()}function gm(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Ul("SyncEngine","New document in limbo: "+n),e.xa.add(r),vm(e))}function vm(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new hu(uu.fromString(t)),r=e.qa.next();e.Na.set(r,new Xp(n)),e.Oa=e.Oa.insert(n,r),sp(e.remoteStore,new tf(Yc(Wc(n.path)),r,"TargetPurposeLimboResolution",ku.oe))}}async function ym(e,t,n){const r=ql(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((e,a)=>{o.push(r.Ka(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=_f.Wi(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=ql(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>xu.forEach(t,t=>xu.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>xu.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Eu(e))throw e;Ul("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function wm(e,t){const n=ql(e);if(!n.currentUser.isEqual(t)){Ul("SyncEngine","User change. New user:",t.toKey());const e=await Af(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Kl(Hl.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ym(n,e.hs)}}function bm(e,t){const n=ql(e),r=n.Na.get(t);if(r&&r.va)return yd().add(r.key);{let e=yd();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function xm(e){const t=ql(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=om.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lm.bind(null,t),t.Ca.d_=Bp.bind(null,t.eventManager),t.Ca.$a=$p.bind(null,t.eventManager),t}function Sm(e){const t=ql(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=um.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cm.bind(null,t),t}class Em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Cf(this.persistence,new Nf,e.initialUser,this.serializer)}Ga(e){return new Sf(kf.Zr,this.serializer)}Wa(e){return new Ff}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Em.provider={build:()=>new Em};class km{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>am(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=wm.bind(null,this.syncEngine),await Cp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Up}createDatastore(e){const t=Qf(e.databaseInfo.databaseId),n=function(e){return new Wf(e)}(e.databaseInfo);return function(e,t,n,r){return new ep(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new np(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>am(this.syncEngine,e,0),zf.D()?new zf:new Vf)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Zp(e,t,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ql(e);Ul("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await ip(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}km.provider={build:()=>new km};class _m{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fl("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Tm{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Dl.UNAUTHENTICATED,this.clientId=ru.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Ul("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ul("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Op(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Nm(e,t){e.asyncQueue.verifyOperationInProgress(),Ul("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Af(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Im(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Cm(e);Ul("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ip(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ip(t.remoteStore,n)),e._onlineComponents=t}async function Cm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ul("FirestoreClient","Using user provided OfflineComponentProvider");try{await Nm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Hl.FAILED_PRECONDITION||e.code===Hl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Vl("Error using user provided cache. Falling back to memory cache: "+n),await Nm(e,new Em)}}else Ul("FirestoreClient","Using default OfflineComponentProvider"),await Nm(e,new Em);return e._offlineComponents}async function Am(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ul("FirestoreClient","Using user provided OnlineComponentProvider"),await Im(e,e._uninitializedComponentsProvider._online)):(Ul("FirestoreClient","Using default OnlineComponentProvider"),await Im(e,new km))),e._onlineComponents}function Rm(e){return Am(e).then(e=>e.syncEngine)}async function Pm(e){const t=await Am(e),n=t.eventManager;return n.onListen=em.bind(null,t.syncEngine),n.onUnlisten=im.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=tm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=sm.bind(null,t.syncEngine),n}function Om(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new _m({next:a=>{s.Za(),t.enqueueAndForget(()=>zp(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Kl(Hl.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Kl(Hl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Wp(Wc(n.path),s,{includeMetadataChanges:!0,_a:!0});return Vp(e,o)}(await Pm(e),e.asyncQueue,t,n,r)),r.promise}function Dm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const jm=new Map;function Lm(e,t,n){if(!n)throw new Kl(Hl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Mm(e){if(!hu.isDocumentKey(e))throw new Kl(Hl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Um(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Bl()}function Fm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Kl(Hl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Um(e);throw new Kl(Hl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Vm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Kl(Hl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Kl(Hl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Kl(Hl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Kl(Hl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Kl(Hl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Kl(Hl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kl(Hl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Kl(Hl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ql;switch(e.type){case"firstParty":return new Zl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Kl(Hl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jm.get(e);t&&(Ul("ComponentProvider","Removing Datastore"),jm.delete(e),t.terminate())}(this),Promise.resolve()}}function Bm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Fm(e,zm))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Dl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[rr(JSON.stringify({alg:"none",type:"JWT"})),rr(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Kl(Hl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Dl(s)}e._authCredentials=new Jl(new Gl(t,n))}}class $m{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $m(this.firestore,e,this._query)}}class qm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qm(this.firestore,e,this._key)}}class Hm extends $m{constructor(e,t,n){super(e,t,Wc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qm(this.firestore,null,new hu(e))}withConverter(e){return new Hm(this.firestore,e,this._path)}}function Km(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Nr(e),1===arguments.length&&(t=ru.newId()),Lm("doc","path",t),e instanceof zm){const n=uu.fromString(t,...r);return Mm(n),new qm(e,null,new hu(n))}{if(!(e instanceof qm||e instanceof Hm))throw new Kl(Hl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(uu.fromString(t,...r));return Mm(n),new qm(e.firestore,e instanceof Hm?e.converter:null,new hu(n))}}class Wm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Jf(this,"async_queue_retry"),this.Vu=()=>{const e=Gf();e&&Ul("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Gf();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Gf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Wl;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Fy){if(!Eu(Fy))throw Fy;Ul("AsyncQueue","Operation failed with retryable error: "+Fy)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Fl("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Pp.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Bl()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Gm extends zm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Wm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wm(e),this._firestoreClient=void 0,await e}}}function Qm(e,t){const n="string"==typeof e?e:t||"(default)",r=Fi("object"==typeof e?e:Hi(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=ar(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Bm(r,...e)}return r}function Jm(e){if(e._terminated)throw new Kl(Hl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ym(e),e._firestoreClient}function Ym(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Ju(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Dm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Tm(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Xm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xm(Bu.fromBase64String(e))}catch(e){throw new Kl(Hl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Xm(Bu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Kl(Hl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new du(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class eg{constructor(e){this._methodName=e}}class tg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Kl(Hl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Kl(Hl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return iu(this._lat,e._lat)||iu(this._long,e._long)}}class ng{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const rg=/^__.*__$/;class ig{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Wd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kd(e,this.data,t,this.fieldTransforms)}}class sg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Wd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function og(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bl()}}class ag{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _g(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(og(this.Cu)&&rg.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class lg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Qf(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ag({Cu:e,methodName:t,qu:n,path:du.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ug(e){const t=e._freezeSettings(),n=Qf(e._databaseId);return new lg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cg(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);xg("Data must be an object, but it was:",o,r);const a=wg(r,o);let l,u;if(s.merge)l=new Vu(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Sg(t,r,n);if(!o.contains(i))throw new Kl(Hl.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Tg(e,i)||e.push(i)}l=new Vu(e),u=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=o.fieldTransforms;return new ig(new mc(a),l,u)}class dg extends eg{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dg}}function hg(e,t,n){return new ag({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class fg extends eg{_toFieldTransform(e){return new Ld(e.path,new Id)}isEqual(e){return e instanceof fg}}class pg extends eg{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=hg(this,e,!0),n=this.Ku.map(e=>yg(e,t)),r=new Cd(n);return new Ld(e.path,r)}isEqual(e){return e instanceof pg&&wr(this.Ku,e.Ku)}}class mg extends eg{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Od(e.serializer,Ed(e.serializer,this.$u));return new Ld(e.path,t)}isEqual(e){return e instanceof mg&&this.$u===e.$u}}function gg(e,t,n,r){const i=e.Qu(1,t,n);xg("Data must be an object, but it was:",i,r);const s=[],o=mc.empty();Ou(r,(e,r)=>{const a=kg(t,e,n);r=Nr(r);const l=i.Nu(a);if(r instanceof dg)s.push(a);else{const e=yg(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Vu(s);return new sg(o,a,i.fieldTransforms)}function vg(e,t,n,r,i,s){const o=e.Qu(1,t,n),a=[Sg(t,r,n)],l=[i];if(s.length%2!=0)throw new Kl(Hl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Sg(t,s[h])),l.push(s[h+1]);const u=[],c=mc.empty();for(let h=a.length-1;h>=0;--h)if(!Tg(u,a[h])){const e=a[h];let t=l[h];t=Nr(t);const n=o.Nu(e);if(t instanceof dg)u.push(e);else{const r=yg(t,n);null!=r&&(u.push(e),c.set(e,r))}}const d=new Vu(u);return new sg(c,d,o.fieldTransforms)}function yg(e,t){if(bg(e=Nr(e)))return xg("Unsupported field value:",t,e),wg(e,t);if(e instanceof eg)return function(e,t){if(!og(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=yg(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Nr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ed(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ou.fromDate(e);return{timestampValue:Ih(t.serializer,n)}}if(e instanceof ou){const n=new ou(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ih(t.serializer,n)}}if(e instanceof tg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Xm)return{bytesValue:Ch(t.serializer,e._byteString)};if(e instanceof qm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ph(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ng)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return xd(t.serializer,e)})}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${Um(e)}`)}(e,t)}function wg(e,t){const n={};return Du(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ou(e,(e,r)=>{const i=yg(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function bg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ou||e instanceof tg||e instanceof Xm||e instanceof qm||e instanceof eg||e instanceof ng)}function xg(e,t,n){if(!bg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Um(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Sg(e,t,n){if((t=Nr(t))instanceof Zm)return t._internalPath;if("string"==typeof t)return kg(e,t);throw _g("Field path arguments must be of type string or ",e,!1,void 0,n)}const Eg=new RegExp("[~\\*/\\[\\]]");function kg(e,t,n){if(t.search(Eg)>=0)throw _g(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Zm(...t.split("."))._internalPath}catch(r){throw _g(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function _g(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Kl(Hl.INVALID_ARGUMENT,a+e+l)}function Tg(e,t){return e.some(e=>e.isEqual(t))}class Ng{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ig(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ig extends Ng{data(){return super.data()}}function Cg(e,t){return"string"==typeof t?kg(e,t):t instanceof Zm?t._internalPath:t._delegate._internalPath}class Ag{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Bl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ou(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Hu(e.doubleValue));return new ng(i)}convertGeoPoint(e){return new tg(Hu(e.latitude),Hu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Gu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Qu(e));default:return null}}convertTimestamp(e){const t=qu(e);return new ou(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=uu.fromString(e);$l(ef(n));const r=new Yu(n.get(1),n.get(3)),i=new hu(n.popFirst(5));return r.isEqual(t)||Fl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Rg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Pg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Og extends Ng{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Dg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Cg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Dg extends Og{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}function jg(e){e=Fm(e,qm);const t=Fm(e.firestore,Gm);return Om(Jm(t),e._key).then(n=>Vg(t,e,n))}class Lg extends Ag{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qm(this.firestore,null,t)}}function Mg(e,t,n){e=Fm(e,qm);const r=Fm(e.firestore,Gm),i=Rg(e.converter,t,n);return Fg(r,[cg(ug(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ud.none())])}function Ug(e,t,n){e=Fm(e,qm);const r=Fm(e.firestore,Gm),i=ug(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Nr(t))||t instanceof Zm?vg(i,"updateDoc",e._key,t,n,a):gg(i,"updateDoc",e._key,t),Fg(r,[s.toMutation(e._key,Ud.exists(!0))])}function Fg(e,t){return function(e,t){const n=new Wl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Sm(e);try{const e=await function(e,t){const n=ql(e),r=ou.now(),i=t.reduce((e,t)=>e.add(t.key),yd());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=ud(),l=yd();return n.cs.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=qd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Wd(e.key,t,gc(t.value.mapValue),Ud.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:hd(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new ju(iu)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await ym(r,e.changes),await wp(r.remoteStore)}catch(e){const t=Op(e,"Failed to persist write");n.reject(t)}}(await Rm(e),t,n)),n.promise}(Jm(e),t)}function Vg(e,t,n){const r=n.docs.get(t._key),i=new Lg(e);return new Og(e,i,t._key,r,new Pg(n.hasPendingWrites,n.fromCache),t.converter)}function zg(){return new fg("serverTimestamp")}function Bg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pg("arrayUnion",t)}function $g(e){return new mg("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){jl=e}($i),Ui(new Ir("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Gm(new Yl(e.getProvider("auth-internal")),new tu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Kl(Hl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ki(Ol,"4.7.3",e),Ki(Ol,"4.7.3","esm2017")}();const qg="@firebase/installations",Hg="0.6.9",Kg=1e4,Wg=`w:${Hg}`,Gg="FIS_v2",Qg=36e5,Jg=new vr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Yg(e){return e instanceof gr&&e.code.includes("request-failed")}function Xg(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Zg(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function ev(e,t){const n=(await t.json()).error;return Jg.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function tv(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nv(e,t){let{refreshToken:n}=t;const r=tv(e);return r.append("Authorization",function(e){return`${Gg} ${e}`}(n)),r}async function rv(e){const t=await e();return t.status>=500&&t.status<600?e():t}function iv(e){return new Promise(t=>{setTimeout(t,e)})}const sv=/^[cdef][\w-]{21}$/;function ov(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return sv.test(t)?t:""}catch(e){return""}}function av(e){return`${e.appName}!${e.appId}`}const lv=new Map;function uv(e,t){const n=av(e);cv(n,t),function(e,t){const n=hv();n&&n.postMessage({key:e,fid:t});fv()}(n,t)}function cv(e,t){const n=lv.get(e);if(n)for(const r of n)r(t)}let dv=null;function hv(){return!dv&&"BroadcastChannel"in self&&(dv=new BroadcastChannel("[Firebase] FID Change"),dv.onmessage=e=>{cv(e.data.key,e.data.fid)}),dv}function fv(){0===lv.size&&dv&&(dv.close(),dv=null)}const pv="firebase-installations-store";let mv=null;function gv(){return mv||(mv=Yr("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(pv)}})),mv}async function vv(e,t){const n=av(e),r=(await gv()).transaction(pv,"readwrite"),i=r.objectStore(pv),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||uv(e,t.fid),t}async function yv(e){const t=av(e),n=(await gv()).transaction(pv,"readwrite");await n.objectStore(pv).delete(t),await n.done}async function wv(e,t){const n=av(e),r=(await gv()).transaction(pv,"readwrite"),i=r.objectStore(pv),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||uv(e,o.fid),o}async function bv(e){let t;const n=await wv(e.appConfig,n=>{const r=function(e){const t=e||{fid:ov(),registrationStatus:0};return Ev(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Jg.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Xg(n),o=tv(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:Gg,appId:n.appId,sdkVersion:Wg},u={method:"POST",headers:o,body:JSON.stringify(l)},c=await rv(()=>fetch(s,u));if(c.ok){const e=await c.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Zg(e.authToken)}}throw await ev("Create Installation",c)}(e,t);return vv(e.appConfig,n)}catch(Fy){throw Yg(Fy)&&409===Fy.customData.serverCode?await yv(e.appConfig):await vv(e.appConfig,{fid:t.fid,registrationStatus:0}),Fy}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:xv(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function xv(e){let t=await Sv(e.appConfig);for(;1===t.registrationStatus;)await iv(100),t=await Sv(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await bv(e);return n||t}return t}function Sv(e){return wv(e,e=>{if(!e)throw Jg.create("installation-not-found");return Ev(e)})}function Ev(e){return 1===(t=e).registrationStatus&&t.registrationTime+Kg<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function kv(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Xg(e)}/${n}/authTokens:generate`}(n,t),s=nv(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:Wg,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await rv(()=>fetch(i,l));if(u.ok){return Zg(await u.json())}throw await ev("Generate Auth Token",u)}async function _v(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await wv(e.appConfig,r=>{if(!Nv(r))throw Jg.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Qg}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await Tv(e.appConfig);for(;1===n.authToken.requestStatus;)await iv(100),n=await Tv(e.appConfig);const r=n.authToken;return 0===r.requestStatus?_v(e,t):r}(e,n),r;{if(!navigator.onLine)throw Jg.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await kv(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await vv(e.appConfig,r),n}catch(Fy){if(!Yg(Fy)||401!==Fy.customData.serverCode&&404!==Fy.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await vv(e.appConfig,n)}else await yv(e.appConfig);throw Fy}}(e,n),n}});return t?await t:r.authToken}function Tv(e){return wv(e,e=>{if(!Nv(e))throw Jg.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Kg<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function Nv(e){return void 0!==e&&2===e.registrationStatus}async function Iv(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await bv(e);t&&await t}(n);return(await _v(n,t)).token}function Cv(e){return Jg.create("missing-app-config-values",{valueName:e})}const Av="installations",Rv=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Cv("App Configuration");if(!e.name)throw Cv("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Cv(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Fi(t,"heartbeat"),_delete:()=>Promise.resolve()}},Pv=e=>{const t=Fi(e.getProvider("app").getImmediate(),Av).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await bv(t);return r?r.catch(console.error):_v(t).catch(console.error),n.fid}(t),getToken:e=>Iv(t,e)}};Ui(new Ir(Av,Rv,"PUBLIC")),Ui(new Ir("installations-internal",Pv,"PRIVATE")),Ki(qg,Hg),Ki(qg,Hg,"esm2017");const Ov="analytics",Dv="https://www.googletagmanager.com/gtag/js",jv=new Ur("@firebase/analytics"),Lv=new vr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Mv(e){if(!e.startsWith(Dv)){const t=Lv.create("invalid-gtag-resource",{gtagURL:e});return jv.warn(t.message),""}return e}function Uv(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Fv(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Mv}),r=document.createElement("script"),i=`${Dv}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Vv(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Uv(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(Fy){jv.error(Fy)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await Uv(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(Fy){jv.error(Fy)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=o;e("consent",t,n)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(Fy){jv.error(Fy)}}}const zv=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Bv(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function $v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zv,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Lv.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Lv.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Hv;return setTimeout(async()=>{a.abort()},void 0!==n?n:6e4),qv({appId:r,apiKey:i,measurementId:s},o,a,t)}async function qv(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zv;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Lv.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(Fy){if(l)return jv.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===Fy||void 0===Fy?void 0:Fy.message}]`),{appId:a,measurementId:l};throw Fy}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Bv(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Lv.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(Fy){const r=Fy;if(!function(e){if(!(e instanceof gr)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(a),l)return jv.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:a,measurementId:l};throw Fy}const u=503===Number(null===(o=null===r||void 0===r?void 0:r.customData)||void 0===o?void 0:o.httpStatus)?Tr(i,s.intervalMillis,30):Tr(i,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+u,backoffCount:i+1};return s.setThrottleMetadata(a,c),jv.debug(`Calling attemptFetch again in ${u} millis`),qv(e,c,n,s)}}class Hv{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Kv,Wv;function Gv(e){Wv=e}function Qv(e){Kv=e}async function Jv(e,t,n,r,i,s,o){var a;const l=$v(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&jv.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>jv.error(e)),t.push(l);const u=async function(){if(!pr())return jv.warn(Lv.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await mr()}catch(Fy){return jv.warn(Lv.create("indexeddb-unavailable",{errorInfo:null===Fy||void 0===Fy?void 0:Fy.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[c,d]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Dv)&&n.src.includes(e))return n;return null})(s)||Fv(s,c.measurementId),Wv&&(i("consent","default",Wv),Gv(void 0)),i("js",new Date);const h=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",c.measurementId,h),Kv&&(i("set",Kv),Qv(void 0)),c.measurementId}class Yv{constructor(e){this.app=e}_delete(){return delete Xv[this.app.options.appId],Promise.resolve()}}let Xv={},Zv=[];const ey={};let ty,ny,ry="dataLayer",iy="gtag",sy=!1;function oy(){const e=[];if(hr()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Lv.create("invalid-analytics-context",{errorInfo:t});jv.warn(n.message)}}function ay(e,t,n){oy();const r=e.options.appId;if(!r)throw Lv.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Lv.create("no-api-key");jv.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xv[r])throw Lv.create("already-exists",{id:r});if(!sy){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ry);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=Vv(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Xv,Zv,ey,ry,iy);ny=e,ty=t,sy=!0}Xv[r]=Jv(e,Zv,ey,t,ty,ry,n);return new Yv(e)}function ly(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hi();e=Nr(e);const t=Fi(e,Ov);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Fi(e,Ov);if(n.isInitialized()){const e=n.getImmediate();if(wr(t,n.getOptions()))return e;throw Lv.create("already-initialized")}const r=n.initialize({options:t});return r}(e)}function uy(e,t,n,r){e=Nr(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(ny,Xv[e.app.options.appId],t,n,r).catch(e=>jv.error(e))}const cy="@firebase/analytics",dy="0.10.8";Ui(new Ir(Ov,(e,t)=>{let{options:n}=t;return ay(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),Ui(new Ir("analytics-internal",function(e){try{const t=e.getProvider(Ov).getImmediate();return{logEvent:(e,n,r)=>uy(t,e,n,r)}}catch(Fy){throw Lv.create("interop-component-reg-failed",{reason:Fy})}},"PRIVATE")),Ki(cy,dy),Ki(cy,dy,"esm2017");const hy=qi({apiKey:"AIzaSyAw5PoYCr72Dbt2Aw_QEPurAxKR2HSbfvw",authDomain:"melodymind-b3fe6.firebaseapp.com",projectId:"melodymind-b3fe6",storageBucket:"melodymind-b3fe6.firebasestorage.app",messagingSenderId:"809321030769",appId:"1:809321030769:web:1b6782195a8828452b27d0",measurementId:"G-PFL8PT8H5Q"}),fy=vl(hy);Qm(hy),ly(hy);function py(e){let{onAuth:t}=e;const[n,r]=(0,s.useState)("login"),[i,o]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[u,c]=(0,s.useState)(""),[d,h]=(0,s.useState)(""),f=async e=>{let n;if("google"===e&&(n=new Bo),"spotify"!==e){if(n)try{const e=await async function(e,t,n){if(Vi(e.app))return Promise.reject(cs(e,"operation-not-supported-in-this-environment"));const r=yo(e);fs(e,t,Fo);const i=Na(r,n);return new Da(r,"signInViaPopup",t,i).executeNotNull()}(fy,n),r=e.user,i={firebaseUID:r.uid,email:r.email,username:r.displayName||r.email.split("@")[0],joinDate:(new Date).toISOString()},s=await Zn.post("http://localhost:5000/api/users",i);t(s.data)}catch(r){console.error(r),alert(`OAuth login failed: ${r.message}`)}}else window.location.href="http://localhost:5000/api/spotify/login"};return(0,Oe.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-br from-purple-900 to-blue-800",children:(0,Oe.jsxs)("div",{className:"w-full max-w-md",children:[(0,Oe.jsxs)("div",{className:"text-center mb-8",children:[(0,Oe.jsx)("h1",{className:"text-4xl font-['Pacifico'] text-white mb-2",children:"MoodTune"}),(0,Oe.jsx)("p",{className:"text-blue-200",children:"Smart Music Streaming with AI"})]}),(0,Oe.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20",children:[(0,Oe.jsxs)("div",{className:"flex rounded-full bg-white/10 p-1 mb-6",children:[(0,Oe.jsx)("button",{onClick:()=>r("login"),className:"flex-1 py-2 px-4 rounded-full text-sm font-medium transition-all "+("login"===n?"bg-white text-purple-900":"text-white hover:text-purple-200"),children:"Login"}),(0,Oe.jsx)("button",{onClick:()=>r("signup"),className:"flex-1 py-2 px-4 rounded-full text-sm font-medium transition-all "+("signup"===n?"bg-white text-purple-900":"text-white hover:text-purple-200"),children:"Sign Up"})]}),d&&(0,Oe.jsx)("p",{className:"text-red-500 text-center mb-4",children:d}),(0,Oe.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h("");try{if("signup"===n){const e=await async function(e,t,n){if(Vi(e.app))return Promise.reject(hs(e));const r=yo(e),i=_o(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ho),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ea(e),t}),o=await Ko._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(fy,i,a);await ta(e.user,{displayName:u});const n={firebaseUID:e.user.uid,email:e.user.email,username:u||e.user.email.split("@")[0],joinDate:(new Date).toISOString()},r=await Zn.post("http://localhost:5000/api/users",n);t(r.data)}else{const e=await function(e,t,n){return Vi(e.app)?Promise.reject(hs(e)):Zo(Nr(e),Uo.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ea(e),t})}(fy,i,a),n={firebaseUID:e.user.uid,email:e.user.email,username:e.user.displayName||e.user.email.split("@")[0],joinDate:(new Date).toISOString()},r=await Zn.get(`http://localhost:5000/api/users/${n.firebaseUID}`);if(r.data)t(r.data);else{const e=await Zn.post("http://localhost:5000/api/users",n);t(e.data)}}}catch(r){h(r.message),console.error("Authentication error:",r)}},className:"space-y-4",children:["signup"===n&&(0,Oe.jsx)("input",{type:"text",placeholder:"Username",value:u,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-400"}),(0,Oe.jsx)("input",{type:"email",placeholder:"Email",value:i,onChange:e=>o(e.target.value),required:!0,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-400"}),(0,Oe.jsx)("input",{type:"password",placeholder:"Password",value:a,onChange:e=>l(e.target.value),required:!0,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-400"}),(0,Oe.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-blue-600 text-white py-3 rounded-lg font-medium hover:from-purple-600 hover:to-blue-700 transition-all",children:"login"===n?"Login":"Create Account"})]}),(0,Oe.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,Oe.jsxs)("button",{onClick:()=>f("google"),className:"w-full flex items-center justify-center gap-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white py-3 px-4 rounded-lg transition-all",children:[(0,Oe.jsx)("i",{className:"ri-google-fill text-lg"})," Continue with Google"]}),(0,Oe.jsxs)("button",{onClick:()=>f("spotify"),className:"w-full flex items-center justify-center gap-3 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg transition-all",children:[(0,Oe.jsx)("i",{className:"ri-spotify-fill text-lg"})," Continue with Spotify"]})]})]})]})})}function my(e){var t;let{user:n,onLogout:r,spotifyUser:i}=e;const[o,a]=(0,s.useState)(!1),[l,u]=(0,s.useState)(!0),c=re(),d=(null===i||void 0===i?void 0:i.display_name)||(null===n||void 0===n?void 0:n.username)||"Guest",h=(null===i||void 0===i||null===(t=i.images)||void 0===t?void 0:t.length)>0?i.images[0].url:null;return(0,Oe.jsx)("nav",{className:"bg-black/20 backdrop-blur-lg border-b border-white/10",children:(0,Oe.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,Oe.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,Oe.jsx)("h1",{className:"text-2xl font-['Pacifico'] text-white cursor-pointer",onClick:()=>c("/"),children:"MoodTune"}),(0,Oe.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,Oe.jsx)("button",{className:"text-white/80 hover:text-white transition-colors whitespace-nowrap cursor-pointer",onClick:()=>c("/about"),children:"About"}),(0,Oe.jsx)("button",{className:"text-white/80 hover:text-white transition-colors whitespace-nowrap cursor-pointer",onClick:()=>c("/library"),children:"Library"}),(0,Oe.jsx)("button",{className:"text-white/80 hover:text-white transition-colors whitespace-nowrap cursor-pointer",onClick:()=>c("/analytics"),children:"Analytics"})]})]}),(0,Oe.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Oe.jsx)("button",{onClick:()=>{u(!l),l?document.documentElement.classList.add("light-mode"):document.documentElement.classList.remove("light-mode")},className:"text-white/80 hover:text-white transition-all hover:bg-white/10 p-2 rounded-lg whitespace-nowrap cursor-pointer",title:l?"Switch to light mode":"Switch to dark mode",children:(0,Oe.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,Oe.jsx)("i",{className:"text-xl transition-transform duration-300 "+(l?"ri-moon-line":"ri-sun-line rotate-180")})})}),(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsxs)("button",{onClick:()=>a(!o),className:"flex items-center space-x-2 bg-white/10 hover:bg-white/20 px-3 py-2 rounded-lg transition-all whitespace-nowrap cursor-pointer",children:[h?(0,Oe.jsx)("img",{src:h,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):(0,Oe.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center",children:(0,Oe.jsx)("span",{className:"text-white text-sm font-medium",children:d.charAt(0).toUpperCase()})}),(0,Oe.jsx)("span",{className:"text-white text-sm",children:d}),(0,Oe.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,Oe.jsx)("i",{className:"ri-arrow-down-s-line text-white/60"})})]}),o&&(0,Oe.jsxs)("div",{className:"absolute right-0 top-12 w-48 bg-gray-900 border border-white/10 rounded-lg shadow-xl py-2 z-50",children:[(0,Oe.jsx)("button",{onClick:()=>{c("/profile"),a(!1)},className:"w-full text-left px-4 py-2 text-white/80 hover:bg-white/10 transition-colors whitespace-nowrap cursor-pointer",children:"Profile"}),(0,Oe.jsx)("hr",{className:"border-white/10 my-2"}),(0,Oe.jsx)("button",{onClick:r,className:"w-full text-left px-4 py-2 text-red-400 hover:bg-white/10 transition-colors whitespace-nowrap cursor-pointer",children:"Logout"})]})]})]})]})})}function gy(e){var t;let{user:n,spotifyUser:r}=e;const i=(null===r||void 0===r?void 0:r.display_name)||(null===n||void 0===n?void 0:n.username)||(null===n||void 0===n||null===(t=n.email)||void 0===t?void 0:t.split("@")[0])||"Guest";return(0,Oe.jsxs)("div",{className:"mb-8",children:[(0,Oe.jsxs)("h1",{className:"text-4xl font-bold text-white mb-2",children:[(()=>{const e=(new Date).getHours();return e<12?"Good morning":e<17?"Good afternoon":"Good evening"})(),", ",i,"! \ud83d\udc4b"]}),(0,Oe.jsx)("p",{className:"text-blue-200 text-lg",children:n||r?"Ready to discover music that matches your mood?":"Login or sign up to get a personalized music journey."}),(n||r)&&(0,Oe.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Oe.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20",children:(0,Oe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Oe.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:(0,Oe.jsx)("i",{className:"ri-headphone-line text-white text-lg"})}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("p",{className:"text-white/60 text-sm",children:"Beats Spent"}),(0,Oe.jsx)("p",{className:"text-white text-xl font-bold",children:"2h 34m"})]})]})}),(0,Oe.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20",children:(0,Oe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Oe.jsx)("div",{className:"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center",children:(0,Oe.jsx)("i",{className:"ri-emotion-happy-line text-white text-lg"})}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("p",{className:"text-white/60 text-sm",children:"Vibe Check"}),(0,Oe.jsx)("p",{className:"text-white text-xl font-bold",children:"Happy"})]})]})}),(0,Oe.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20",children:(0,Oe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Oe.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:(0,Oe.jsx)("i",{className:"ri-fire-line text-white text-lg"})}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("p",{className:"text-white/60 text-sm",children:"Never Missed a Beat for"}),(0,Oe.jsx)("p",{className:"text-white text-xl font-bold",children:"7 days"})]})]})})]})]})}function vy(e){let{onStart:t}=e;return(0,Oe.jsx)("div",{className:"text-center",children:(0,Oe.jsxs)("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 backdrop-blur-lg rounded-2xl p-8 border border-white/20 max-w-2xl mx-auto",children:[(0,Oe.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Oe.jsx)("i",{className:"ri-play-circle-line text-white text-3xl"})}),(0,Oe.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"Start Your Music Experience"}),(0,Oe.jsx)("p",{className:"text-blue-200 mb-8 max-w-lg mx-auto",children:"Let AI analyze your mood and create the perfect soundtrack for your day. Enable voice commands and mood detection for a truly personalized experience."}),(0,Oe.jsxs)("div",{className:"flex items-center justify-center space-x-8 mb-8",children:[(0,Oe.jsxs)("div",{className:"flex items-center space-x-3 text-white/80",children:[(0,Oe.jsx)("div",{className:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center",children:(0,Oe.jsx)("i",{className:"ri-mic-line text-green-400"})}),(0,Oe.jsx)("span",{className:"text-sm",children:"Voice Ready"})]}),(0,Oe.jsxs)("div",{className:"flex items-center space-x-3 text-white/80",children:[(0,Oe.jsx)("div",{className:"w-8 h-8 bg-purple-500/20 rounded-full flex items-center justify-center",children:(0,Oe.jsx)("i",{className:"ri-emotion-line text-purple-400"})}),(0,Oe.jsx)("span",{className:"text-sm",children:"Mood Detection"})]}),(0,Oe.jsxs)("div",{className:"flex items-center space-x-3 text-white/80",children:[(0,Oe.jsx)("div",{className:"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center",children:(0,Oe.jsx)("i",{className:"ri-magic-line text-blue-400"})}),(0,Oe.jsx)("span",{className:"text-sm",children:"Smart Playlists"})]})]}),(0,Oe.jsx)("button",{onClick:t,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-12 py-4 rounded-full text-lg font-semibold transition-all transform hover:scale-105 whitespace-nowrap cursor-pointer",children:"Launch Music Player"}),(0,Oe.jsx)("p",{className:"text-white/60 text-sm mt-4",children:"\ud83c\udfa7 Best experienced with headphones"})]})})}function yy(e){let{user:t,onLogout:n,spotifyTokens:r}=e;const[i,o]=(0,s.useState)(null),[a,l]=(0,s.useState)(!1),[u,c]=(0,s.useState)(!0),d=re();(0,s.useEffect)(()=>{!async function(e){if(e)try{const t=await fetch("http://127.0.0.1:5000/api/spotify/me",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Spotify API error: ${t.status}`);const n=await t.json();o(n)}catch(t){console.error("Error fetching Spotify profile:",t)}}(null===r||void 0===r?void 0:r.accessToken)},[r]);a&&d("/player");return(0,Oe.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[u&&(0,Oe.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,Oe.jsxs)("div",{className:"bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-8 rounded-2xl shadow-lg text-white max-w-sm text-center",children:[(0,Oe.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Mood Detection"}),(0,Oe.jsx)("p",{className:"mb-6",children:"Want songs that fit your vibe..."}),(0,Oe.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,Oe.jsx)("button",{onClick:()=>{c(!1),d("/MoodDetection")},className:"bg-green-600 hover:bg-green-700 px-6 py-2 rounded-full font-semibold transition-all duration-300",children:"OK"}),(0,Oe.jsx)("button",{onClick:()=>c(!1),className:"bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-full font-semibold transition-all duration-300",children:"Cancel"})]})]})}),(0,Oe.jsx)(my,{user:t,onLogout:n,spotifyUser:i}),(0,Oe.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,Oe.jsx)(gy,{user:t,spotifyUser:i}),(0,Oe.jsx)(vy,{onStart:()=>{l(!0)}})]})]})}function wy(){return(0,Oe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"text-center text-white p-8 bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20",children:[(0,Oe.jsx)("h1",{className:"text-5xl font-['Pacifico'] text-white mb-4",children:"Welcome to MoodTune!"}),(0,Oe.jsx)("p",{className:"text-blue-200 text-xl mb-8",children:"Your AI-powered music streaming experience."}),(0,Oe.jsx)(Ae,{to:"/login",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-8 py-3 rounded-full text-lg font-semibold transition-all transform hover:scale-105 whitespace-nowrap cursor-pointer",children:"Get Started"})]})})}function by(e){let{isPlaying:t,onPlayPause:n,onNext:r,onPrevious:i,currentTime:s,duration:o,onSeek:a,volume:l,onVolumeChange:u,isShuffled:c,onShuffleToggle:d,repeatMode:h,onRepeatToggle:f}=e;const p=e=>{if(!e||isNaN(e))return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`};return(0,Oe.jsxs)("div",{className:"w-full max-w-4xl mx-auto px-6 py-4 bg-black/20 backdrop-blur-md rounded-xl",children:[(0,Oe.jsx)("div",{className:"mb-4",children:(0,Oe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Oe.jsx)("span",{className:"text-xs text-gray-400 min-w-[40px]",children:p(s)}),(0,Oe.jsx)("input",{type:"range",min:"0",max:o||0,value:s||0,onChange:e=>{const t=parseFloat(e.target.value);a&&a(t)},className:"flex-1 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #a855f7 0%, #a855f7 ${o>0?s/o*100:0}%, #4b5563 ${o>0?s/o*100:0}%, #4b5563 100%)`}}),(0,Oe.jsx)("span",{className:"text-xs text-gray-400 min-w-[40px] text-right",children:p(o)})]})}),(0,Oe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Oe.jsx)("div",{className:"flex items-center gap-2 w-24",children:(0,Oe.jsx)("button",{onClick:d,className:"p-2 rounded-full transition-all "+(c?"text-purple-400":"text-gray-400 hover:text-white"),title:"Shuffle",children:"\ud83d\udd00"})}),(0,Oe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Oe.jsx)("button",{onClick:i,className:"p-2 text-white hover:text-purple-400 transition-all",title:"Previous",children:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})})}),(0,Oe.jsx)("button",{onClick:n,className:"p-4 bg-purple-600 hover:bg-purple-700 rounded-full transition-all transform hover:scale-105",title:t?"Pause":"Play",children:t?(0,Oe.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):(0,Oe.jsx)("svg",{className:"w-6 h-6 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,Oe.jsx)("button",{onClick:r,className:"p-2 text-white hover:text-purple-400 transition-all",title:"Next",children:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})})})]}),(0,Oe.jsxs)("div",{className:"flex items-center gap-3 w-48 justify-end",children:[(0,Oe.jsx)("button",{onClick:f,className:"p-2 rounded-full transition-all "+("none"===h?"text-gray-400 hover:text-white":"text-purple-400"),title:`Repeat: ${h}`,children:"one"===h?"\ud83d\udd02":"\ud83d\udd01"}),(0,Oe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Oe.jsx)("button",{onClick:()=>u(l>0?0:.7),className:"text-gray-400 hover:text-white transition-all",title:l>0?"Mute":"Unmute",children:0===l?"\ud83d\udd07":l<.5?"\ud83d\udd09":"\ud83d\udd0a"}),(0,Oe.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:l,onChange:e=>{const t=parseFloat(e.target.value);u&&u(t)},className:"w-20 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #a855f7 0%, #a855f7 ${100*l}%, #4b5563 ${100*l}%, #4b5563 100%)`}})]})]})]}),(0,Oe.jsx)("style",{jsx:!0,children:'\n        input[type="range"]::-webkit-slider-thumb {\n          appearance: none;\n          width: 12px;\n          height: 12px;\n          border-radius: 50%;\n          background: #a855f7;\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n\n        input[type="range"]::-webkit-slider-thumb:hover {\n          transform: scale(1.2);\n          background: #c084fc;\n        }\n\n        input[type="range"]::-moz-range-thumb {\n          width: 12px;\n          height: 12px;\n          border-radius: 50%;\n          background: #a855f7;\n          cursor: pointer;\n          border: none;\n          transition: all 0.2s;\n        }\n\n        input[type="range"]::-moz-range-thumb:hover {\n          transform: scale(1.2);\n          background: #c084fc;\n        }\n      '})]})}function xy(e){let{songs:t,currentSong:n,onSongSelect:r,onRemoveSong:i}=e;const[o,a]=(0,s.useState)(""),[l,u]=(0,s.useState)("default"),c=t.filter(e=>{var t,n,r;const i=o.toLowerCase();return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(n=e.artist)||void 0===n?void 0:n.toLowerCase().includes(i))||(null===(r=e.album)||void 0===r?void 0:r.toLowerCase().includes(i))}),d=[...c].sort((e,t)=>"title"===l?(e.title||"").localeCompare(t.title||""):"artist"===l?(e.artist||"").localeCompare(t.artist||""):0);return(0,Oe.jsxs)("div",{className:"w-80 bg-black/30 backdrop-blur-sm border-r border-white/10 flex flex-col",children:[(0,Oe.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,Oe.jsxs)("h2",{className:"text-xl font-bold text-white mb-3",children:["\ud83c\udfb5 Playlist (",t.length,")"]}),(0,Oe.jsx)("input",{type:"text",value:o,onChange:e=>a(e.target.value),placeholder:"Search songs...",className:"w-full px-3 py-2 bg-white/10 text-white rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-600 mb-2"}),(0,Oe.jsxs)("select",{value:l,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 bg-black text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600",children:[(0,Oe.jsx)("option",{value:"default",children:"Default Order"}),(0,Oe.jsx)("option",{value:"title",children:"Sort by Title"}),(0,Oe.jsx)("option",{value:"artist",children:"Sort by Artist"})]})]}),(0,Oe.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===d.length?(0,Oe.jsxs)("div",{className:"p-8 text-center",children:[(0,Oe.jsx)("p",{className:"text-gray-400 mb-2",children:o?"No songs found":"No songs in playlist"}),(0,Oe.jsx)("p",{className:"text-sm text-gray-500",children:o?"Try a different search":"Add songs from the library"})]}):(0,Oe.jsx)("div",{className:"p-2",children:d.map(e=>(0,Oe.jsx)(Sy,{song:e,isPlaying:(null===n||void 0===n?void 0:n.id)===e.id,onSelect:()=>r(e),onRemove:()=>i(e.id)},e.id))})}),t.length>0&&(0,Oe.jsx)("div",{className:"p-4 border-t border-white/10",children:(0,Oe.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,Oe.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,Oe.jsx)("span",{children:"Total Songs:"}),(0,Oe.jsx)("span",{className:"text-white font-semibold",children:t.length})]}),(0,Oe.jsxs)("div",{className:"flex justify-between",children:[(0,Oe.jsx)("span",{children:"YouTube:"}),(0,Oe.jsx)("span",{className:"text-purple-300",children:t.filter(e=>"youtube"===e.source).length})]}),(0,Oe.jsxs)("div",{className:"flex justify-between",children:[(0,Oe.jsx)("span",{children:"Local Files:"}),(0,Oe.jsx)("span",{className:"text-blue-300",children:t.filter(e=>"local"===e.source).length})]})]})})]})}function Sy(e){let{song:t,isPlaying:n,onSelect:r,onRemove:i}=e;const[o,a]=(0,s.useState)(!1);return(0,Oe.jsxs)("div",{className:"group relative p-3 rounded-lg mb-2 cursor-pointer transition-all "+(n?"bg-purple-600/30 border border-purple-500":"bg-white/5 hover:bg-white/10"),onClick:r,children:[(0,Oe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Oe.jsx)("div",{className:"w-6 flex-shrink-0",children:n?(0,Oe.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,Oe.jsx)("span",{className:"w-1 h-3 bg-purple-400 rounded-full animate-pulse"}),(0,Oe.jsx)("span",{className:"w-1 h-4 bg-purple-400 rounded-full animate-pulse delay-75"}),(0,Oe.jsx)("span",{className:"w-1 h-2 bg-purple-400 rounded-full animate-pulse delay-150"})]}):(0,Oe.jsx)("span",{className:"text-gray-500 text-sm",children:"local"===t.source?"\ud83d\udcbe":"\ud83c\udfb5"})}),(0,Oe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Oe.jsx)("div",{className:"text-sm font-semibold truncate "+(n?"text-purple-300":"text-white"),children:t.title||"Unknown Title"}),(0,Oe.jsx)("div",{className:"text-xs text-gray-400 truncate",children:t.artist||"Unknown Artist"})]}),(0,Oe.jsx)("button",{onClick:e=>{e.stopPropagation(),a(!o)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-white/10 rounded transition-all",children:(0,Oe.jsx)("span",{className:"text-gray-400",children:"\u22ee"})})]}),o&&(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsx)("div",{className:"fixed inset-0 z-10",onClick:e=>{e.stopPropagation(),a(!1)}}),(0,Oe.jsxs)("div",{className:"absolute right-2 top-12 bg-gray-800 rounded-lg shadow-xl z-20 py-1 min-w-[150px]",children:[(0,Oe.jsx)("button",{onClick:e=>{e.stopPropagation(),r(),a(!1)},className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-purple-600 transition-all",children:"\u25b6\ufe0f Play Now"}),(0,Oe.jsx)("button",{onClick:e=>{e.stopPropagation(),i(),a(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-red-600 hover:text-white transition-all",children:"\ud83d\uddd1\ufe0f Remove"})]})]})]})}function Ey(e){let{song:t,isPlaying:n,isLiked:r,onToggleLike:i,onAddToPlaylist:s}=e;const o="https://via.placeholder.com/300x300/6b21a8/ffffff?text=No+Song";return(0,Oe.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[(0,Oe.jsxs)("div",{className:"relative mb-6",children:[(0,Oe.jsx)("div",{className:"w-64 h-64 rounded-lg shadow-2xl overflow-hidden transform transition-all duration-300 "+(n?"scale-105":"scale-100"),children:(0,Oe.jsx)("img",{src:(null===t||void 0===t?void 0:t.albumArt)||(null===t||void 0===t?void 0:t.thumbnail)||o,alt:(null===t||void 0===t?void 0:t.title)||"No song playing",className:"w-full h-full object-cover",onError:e=>{e.target.src=o}})}),n&&(0,Oe.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-purple-600 rounded-full p-3 shadow-lg",children:(0,Oe.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Oe.jsx)("span",{className:"w-1 h-4 bg-white rounded-full animate-pulse"}),(0,Oe.jsx)("span",{className:"w-1 h-6 bg-white rounded-full animate-pulse delay-75"}),(0,Oe.jsx)("span",{className:"w-1 h-3 bg-white rounded-full animate-pulse delay-150"})]})})]}),(0,Oe.jsxs)("div",{className:"text-center mb-6 max-w-md",children:[(0,Oe.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:(null===t||void 0===t?void 0:t.title)||"No Song Playing"}),(0,Oe.jsx)("p",{className:"text-lg text-purple-300",children:(null===t||void 0===t?void 0:t.artist)||"Select a song to start"}),(null===t||void 0===t?void 0:t.album)&&(0,Oe.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:t.album})]}),t&&(0,Oe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Oe.jsx)("button",{onClick:i,className:"p-3 rounded-full transition-all transform hover:scale-110 "+(r?"bg-red-500 text-white":"bg-white/10 text-gray-300 hover:bg-red-500 hover:text-white"),title:r?"Unlike":"Like",children:r?"\u2764\ufe0f":"\ud83e\udd0d"}),s&&(0,Oe.jsx)("button",{onClick:s,className:"p-3 rounded-full bg-white/10 text-gray-300 hover:bg-purple-600 hover:text-white transition-all transform hover:scale-110",title:"Add to playlist",children:"\u2795"}),(0,Oe.jsx)("button",{className:"p-3 rounded-full bg-white/10 text-gray-300 hover:bg-purple-600 hover:text-white transition-all transform hover:scale-110",title:"Share",onClick:()=>{navigator.share&&t?navigator.share({title:t.title,text:`Check out ${t.title} by ${t.artist}`}):alert("Sharing not supported on this browser")},children:"\ud83d\udd17"})]}),!t&&(0,Oe.jsxs)("div",{className:"mt-8 text-center",children:[(0,Oe.jsx)("p",{className:"text-gray-400 mb-4",children:"\ud83c\udfb5 Your music journey starts here"}),(0,Oe.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,Oe.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce"}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce delay-100"}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce delay-200"})]})]}),(0,Oe.jsx)("style",{jsx:!0,children:"\n        @keyframes pulse {\n          0%,\n          100% {\n            height: 1rem;\n          }\n          50% {\n            height: 1.5rem;\n          }\n        }\n\n        .animate-pulse {\n          animation: pulse 0.8s ease-in-out infinite;\n        }\n\n        .delay-75 {\n          animation-delay: 0.075s;\n        }\n\n        .delay-100 {\n          animation-delay: 0.1s;\n        }\n\n        .delay-150 {\n          animation-delay: 0.15s;\n        }\n\n        .delay-200 {\n          animation-delay: 0.2s;\n        }\n      "})]})}function ky(e){let{playMusic:t,pauseMusic:n,nextSong:r,prevSong:i,increaseVolume:o,decreaseVolume:a,toggleShuffle:l}=e;const[u,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(""),[f,p]=(0,s.useState)(""),[m,g]=(0,s.useState)(null),v=(0,s.useRef)(null);(0,s.useEffect)(()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void g("Speech recognition not supported in this browser");const t=new e;return t.continuous=!0,t.interimResults=!0,t.lang="en-US",t.onstart=()=>{c(!0),g(null)},t.onend=()=>{c(!1)},t.onresult=e=>{let t="",n="";for(let r=e.resultIndex;r<e.results.length;r++){const i=e.results[r][0].transcript;e.results[r].isFinal?n+=i:t+=i}h(t||n),n&&y(n.toLowerCase().trim())},t.onerror=e=>{console.error("Speech recognition error:",e.error),g(`Error: ${e.error}`),c(!1)},v.current=t,()=>{v.current&&v.current.stop()}},[]);const y=e=>{console.log("Voice command:",e),p(e),e.includes("play")||e.includes("start")||e.includes("resume")?(t(),w("\u25b6\ufe0f Playing music")):e.includes("pause")||e.includes("stop")||e.includes("halt")?(n(),w("\u23f8\ufe0f Music paused")):e.includes("next")||e.includes("skip")||e.includes("forward")?(r(),w("\u23ed\ufe0f Next song")):e.includes("previous")||e.includes("back")||e.includes("last")?(i(),w("\u23ee\ufe0f Previous song")):e.includes("volume up")||e.includes("louder")||e.includes("increase volume")?(o(),w("\ud83d\udd0a Volume increased")):e.includes("volume down")||e.includes("quieter")||e.includes("decrease volume")||e.includes("lower volume")?(a(),w("\ud83d\udd09 Volume decreased")):w("\u2753 Command not recognized")},w=e=>{const t=document.createElement("div");t.textContent=e,t.className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-purple-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in",document.body.appendChild(t),setTimeout(()=>{t.remove()},2e3)};return(0,Oe.jsxs)("div",{className:"fixed top-20 right-6 bg-black/40 backdrop-blur-md rounded-xl p-6 shadow-2xl border border-white/10 max-w-sm z-40",children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Oe.jsx)("h3",{className:"text-lg font-bold text-white",children:"\ud83c\udfa4 Voice Control"}),(0,Oe.jsx)("div",{className:"w-3 h-3 rounded-full "+(u?"bg-red-500 animate-pulse":"bg-gray-500")})]}),m&&(0,Oe.jsx)("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500 rounded-lg text-red-300 text-sm",children:m}),(0,Oe.jsxs)("div",{className:"mb-4",children:[(0,Oe.jsxs)("div",{className:"text-sm text-gray-400 mb-2",children:["Status: ",u?"\ud83c\udf99\ufe0f Listening...":"\u23f8\ufe0f Inactive"]}),d&&(0,Oe.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg",children:[(0,Oe.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"You said:"}),(0,Oe.jsxs)("div",{className:"text-white text-sm italic",children:['"',d,'"']})]})]}),f&&(0,Oe.jsxs)("div",{className:"mb-4 p-3 bg-purple-500/20 rounded-lg",children:[(0,Oe.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Last command:"}),(0,Oe.jsx)("div",{className:"text-purple-300 text-sm font-semibold",children:f})]}),(0,Oe.jsx)("button",{onClick:()=>{v.current?u?v.current.stop():v.current.start():g("Speech recognition not available")},disabled:!!m,className:"w-full py-3 rounded-lg font-semibold transition-all "+(u?"bg-red-600 hover:bg-red-700 text-white":m?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 text-white"),children:u?"\ud83d\uded1 Stop Listening":"\ud83c\udfa4 Start Listening"}),(0,Oe.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,Oe.jsx)("div",{className:"text-xs font-semibold text-gray-400 mb-2",children:"Available Commands:"}),(0,Oe.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-300",children:[(0,Oe.jsx)("div",{children:'\u2022 "Play"'}),(0,Oe.jsx)("div",{children:'\u2022 "Pause"'}),(0,Oe.jsx)("div",{children:'\u2022 "Next"'}),(0,Oe.jsx)("div",{children:'\u2022 "Previous"'}),(0,Oe.jsx)("div",{children:'\u2022 "Volume up"'}),(0,Oe.jsx)("div",{children:'\u2022 "Volume down"'})]})]}),(0,Oe.jsx)("div",{className:"mt-3 p-2 bg-blue-500/10 rounded text-xs text-blue-300",children:"\ud83d\udca1 Tip: Speak clearly and allow microphone access"}),(0,Oe.jsx)("style",{jsx:!0,children:"\n        @keyframes fade-in {\n          from {\n            opacity: 0;\n            transform: translate(-50%, -20px);\n          }\n          to {\n            opacity: 1;\n            transform: translate(-50%, 0);\n          }\n        }\n\n        .animate-fade-in {\n          animation: fade-in 0.3s ease-out;\n        }\n      "})]})}const _y=new class{constructor(){this.sessionId=`session-${Date.now()}`,this.events=[]}getAnalytics(){return{sessionId:this.sessionId,events:[...this.events],stats:this.calculateStats()}}calculateStats(){const e=this.events.filter(e=>"play"===e.type),t=this.events.filter(e=>"like"===e.type),n=this.events.filter(e=>"skip"===e.type),r=this.events.filter(e=>"complete"===e.type);return{totalPlays:e.length,totalLikes:t.length,totalSkips:n.length,totalCompletes:r.length,averageCompletion:r.length>0?r.reduce((e,t)=>{var n;return e+((null===(n=t.data)||void 0===n?void 0:n.completion)||0)},0)/r.length:0}}validateSongData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"track";return e?!!e.id||(console.warn(`[Analytics] Cannot ${t} - song.id is missing`,e),!1):(console.warn(`[Analytics] Cannot ${t} - songData is null or undefined`),!1)}trackSongPlay(e){if(!this.validateSongData(e,"track play"))return;const t={type:"play",timestamp:(new Date).toISOString(),sessionId:this.sessionId,song:{id:e.id,title:e.title||"Unknown",artist:e.artist||"Unknown Artist",genre:e.genre||"Unknown",duration:e.duration||0}};this.events.push(t),console.log("\ud83c\udfb5 [Analytics] Song play tracked:",t.song.title)}trackSongLike(e){if(!this.validateSongData(e,"track like"))return;const t={type:"like",timestamp:(new Date).toISOString(),sessionId:this.sessionId,song:{id:e.id,title:e.title||"Unknown",artist:e.artist||"Unknown Artist"}};this.events.push(t),console.log("\u2764\ufe0f [Analytics] Song like tracked:",t.song.title)}trackSongSkip(e,t){if("number"!==typeof e||"number"!==typeof t)return void console.warn("[Analytics] Cannot track skip - invalid time values");const n=t>0?e/t*100:0,r={type:"skip",timestamp:(new Date).toISOString(),sessionId:this.sessionId,data:{currentTime:e,duration:t,percentPlayed:Math.round(n)}};this.events.push(r),console.log("\u23ed\ufe0f [Analytics] Song skip tracked:",n.toFixed(1)+"%")}trackSongComplete(e){if("number"!==typeof e)return void console.warn("[Analytics] Cannot track completion - invalid completion value");const t={type:"complete",timestamp:(new Date).toISOString(),sessionId:this.sessionId,data:{completion:Math.round(e)}};this.events.push(t),console.log("\u2705 [Analytics] Song complete tracked:",e.toFixed(1)+"%")}trackPlaylistCreate(e){if(!e||!e.id)return void console.warn("[Analytics] Cannot track playlist creation - invalid data");const t={type:"playlist_create",timestamp:(new Date).toISOString(),sessionId:this.sessionId,playlist:{id:e.id,name:e.name||"Untitled",songCount:Array.isArray(e.songs)?e.songs.length:0}};this.events.push(t),console.log("\ud83d\udcdd [Analytics] Playlist created:",t.playlist.name)}getTopSongs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t={};return this.events.filter(e=>{var t;return"play"===e.type&&(null===(t=e.song)||void 0===t?void 0:t.id)}).forEach(e=>{const n=e.song.id;t[n]||(t[n]={song:e.song,plays:0}),t[n].plays++}),Object.values(t).sort((e,t)=>t.plays-e.plays).slice(0,e)}getGenreStats(){const e={};return this.events.filter(e=>{var t;return"play"===e.type&&(null===(t=e.song)||void 0===t?void 0:t.genre)}).forEach(t=>{const n=t.song.genre;e[n]=(e[n]||0)+1}),Object.entries(e).map(e=>{let[t,n]=e;return{genre:t,count:n}}).sort((e,t)=>t.count-e.count)}getTimeOfDayStats(){const e=Array(24).fill(0);return this.events.filter(e=>"play"===e.type).forEach(t=>{const n=new Date(t.timestamp).getHours();e[n]++}),e.map((e,t)=>({hour:`${t}:00`,plays:e}))}clearAnalytics(){this.events=[],console.log("\ud83e\uddf9 [Analytics] All analytics cleared")}exportData(){const e={sessionId:this.sessionId,exportDate:(new Date).toISOString(),stats:this.calculateStats(),topSongs:this.getTopSongs(),genreStats:this.getGenreStats(),timeOfDayStats:this.getTimeOfDayStats(),events:this.events};return JSON.stringify(e,null,2)}getDashboardData(){const e=this.calculateStats(),t=this.getTopSongs(5),n=this.getGenreStats(),r=this.getTimeOfDayStats();return{overview:{totalPlays:e.totalPlays,totalLikes:e.totalLikes,totalSkips:e.totalSkips,averageCompletion:Math.round(e.averageCompletion)},topSongs:t.map(e=>({id:e.song.id,title:e.song.title,artist:e.song.artist,plays:e.plays})),genreDistribution:n,listeningByTime:r,recentActivity:this.events.slice(-20).reverse()}}},Ty=_y;function Ny(){var e,t;const n=te(),r=(null===(e=n.state)||void 0===e?void 0:e.track)||null,i=(null===(t=n.state)||void 0===t?void 0:t.playlist)||null,o=(0,s.useRef)(new Set),a="AIzaSyBu-ZAtxoeL5SWY8stSYLoEluQStEcQQp8",[l,u]=(0,s.useState)(()=>{try{const e=localStorage.getItem("melodymindSongs");if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t.filter(e=>"local"!==e.source):[]}catch(Fy){return console.warn("Failed to read saved songs:",Fy),localStorage.removeItem("melodymindSongs"),[]}}),[c,d]=(0,s.useState)([]),[h,f]=(0,s.useState)(null),[p,m]=(0,s.useState)(!1),[g,v]=(0,s.useState)(0),[y,w]=(0,s.useState)(0),[b,x]=(0,s.useState)(.7),[S,E]=(0,s.useState)(!1),[k,_]=(0,s.useState)("none"),[T,N]=(0,s.useState)(!1),[I,C]=(0,s.useState)(!1),[A,R]=(0,s.useState)(null),[P,O]=(0,s.useState)(!1),[D,j]=(0,s.useState)(()=>{try{const e=localStorage.getItem("melodymindLikedSongs");return e?JSON.parse(e):[]}catch(Fy){return[]}}),[L,M]=(0,s.useState)(()=>{try{const e=localStorage.getItem("melodymindPlaylists");return e?JSON.parse(e):[]}catch(Fy){return[]}}),[U,F]=(0,s.useState)(!1),[V,z]=(0,s.useState)(!1),[B,$]=(0,s.useState)(""),q=(0,s.useRef)(null),H=(0,s.useRef)(null),K=(0,s.useRef)(null),W=(0,s.useRef)(!1),G=(0,s.useRef)(new Set),Q=[...l,...c],J=e=>"number"===typeof e&&!isNaN(e)&&isFinite(e);(0,s.useEffect)(()=>{h&&h.id&&p&&Ty.trackSongPlay({id:h.id,title:h.title||"Unknown",artist:h.artist||"Unknown Artist",genre:h.genre||"Unknown",duration:y||0})},[h,p,y]),(0,s.useEffect)(()=>{const e=q.current;if(!e)return;const t=()=>{if(h&&h.id&&y>0){const e=g/y*100;Ty.trackSongComplete(e)}re()};return e.addEventListener("ended",t),()=>e.removeEventListener("ended",t)},[h,g,y]),(0,s.useEffect)(()=>{try{localStorage.setItem("melodymindLikedSongs",JSON.stringify(D))}catch(Fy){console.warn("Failed to save liked songs:",Fy)}},[D]),(0,s.useEffect)(()=>{try{localStorage.setItem("melodymindPlaylists",JSON.stringify(L))}catch(Fy){console.warn("Failed to save playlists:",Fy)}},[L]);const Y=e=>D.some(t=>t.id===e),X=()=>{if(!B.trim())return;const e={id:`playlist-${Date.now()}`,name:B.trim(),songs:h?[h]:[],createdAt:(new Date).toISOString()};Ty.trackPlaylistCreate({id:e.id,name:e.name,songs:e.songs}),M(t=>[...t,e]),$(""),z(!1),F(!1)};(0,s.useEffect)(()=>{try{const e=l.filter(e=>"youtube"===e.source||!e.streamUrl);localStorage.setItem("melodymindSongs",JSON.stringify(e))}catch(Fy){console.warn("Failed to save songs:",Fy);try{localStorage.removeItem("melodymindSongs")}catch{}}},[l]),(0,s.useEffect)(()=>{if(!h)return;const e=J(g)?g:0,t={lastSongId:h.id||null,lastSongSource:h.source||null,lastTime:e};try{localStorage.setItem("melodymindLastState",JSON.stringify(t))}catch(Fy){console.warn("Failed to save last state:",Fy)}},[null===h||void 0===h?void 0:h.id,null===h||void 0===h?void 0:h.source,g]),(0,s.useEffect)(()=>{try{const e=localStorage.getItem("melodymindLastState");if(!e)return;const t=JSON.parse(e);if(!t||!t.lastSongId)return;const n=Q.find(e=>e.id===t.lastSongId);if(n){f(n);const e=J(t.lastTime)?t.lastTime:0;v(e),m(!1)}}catch(Fy){console.warn("Failed to restore last state:",Fy)}},[]),(0,s.useEffect)(()=>{var e,t;if(null===r||void 0===r||!r.id)return;if(G.current.has(r.id))return;G.current.add(r.id);const n={id:r.id,title:r.name||r.title,artist:(null===(e=r.artists)||void 0===e?void 0:e.map(e=>e.name).join(", "))||r.artist||"Unknown Artist",album:(null===(t=r.album)||void 0===t?void 0:t.name)||"Unknown Album",source:"youtube"};if(i&&Array.isArray(i)){const e=i.map(e=>{var t,n;return{id:e.id,title:e.name||e.title,artist:(null===(t=e.artists)||void 0===t?void 0:t.map(e=>e.name).join(", "))||e.artist||"Unknown Artist",album:(null===(n=e.album)||void 0===n?void 0:n.name)||"Unknown Album",source:"youtube"}});u(t=>{const n=new Set(t.map(e=>e.id)),r=e.filter(e=>!n.has(e.id));return[...t,...r]})}else u(e=>e.some(e=>e.id===n.id)?e:[...e,n]);ne(n)},[null===r||void 0===r?void 0:r.id,i]),(0,s.useEffect)(()=>{let e=!0;const t=()=>{var t,n;if(!e)return;if(null===(t=window)||void 0===t||null===(n=t.YT)||void 0===n||!n.Player)return;if(H.current)return;if(document.getElementById("youtube-player")){console.log("\ud83c\udfac Creating YouTube player...");try{H.current=new window.YT.Player("youtube-player",{height:"0",width:"0",playerVars:{autoplay:0,controls:0,modestbranding:1},events:{onReady:()=>{e&&(W.current=!0,console.log("\u2705 YouTube player ready"))},onStateChange:t=>{if(!e)return;const n=window.YT;if(t.data===n.PlayerState.PLAYING)m(!0),Z();else if(t.data===n.PlayerState.PAUSED)m(!1),ee();else if(t.data===n.PlayerState.ENDED){if(m(!1),ee(),h&&h.id&&y>0){const e=g/y*100;Ty.trackSongComplete(e)}re()}},onError:e=>{console.error("YouTube player error:",e),R("YouTube playback error"),m(!1)}}})}catch(r){console.error("Failed to create YouTube player:",r)}}else console.warn("YouTube player div not found")};return(()=>{if(window.YT&&window.YT.Player)t();else{if(!document.getElementById("youtube-iframe-api")){const e=document.createElement("script");e.id="youtube-iframe-api",e.src="https://www.youtube.com/iframe_api",document.body.appendChild(e)}window.onYouTubeIframeAPIReady=()=>{e&&t()}}})(),()=>{e=!1,ee()}},[]);const Z=()=>{ee(),K.current=setInterval(()=>{var e;if(null!==(e=H.current)&&void 0!==e&&e.getCurrentTime)try{var t,n;const e=H.current.getCurrentTime(),r=(null===(t=(n=H.current).getDuration)||void 0===t?void 0:t.call(n))||0;J(e)&&v(e),J(r)&&y!==r&&w(r)}catch(Fy){}},250)},ee=()=>{K.current&&(clearInterval(K.current),K.current=null)},ne=async e=>{try{if(O(!0),R(null),C(!1),w(0),console.log("Selecting:",e.title,e.source),"local"===e.source){ee();try{var t;null!==(t=H.current)&&void 0!==t&&t.stopVideo&&H.current.stopVideo()}catch(Fy){}if(q.current&&(null===h||void 0===h?void 0:h.id)!==e.id&&(q.current.pause(),q.current.currentTime=0),f(e),v(0),q.current&&e.streamUrl){q.current.src=e.streamUrl,q.current.load();const t=()=>{q.current.removeEventListener("loadedmetadata",t),q.current.removeEventListener("error",n),q.current.play().then(()=>{m(!0)}).catch(e=>{console.warn("Auto-play blocked:",e),m(!1)})},n=()=>{q.current.removeEventListener("loadedmetadata",t),q.current.removeEventListener("error",n),R("Failed to load audio file"),m(!1)};q.current.addEventListener("loadedmetadata",t),q.current.addEventListener("error",n)}return}if("youtube"===e.source){var n;C(!0);let t=e.youtubeId||e.youtubeIdManual||null;if(!t){const n=`${e.title} ${e.artist}`,r=await(async e=>{var t,n;const r=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=1&q=${encodeURIComponent(e)}&key=${a}`,i=await fetch(r),s=await i.json();if(s.error)throw new Error(s.error.message||"YT API error");if(!s.items||!s.items.length)return null;const o=s.items[0];return{videoId:o.id.videoId,title:o.snippet.title,thumbnail:null===(t=o.snippet.thumbnails)||void 0===t||null===(n=t.default)||void 0===n?void 0:n.url}})(n);if(!r)throw new Error("No YouTube result found");t=r.videoId}if(q.current)try{q.current.pause(),q.current.src=""}catch(Fy){}const r={...e,youtubeId:t,source:"youtube"};if(f(r),await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8e3;return new Promise((t,n)=>{const r=Date.now(),i=()=>{var s;return W.current&&null!==(s=H.current)&&void 0!==s&&s.loadVideoById?t(!0):Date.now()-r>e?n(new Error("YouTube player timeout")):void setTimeout(i,300)};i()})}(),null===(n=H.current)||void 0===n||!n.loadVideoById)throw new Error("YouTube player not ready");return H.current.loadVideoById(t),void C(!1)}throw new Error("Unsupported song source")}catch(r){console.error("selectSong error:",r),R(r.message||"Playback error"),C(!1),m(!1)}},re=()=>{if("one"===k)if("youtube"===(null===h||void 0===h?void 0:h.source)&&H.current)try{H.current.seekTo(0),H.current.playVideo()}catch(Fy){}else q.current&&(q.current.currentTime=0,q.current.play());else"all"===k?ie():m(!1)},ie=(0,s.useCallback)(()=>{if(!Q.length)return;h&&h.id&&y>0&&Ty.trackSongSkip(g,y);const e=Q.findIndex(e=>e.id===(null===h||void 0===h?void 0:h.id)),t=S?Math.floor(Math.random()*Q.length):(e+1)%Q.length,n=Q[t];n&&ne(n)},[Q,h,S,g,y]),se=(0,s.useCallback)(()=>{if(!Q.length)return;const e=Q.findIndex(e=>e.id===(null===h||void 0===h?void 0:h.id)),t=e<=0?Q.length-1:e-1,n=Q[t];n&&ne(n)},[Q,h]);(0,s.useEffect)(()=>{const e=q.current;if(!e)return;const t=()=>{const t=e.currentTime;J(t)&&v(t)},n=()=>{const t=e.duration;J(t)&&w(t)},r=e=>{console.error("Audio error:",e),R("Audio playback error"),m(!1)};return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",n),e.addEventListener("error",r),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",n),e.removeEventListener("error",r)}},[]),(0,s.useEffect)(()=>{if(h){if("local"===h.source){const e=q.current;if(!e)return;p?e.readyState>=2&&e.play().catch(e=>{console.warn("Audio play failed:",e),m(!1)}):e.pause()}if("youtube"===h.source){if(!W.current||!H.current)return;try{p?H.current.playVideo():H.current.pauseVideo()}catch(Fy){console.warn("YT play/pause error:",Fy)}}}},[p,h]),(0,s.useEffect)(()=>{var e;if(q.current&&(q.current.volume=b),null!==(e=H.current)&&void 0!==e&&e.setVolume)try{H.current.setVolume(Math.round(100*b))}catch(Fy){}},[b]);const oe=(0,s.useCallback)(e=>{const t="function"===typeof e?e(g):e;if(J(t)){if(v(t),"local"===(null===h||void 0===h?void 0:h.source)&&q.current)q.current.currentTime=t;else if("youtube"===(null===h||void 0===h?void 0:h.source)&&H.current)try{H.current.seekTo(t,!0)}catch(Fy){console.warn("YT seek error:",Fy)}}else console.warn("Invalid seek time:",e)},[h,g]);return(0,Oe.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900",children:[(0,Oe.jsxs)("header",{className:"bg-black/30 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex justify-between items-center",children:[(0,Oe.jsx)(Ae,{to:"/",className:"font-['Pacifico'] text-2xl text-white",children:"MelodyMind"}),(0,Oe.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,Oe.jsx)("button",{onClick:()=>N(!T),className:"p-3 rounded-full transition-all "+(T?"bg-purple-600 text-white":"bg-white/10 text-purple-300 hover:bg-purple-600 hover:text-white"),children:"\ud83c\udfa4"}),(0,Oe.jsx)("label",{htmlFor:"audio-upload",className:"cursor-pointer bg-white/10 text-purple-300 hover:bg-purple-600 hover:text-white px-4 py-2 rounded-full",children:"\u2b06 Upload"}),(0,Oe.jsx)("input",{id:"audio-upload",type:"file",accept:"audio/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files||[]);if(!t.length)return;const n=t.map((e,t)=>new Promise((n,r)=>{const i=new FileReader;i.onload=r=>{const i=r.target.result,s={id:`local-${Date.now()}-${t}`,title:e.name.replace(/\.[^/.]+$/,""),artist:"Local File",album:"Device",streamUrl:i,source:"local"};n(s)},i.onerror=e=>r(e),i.readAsDataURL(e)}));Promise.all(n).then(e=>{d(t=>{const n=new Set(t.map(e=>{var t;return e.title+((null===(t=e.streamUrl)||void 0===t?void 0:t.slice(0,50))||"")})),r=e.filter(e=>{var t;return!n.has(e.title+(null===(t=e.streamUrl)||void 0===t?void 0:t.slice(0,50)))});return[...t,...r]})}).catch(e=>console.error("Failed to read files:",e))},className:"hidden"}),(0,Oe.jsx)(Ae,{to:"/library",className:"bg-white/10 text-purple-300 hover:bg-purple-600 hover:text-white px-4 py-2 rounded-full transition-all",children:"\ud83d\udcda Library"}),(0,Oe.jsx)(Ae,{to:"/analytics",className:"bg-white/10 text-purple-300 hover:bg-purple-600 hover:text-white px-4 py-2 rounded-full transition-all",children:"\ud83d\udcca Analytics"}),(0,Oe.jsx)(Ae,{to:"/MoodDetection",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-2 rounded-full font-semibold transition-all",children:"Mood Detection"})]})]}),(0,Oe.jsxs)("div",{className:"flex flex-1",children:[(0,Oe.jsx)(xy,{songs:Q,currentSong:h,onSongSelect:ne,onRemoveSong:e=>{if(o.current.add(e),u(t=>t.filter(t=>t.id!==e)),d(t=>t.filter(t=>t.id!==e)),(null===h||void 0===h?void 0:h.id)===e){f(null),m(!1),v(0),w(0),q.current&&(q.current.pause(),q.current.src="");try{var t;null!==(t=H.current)&&void 0!==t&&t.stopVideo&&H.current.stopVideo()}catch(Fy){}}}}),(0,Oe.jsxs)("div",{className:"flex-1 flex flex-col",children:[T&&(0,Oe.jsx)(ky,{playMusic:()=>{O(!0),m(!0)},pauseMusic:()=>m(!1),nextSong:ie,prevSong:se,increaseVolume:()=>x(e=>Math.min(1,+(e+.1).toFixed(1))),decreaseVolume:()=>x(e=>Math.max(0,+(e-.1).toFixed(1))),toggleShuffle:e=>E(e)}),(0,Oe.jsx)(Ey,{song:h,isPlaying:p,isLiked:!!h&&Y(h.id),onToggleLike:()=>{h&&(Y(h.id)?j(e=>e.filter(e=>e.id!==h.id)):(h.id&&Ty.trackSongLike({id:h.id,title:h.title,artist:h.artist}),j(e=>[...e,h])))},onAddToPlaylist:()=>F(!0)}),(0,Oe.jsx)(by,{isPlaying:p,onPlayPause:()=>{O(!0),m(!p)},onNext:ie,onPrevious:se,currentTime:g,duration:y,onSeek:oe,volume:b,onVolumeChange:x,isShuffled:S,onShuffleToggle:()=>E(!S),repeatMode:k,onRepeatToggle:()=>{const e=["none","all","one"],t=e.indexOf(k);_(e[(t+1)%e.length])}}),A&&(0,Oe.jsxs)("div",{className:"mt-4 bg-red-500/20 text-red-200 px-4 py-2 rounded mx-auto",children:[A,(0,Oe.jsx)("button",{onClick:()=>{h&&ne({...h})},className:"ml-4 bg-purple-600 px-3 py-1 rounded hover:bg-purple-700",children:"Retry"})]}),I&&(0,Oe.jsx)("div",{className:"mt-4 text-purple-300 text-center",children:"Loading YouTube video..."})]})]}),(0,Oe.jsx)("audio",{ref:q}),(0,Oe.jsx)("div",{id:"youtube-player",style:{display:"none"}}),U&&(0,Oe.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,Oe.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Oe.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Add to Playlist"}),0===L.length?(0,Oe.jsx)("p",{className:"text-gray-400 mb-4",children:"No playlists yet. Create one!"}):(0,Oe.jsx)("div",{className:"max-h-64 overflow-y-auto mb-4",children:L.map(e=>(0,Oe.jsxs)("button",{onClick:()=>{return t=e.id,void(h&&(M(e=>e.map(e=>e.id===t?e.songs.some(e=>e.id===h.id)?e:{...e,songs:[...e.songs,h]}:e)),F(!1)));var t},className:"w-full text-left px-4 py-3 hover:bg-purple-600 rounded text-white mb-2 transition-all",children:[(0,Oe.jsx)("div",{className:"font-semibold",children:e.name}),(0,Oe.jsxs)("div",{className:"text-sm text-gray-400",children:[e.songs.length," songs"]})]},e.id))}),(0,Oe.jsx)("button",{onClick:()=>{F(!1),z(!0)},className:"w-full bg-purple-600 text-white px-4 py-3 rounded font-semibold hover:bg-purple-700 transition-all mb-2",children:"+ Create New Playlist"}),(0,Oe.jsx)("button",{onClick:()=>F(!1),className:"w-full bg-gray-700 text-white px-4 py-3 rounded hover:bg-gray-600 transition-all",children:"Cancel"})]})}),V&&(0,Oe.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,Oe.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Oe.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Create New Playlist"}),(0,Oe.jsx)("input",{type:"text",value:B,onChange:e=>$(e.target.value),placeholder:"Enter playlist name...",className:"w-full px-4 py-3 rounded bg-gray-700 text-white mb-4 focus:outline-none focus:ring-2 focus:ring-purple-600",autoFocus:!0,onKeyPress:e=>{"Enter"===e.key&&B.trim()&&X()}}),(0,Oe.jsx)("button",{onClick:X,disabled:!B.trim(),className:"w-full px-4 py-3 rounded font-semibold mb-2 transition-all "+(B.trim()?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:"Create Playlist"}),(0,Oe.jsx)("button",{onClick:()=>{z(!1),$("")},className:"w-full bg-gray-700 text-white px-4 py-3 rounded hover:bg-gray-600 transition-all",children:"Cancel"})]})})]})}function Iy(){const[e,t]=(0,s.useState)("text"),[n,r]=(0,s.useState)(""),[i,o]=(0,s.useState)([]),[a,l]=(0,s.useState)(!1),[u,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(null),[f,p]=(0,s.useState)([]),[m,g]=(0,s.useState)(null),v=(0,s.useRef)(null),y=(0,s.useRef)(null),w=re(),[b,x]=(0,s.useState)({}),S=()=>{var e;null!==(e=v.current)&&void 0!==e&&e.srcObject&&(v.current.srcObject.getTracks().forEach(e=>e.stop()),v.current.srcObject=null,c(!1))};(0,s.useEffect)(()=>{"camera"!==e&&u&&S()},[e,u]);return(0,Oe.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 flex flex-col",children:[(0,Oe.jsxs)("header",{className:"flex justify-between items-center px-8 py-4 text-white",children:[(0,Oe.jsx)(Ae,{to:"/",className:"font-['Pacifico'] text-2xl text-white drop-shadow-md",children:"MoodTune"}),(0,Oe.jsx)(Ae,{to:"/player",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-2 rounded-full font-semibold transition-all duration-300 whitespace-nowrap cursor-pointer",children:"Player"})]}),(0,Oe.jsxs)("main",{className:"flex-grow flex flex-col items-center justify-center px-6 pb-12",children:[(0,Oe.jsx)("h1",{className:"text-3xl font-bold mb-6 text-white drop-shadow-md",children:"Mood Detection"}),(0,Oe.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,Oe.jsx)("button",{className:"px-5 py-2 rounded-xl shadow-md transition "+("text"===e?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-900 hover:bg-gray-100"),onClick:()=>t("text"),children:"Text Mode"}),(0,Oe.jsx)("button",{className:"px-5 py-2 rounded-xl shadow-md transition "+("camera"===e?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-900 hover:bg-gray-100"),onClick:()=>t("camera"),children:"Camera Mode"})]}),"text"===e&&(0,Oe.jsxs)("div",{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-lg",children:[(0,Oe.jsx)("textarea",{value:n,onChange:e=>r(e.target.value),className:"w-full p-3 border rounded-lg mb-4 focus:ring-2 focus:ring-blue-400 text-gray-900",placeholder:"Type how you feel..."}),(0,Oe.jsx)("button",{onClick:async()=>{if(!n.trim())return alert("Please enter some text first!");l(!0);try{var e;const t=await Zn.post("http://127.0.0.1:8000/analyze-text",{text:n});"success"===t.data.status&&(null===(e=t.data.faces)||void 0===e?void 0:e.length)>0?(o(t.data.faces),h(t.data.faces[0].emotion)):(o([]),h(null),alert("No emotion detected from text."))}catch(t){console.error("Text analysis failed:",t),alert("Error analyzing text. Check backend logs.")}l(!1)},className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg shadow-md hover:bg-green-600 transition",disabled:a,children:a?"Analyzing...":"Analyze"})]}),"camera"===e&&(0,Oe.jsxs)("div",{className:"flex flex-col items-center bg-white p-6 rounded-xl shadow-lg text-gray-900",children:[(0,Oe.jsx)("video",{ref:v,autoPlay:!0,playsInline:!0,width:"320",height:"240",className:"border rounded-lg shadow mb-4"}),(0,Oe.jsx)("canvas",{ref:y,width:"320",height:"240",className:"hidden"}),(0,Oe.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,Oe.jsx)("button",{onClick:async()=>{if(!v.current||!y.current)return;y.current.getContext("2d").drawImage(v.current,0,0,320,240),y.current.toBlob(async e=>{const t=new FormData;t.append("image",e,"capture.jpg"),l(!0);try{var n;const e=await Zn.post("http://127.0.0.1:8000/detect-emotion",t,{headers:{"Content-Type":"multipart/form-data"}});(null===(n=e.data.faces)||void 0===n?void 0:n.length)>0?(o(e.data.faces),h(e.data.faces[0].emotion)):(o([]),h(null))}catch(r){console.error(r),g("Failed to detect emotion from camera.")}l(!1)},"image/jpeg")},className:"px-5 py-2 bg-green-500 text-white rounded-lg shadow-md hover:bg-green-600 transition",disabled:!u||a,children:a?"Analyzing...":"Capture & Analyze"}),(0,Oe.jsx)("button",{onClick:()=>u?S():void navigator.mediaDevices.getUserMedia({video:!0}).then(e=>{v.current&&(v.current.srcObject=e),c(!0)}).catch(e=>console.error("Camera error:",e)),className:"px-5 py-2 rounded-lg shadow-md transition "+(u?"bg-red-500 text-white hover:bg-red-600":"bg-blue-500 text-white hover:bg-blue-600"),children:u?"Stop Camera":"Start Camera"})]})]}),d&&(0,Oe.jsx)("button",{onClick:()=>(async e=>{if(e){l(!0),g(null),p([]);try{var t,n;const r=await Zn.get(`http://127.0.0.1:5000/api/spotify/recommend/${e}`);(null===(t=r.data)||void 0===t||null===(n=t.tracks)||void 0===n?void 0:n.length)>0?p(r.data.tracks):(p([]),g("No songs found for this mood."))}catch(r){console.error("Error fetching recommendations:",r),g("Could not fetch recommendations. Check if backend is running.")}l(!1)}})(d),className:"mt-6 px-6 py-3 bg-purple-600 text-white rounded-lg shadow-md hover:bg-purple-700 transition",disabled:a,children:a?"Loading...":`Generate Playlist for "${d}"`}),m&&(0,Oe.jsx)("p",{className:"mt-4 text-red-400 text-shadow",children:m}),f.length>0&&(0,Oe.jsxs)("div",{className:"mt-6 w-full max-w-2xl bg-white p-6 rounded-xl shadow-lg border text-gray-900",children:[(0,Oe.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["\ud83c\udfb5 Playlists for mood:"," ",(0,Oe.jsx)("span",{className:"text-purple-600",children:d})]}),(0,Oe.jsx)("ul",{className:"space-y-3",children:f.map((e,t)=>(0,Oe.jsxs)("li",{className:"flex items-start gap-3 border-b pb-3",children:[e.image&&(0,Oe.jsx)("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-md object-cover shadow-sm"}),(0,Oe.jsx)("div",{className:"flex-1",children:(0,Oe.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-medium",children:e.name}),(0,Oe.jsx)("p",{className:"text-sm text-gray-700",children:e.artist}),e.album&&(0,Oe.jsx)("p",{className:"text-xs text-gray-500",children:e.album})]}),(0,Oe.jsxs)("div",{className:"flex gap-2",children:[(0,Oe.jsx)("button",{onClick:()=>(e=>{console.log("\ud83c\udfb5 Going to player with:",e);const t=f.filter(t=>t.id!==e.id);w("/player",{state:{track:e,playlist:t}})})(f[t]),className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition",children:"Play"}),(0,Oe.jsxs)("div",{className:"flex flex-col items-end",children:[(0,Oe.jsx)("button",{onClick:()=>(async(e,t)=>{try{const n=`${e} ${t}`,r=await fetch(`http://127.0.0.1:5000/api/youtube/download?query=${encodeURIComponent(n)}`);if(!r.ok){const e=await r.text();return console.error("Download failed:",e),alert("Download failed. Please try again!")}const i=await r.blob(),s=window.URL.createObjectURL(i),o=document.createElement("a");o.href=s;const a=e.replace(/[^\w\s]/gi,"").replace(/\s+/g,"_");o.download=`${a}.mp3`,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(s)}catch(n){console.error("Error while downloading:",n),alert("Error downloading song. Check console for details.")}})(e.name,e.artist),className:"px-3 py-1 bg-green-600 text-white rounded-md text-sm hover:bg-green-700 transition",children:"Download"}),b[t]&&(0,Oe.jsx)("a",{href:b[t],download:`${e.name}.mp3`,className:"text-blue-600 text-xs mt-1 underline hover:text-blue-800",target:"_blank",rel:"noopener noreferrer",children:"Click to download manually"})]})]})]})})]},`${e.id}-${t}`))}),(0,Oe.jsxs)("p",{className:"mt-4 text-sm text-gray-700 text-center",children:[f.length," songs found"]})]}),a&&(0,Oe.jsxs)("div",{className:"mt-6 flex items-center gap-2 text-white",children:[(0,Oe.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-400"}),(0,Oe.jsx)("p",{className:"text-gray-200",children:"Loading..."})]}),i.length>0&&(0,Oe.jsxs)("div",{className:"mt-6 w-full max-w-md bg-white p-6 rounded-xl shadow-lg border text-gray-900",children:[(0,Oe.jsx)("h2",{className:"text-xl font-semibold",children:"Detected Emotion"}),i.map((e,t)=>(0,Oe.jsxs)("div",{className:"mt-4",children:[(0,Oe.jsxs)("p",{className:"text-lg",children:["Emotion:"," ",(0,Oe.jsx)("span",{className:"text-blue-600 font-semibold capitalize",children:(null===e||void 0===e?void 0:e.emotion)||"N/A"})]}),(null===e||void 0===e?void 0:e.probabilities)&&(0,Oe.jsx)("ul",{className:"mt-2 space-y-1 text-gray-800",children:Object.entries(e.probabilities).map(e=>{let[t,n]=e;return(0,Oe.jsxs)("li",{className:"flex justify-between",children:[(0,Oe.jsx)("span",{className:"capitalize",children:t}),(0,Oe.jsxs)("span",{className:"font-medium",children:[(100*n).toFixed(2),"%"]})]},t)})})]},t))]}),!i.length&&!a&&!f.length&&(0,Oe.jsx)("p",{className:"mt-6 text-gray-200 text-shadow",children:"text"===e?"Enter text and click Analyze to detect mood":"Start camera and capture to detect mood"})]})]})}function Cy(){var e,t,n,r,i,o,a;const[l,u]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),[h,f]=(0,s.useState)(null);(0,s.useEffect)(()=>{p()},[]);const p=()=>{try{d(!0),f(null);const e=Ty.getDashboardData();u(e),console.log("\ud83d\udcca Analytics loaded:",e)}catch(e){console.error("Error loading analytics:",e),f(e.message)}finally{d(!1)}};return c?(0,Oe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 flex items-center justify-center",children:(0,Oe.jsx)("div",{className:"text-white text-xl",children:"Loading analytics..."})}):h?(0,Oe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"text-red-400 text-xl",children:["Error: ",h]})}):(0,Oe.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900",children:[(0,Oe.jsxs)("header",{className:"bg-black/30 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex justify-between items-center",children:[(0,Oe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Oe.jsx)(Ae,{to:"/player",className:"text-purple-300 hover:text-white",children:"\u2190 Back"}),(0,Oe.jsx)("h1",{className:"text-2xl font-bold text-white",children:"\ud83d\udcca Analytics"})]}),(0,Oe.jsxs)("div",{className:"flex gap-2",children:[(0,Oe.jsx)("button",{onClick:()=>{try{const e=Ty.exportData(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`melodymind-analytics-${Date.now()}.json`,r.click(),URL.revokeObjectURL(n)}catch(e){console.error("Export failed:",e),alert("Failed to export analytics data")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-all",children:"\ud83d\udce5 Export Data"}),(0,Oe.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to clear all analytics data?")&&(Ty.clearAnalytics(),p())},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-all",children:"\ud83d\uddd1\ufe0f Clear Data"})]})]}),(0,Oe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Oe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,Oe.jsx)(Ay,{title:"Total Plays",value:(null===l||void 0===l||null===(e=l.overview)||void 0===e?void 0:e.totalPlays)||0,icon:"\u25b6\ufe0f",color:"bg-blue-500"}),(0,Oe.jsx)(Ay,{title:"Total Likes",value:(null===l||void 0===l||null===(t=l.overview)||void 0===t?void 0:t.totalLikes)||0,icon:"\u2764\ufe0f",color:"bg-red-500"}),(0,Oe.jsx)(Ay,{title:"Total Skips",value:(null===l||void 0===l||null===(n=l.overview)||void 0===n?void 0:n.totalSkips)||0,icon:"\u23ed\ufe0f",color:"bg-yellow-500"}),(0,Oe.jsx)(Ay,{title:"Avg Completion",value:`${(null===l||void 0===l||null===(r=l.overview)||void 0===r?void 0:r.averageCompletion)||0}%`,icon:"\u2705",color:"bg-green-500"})]}),(0,Oe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Oe.jsxs)("div",{className:"bg-black/30 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[(0,Oe.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"\ud83c\udfb5 Top Songs"}),(null===l||void 0===l||null===(i=l.topSongs)||void 0===i?void 0:i.length)>0?(0,Oe.jsx)("div",{className:"space-y-3",children:l.topSongs.map((e,t)=>(0,Oe.jsxs)("div",{className:"flex items-center gap-3 bg-white/5 rounded-lg p-3 hover:bg-white/10 transition-all",children:[(0,Oe.jsx)("span",{className:"text-2xl font-bold text-purple-400 w-8",children:t+1}),(0,Oe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Oe.jsx)("div",{className:"text-white font-semibold truncate",children:e.title}),(0,Oe.jsx)("div",{className:"text-gray-400 text-sm truncate",children:e.artist})]}),(0,Oe.jsxs)("div",{className:"text-purple-300 font-bold",children:[e.plays," plays"]})]},e.id))}):(0,Oe.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No songs played yet"})]}),(0,Oe.jsxs)("div",{className:"bg-black/30 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[(0,Oe.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"\ud83c\udfb8 Genre Distribution"}),(null===l||void 0===l||null===(o=l.genreDistribution)||void 0===o?void 0:o.length)>0?(0,Oe.jsx)("div",{className:"space-y-3",children:l.genreDistribution.slice(0,5).map((e,t)=>{const n=l.genreDistribution.reduce((e,t)=>e+t.count,0),r=(e.count/n*100).toFixed(1);return(0,Oe.jsxs)("div",{children:[(0,Oe.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,Oe.jsx)("span",{className:"text-white",children:e.genre}),(0,Oe.jsxs)("span",{className:"text-purple-300",children:[e.count," (",r,"%)"]})]}),(0,Oe.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,Oe.jsx)("div",{className:"bg-purple-500 h-2 rounded-full transition-all",style:{width:`${r}%`}})})]},t)})}):(0,Oe.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No genre data yet"})]})]}),(0,Oe.jsxs)("div",{className:"mt-6 bg-black/30 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[(0,Oe.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"\ud83d\udcdc Recent Activity"}),(null===l||void 0===l||null===(a=l.recentActivity)||void 0===a?void 0:a.length)>0?(0,Oe.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:l.recentActivity.map((e,t)=>(0,Oe.jsx)(Ry,{event:e},t))}):(0,Oe.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No activity yet - start playing music!"})]})]})]})}function Ay(e){let{title:t,value:n,icon:r,color:i}=e;return(0,Oe.jsx)("div",{className:"bg-black/30 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:(0,Oe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:t}),(0,Oe.jsx)("p",{className:"text-3xl font-bold text-white",children:n})]}),(0,Oe.jsx)("div",{className:`${i} w-12 h-12 rounded-lg flex items-center justify-center text-2xl`,children:r})]})})}function Ry(e){let{event:t}=e;return(0,Oe.jsxs)("div",{className:"flex items-center gap-3 bg-white/5 rounded-lg p-3 hover:bg-white/10 transition-all",children:[(0,Oe.jsx)("span",{className:"text-xl",children:(()=>{switch(t.type){case"play":return"\u25b6\ufe0f";case"like":return"\u2764\ufe0f";case"skip":return"\u23ed\ufe0f";case"complete":return"\u2705";case"playlist_create":return"\ud83d\udcdd";default:return"\ud83c\udfb5"}})()}),(0,Oe.jsx)("div",{className:"flex-1 min-w-0",children:(0,Oe.jsx)("p",{className:"text-white text-sm truncate",children:(()=>{var e,n,r,i,s;switch(t.type){case"play":return`Played: ${(null===(e=t.song)||void 0===e?void 0:e.title)||"Unknown"}`;case"like":return`Liked: ${(null===(n=t.song)||void 0===n?void 0:n.title)||"Unknown"}`;case"skip":return`Skipped at ${(null===(r=t.data)||void 0===r?void 0:r.percentPlayed)||0}%`;case"complete":return`Completed: ${(null===(i=t.data)||void 0===i?void 0:i.completion)||0}%`;case"playlist_create":return`Created playlist: ${(null===(s=t.playlist)||void 0===s?void 0:s.name)||"Unknown"}`;default:return"Unknown activity"}})()})}),(0,Oe.jsx)("span",{className:"text-gray-400 text-xs",children:(e=>{const t=new Date(e),n=new Date-t,r=Math.floor(n/6e4);if(r<1)return"Just now";if(r<60)return`${r}m ago`;const i=Math.floor(r/60);return i<24?`${i}h ago`:t.toLocaleDateString()})(t.timestamp)})]})}function Py(e){let{onSpotifyLogin:t}=e;const n=re(),r=te();return(0,s.useEffect)(()=>{const e=new URLSearchParams(r.search),i=e.get("accessToken"),s=e.get("refreshToken"),o=e.get("expiresIn"),a=e.get("error");if(a)console.error("Spotify login failed:",a);else if(i&&s){const e={accessToken:i,refreshToken:s,expiresIn:o};console.log("\u2705 Received Spotify tokens:",e),t&&t(e),n("/dashboard")}},[r,n,t]),(0,Oe.jsx)("div",{children:"Logging in with Spotify..."})}function Oy(){var e,t,n;const r=re(),[i,o]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[u,c]=(0,s.useState)(!0),[d,h]=(0,s.useState)(!1),[f,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{try{const e=JSON.parse(localStorage.getItem("melodymindLikedSongs")||"[]");o(e);const t=JSON.parse(localStorage.getItem("melodymindPlaylists")||"[]");l(t)}catch(Fy){console.error("Failed to load library:",Fy)}},[]);const m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.songs&&0!==e.songs.length&&r("/player",{state:{track:e.songs[t],playlist:e.songs}})};return(0,Oe.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900",children:[(0,Oe.jsx)("header",{className:"bg-black/30 backdrop-blur-sm border-b border-white/10 px-6 py-4",children:(0,Oe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Oe.jsx)(Ae,{to:"/",className:"font-['Pacifico'] text-2xl text-white",children:"MelodyMind"}),(0,Oe.jsxs)("div",{className:"flex gap-4",children:[(0,Oe.jsx)(Ae,{to:"/player",className:"bg-white/10 text-purple-300 hover:bg-purple-600 hover:text-white px-4 py-2 rounded-full transition-all",children:"\ud83c\udfb5 Player"}),(0,Oe.jsx)(Ae,{to:"/MoodDetection",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-2 rounded-full font-semibold transition-all",children:"Mood Detection"})]})]})}),(0,Oe.jsx)("div",{className:"px-6 py-8",children:(0,Oe.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Your Library"}),(0,Oe.jsxs)("p",{className:"text-purple-300 mt-2",children:[i.length," liked songs \u2022 ",a.length," playlists"]})]}),(0,Oe.jsxs)("div",{className:"flex gap-3",children:[(0,Oe.jsxs)("button",{onClick:()=>{c(!0),h(!1),p(null)},className:"px-6 py-3 rounded-full font-semibold transition-all "+(u?"bg-gradient-to-r from-pink-600 to-purple-600 text-white shadow-lg":"bg-white/10 text-purple-300 hover:bg-white/20"),children:["\u2764\ufe0f Liked Songs (",i.length,")"]}),(0,Oe.jsxs)("button",{onClick:()=>{c(!1),h(!0),p(null)},className:"px-6 py-3 rounded-full font-semibold transition-all "+(d?"bg-gradient-to-r from-pink-600 to-purple-600 text-white shadow-lg":"bg-white/10 text-purple-300 hover:bg-white/20"),children:["\ud83d\udcc1 Playlists (",a.length,")"]})]})]}),(0,Oe.jsxs)("div",{children:[u&&(0,Oe.jsx)("div",{children:0===i.length?(0,Oe.jsxs)("div",{className:"bg-black/30 backdrop-blur-sm rounded-2xl p-12 text-center",children:[(0,Oe.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc94"}),(0,Oe.jsx)("h2",{className:"text-2xl text-white mb-2",children:"No liked songs yet"}),(0,Oe.jsx)("p",{className:"text-purple-300",children:"Click the heart icon on any song to add it here"})]}):(0,Oe.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:i.map(e=>(0,Oe.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm rounded-xl overflow-hidden hover:bg-black/50 transition-all group",children:[(0,Oe.jsxs)("div",{onClick:()=>(e=>{r("/player",{state:{track:e}})})(e),className:"cursor-pointer",children:[(0,Oe.jsxs)("div",{className:"aspect-square bg-gradient-to-br from-purple-900/50 to-pink-900/50 flex items-center justify-center relative",children:[e.coverUrl||e.thumbnail?(0,Oe.jsx)("img",{src:e.coverUrl||e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}):(0,Oe.jsx)("div",{className:"text-6xl",children:"\ud83c\udfb5"}),(0,Oe.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center",children:(0,Oe.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/20 backdrop-blur-sm rounded-full p-4",children:"\u25b6\ufe0f"})})]}),(0,Oe.jsxs)("div",{className:"p-4",children:[(0,Oe.jsx)("h3",{className:"text-white font-semibold truncate",children:e.title}),(0,Oe.jsx)("p",{className:"text-purple-300 text-sm truncate",children:e.artist})]})]}),(0,Oe.jsx)("div",{className:"px-4 pb-4",children:(0,Oe.jsx)("button",{onClick:()=>(e=>{const t=i.filter(t=>t.id!==e);o(t),localStorage.setItem("melodymindLikedSongs",JSON.stringify(t))})(e.id),className:"w-full bg-red-600/20 hover:bg-red-600 text-red-400 hover:text-white px-4 py-2 rounded-lg transition-all text-sm",children:"\ud83d\udc94 Unlike"})})]},e.id))})}),d&&!f&&(0,Oe.jsx)("div",{children:0===a.length?(0,Oe.jsxs)("div",{className:"bg-black/30 backdrop-blur-sm rounded-2xl p-12 text-center",children:[(0,Oe.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcc1"}),(0,Oe.jsx)("h2",{className:"text-2xl text-white mb-2",children:"No playlists yet"}),(0,Oe.jsx)("p",{className:"text-purple-300",children:"Create playlists from the player to organize your music"})]}):(0,Oe.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:a.map(e=>{var t;return(0,Oe.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm rounded-xl p-6 hover:bg-black/50 transition-all cursor-pointer group",onClick:()=>p(e),children:[(0,Oe.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Oe.jsx)("div",{className:"text-5xl",children:"\ud83d\udcc1"}),(0,Oe.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{const t=a.filter(t=>t.id!==e);l(t),localStorage.setItem("melodymindPlaylists",JSON.stringify(t)),(null===f||void 0===f?void 0:f.id)===e&&p(null)})(e.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity bg-red-600/20 hover:bg-red-600 text-red-400 hover:text-white p-2 rounded-lg",children:"\ud83d\uddd1\ufe0f"})]}),(0,Oe.jsx)("h3",{className:"text-white font-bold text-xl mb-2",children:e.name}),(0,Oe.jsxs)("p",{className:"text-purple-300 text-sm",children:[(null===(t=e.songs)||void 0===t?void 0:t.length)||0," songs"]}),e.createdAt&&(0,Oe.jsxs)("p",{className:"text-purple-400/50 text-xs mt-2",children:["Created"," ",new Date(e.createdAt).toLocaleDateString()]})]},e.id)})})}),f&&(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("button",{onClick:()=>p(null),className:"bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-full mb-6 transition-all",children:"\u2190 Back to Playlists"}),(0,Oe.jsx)("div",{className:"bg-black/30 backdrop-blur-sm rounded-2xl p-8 mb-6",children:(0,Oe.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("h2",{className:"text-4xl font-bold text-white mb-2",children:f.name}),(0,Oe.jsxs)("p",{className:"text-purple-300",children:[(null===(e=f.songs)||void 0===e?void 0:e.length)||0," songs"]})]}),(0,Oe.jsx)("button",{onClick:()=>m(f,0),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-8 py-3 rounded-full font-semibold transition-all",children:"\u25b6\ufe0f Play All"})]})}),0===(null===(t=f.songs)||void 0===t?void 0:t.length)?(0,Oe.jsx)("div",{className:"bg-black/20 rounded-xl p-8 text-center",children:(0,Oe.jsx)("p",{className:"text-purple-300",children:"This playlist is empty"})}):(0,Oe.jsx)("div",{className:"space-y-3",children:null===(n=f.songs)||void 0===n?void 0:n.map((e,t)=>(0,Oe.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm rounded-xl p-4 hover:bg-black/50 transition-all group flex items-center gap-4",children:[(0,Oe.jsx)("div",{className:"text-purple-400 font-semibold w-8",children:t+1}),(0,Oe.jsxs)("div",{onClick:()=>m(f,t),className:"flex-1 flex items-center gap-4 cursor-pointer",children:[(0,Oe.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-900/50 to-pink-900/50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.coverUrl||e.thumbnail?(0,Oe.jsx)("img",{src:e.coverUrl||e.thumbnail,alt:e.title,className:"w-full h-full object-cover rounded-lg"}):(0,Oe.jsx)("div",{className:"text-2xl",children:"\ud83c\udfb5"})}),(0,Oe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Oe.jsx)("h3",{className:"text-white font-semibold truncate",children:e.title}),(0,Oe.jsx)("p",{className:"text-purple-300 text-sm truncate",children:e.artist})]})]}),(0,Oe.jsx)("button",{onClick:()=>((e,t)=>{const n=a.map(n=>n.id===e?{...n,songs:n.songs.filter(e=>e.id!==t)}:n);if(l(n),localStorage.setItem("melodymindPlaylists",JSON.stringify(n)),(null===f||void 0===f?void 0:f.id)===e){const t=n.find(t=>t.id===e);p(t)}})(f.id,e.id),className:"opacity-0 group-hover:opacity-100 transition-opacity bg-red-600/20 hover:bg-red-600 text-red-400 hover:text-white px-4 py-2 rounded-lg",children:"Remove"})]},e.id||t))})]})]})]})})]})}function Dy(e){var t,n,r,i,o;let{spotifyTokens:a}=e;const l=fy.currentUser,u=re(),[c,d]=(0,s.useState)((null===l||void 0===l?void 0:l.displayName)||""),[h,f]=(0,s.useState)(""),[p,m]=(0,s.useState)(""),[g,v]=(0,s.useState)(null),[y,w]=(0,s.useState)(!1),[b,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(null!==a&&void 0!==a&&a.accessToken){w(!0),x(null);try{const e=await fetch("http://127.0.0.1:5000/api/spotify/me",{headers:{Authorization:`Bearer ${a.accessToken}`}});if(!e.ok)throw new Error("Failed to fetch Spotify profile.");const t=await e.json();v(t)}catch(e){console.error(e),x(e.message)}w(!1)}})()},[a]);const S=(null===g||void 0===g?void 0:g.display_name)||(null===l||void 0===l?void 0:l.displayName)||"Guest",E=(null===g||void 0===g?void 0:g.email)||(null===l||void 0===l?void 0:l.email)||"N/A",k=(null===g||void 0===g||null===(t=g.images)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url)||(null===l||void 0===l?void 0:l.photoURL)||null,_=null!==(r=null===g||void 0===g||null===(i=g.followers)||void 0===i?void 0:i.total)&&void 0!==r?r:null;return l||a?(0,Oe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-6",children:(0,Oe.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-lg p-8 max-w-md w-full text-white border border-white/20",children:[(0,Oe.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Profile"}),(0,Oe.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[k?(0,Oe.jsx)("img",{src:k,alt:"Profile",className:"w-20 h-20 rounded-full mb-2 object-cover"}):(0,Oe.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center text-xl font-bold",children:S.charAt(0).toUpperCase()}),(0,Oe.jsx)("p",{className:"text-sm",children:E}),g&&(0,Oe.jsxs)("p",{className:"text-sm mb-4",children:["Followers: ",(0,Oe.jsx)("span",{className:"font-semibold",children:_})]})]}),l&&(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsx)("label",{className:"block mb-2",children:"Username"}),(0,Oe.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 mb-4 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60"}),"password"===(null===(o=l.providerData[0])||void 0===o?void 0:o.providerId)&&(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsx)("label",{className:"block mb-2",children:"New Password"}),(0,Oe.jsx)("input",{type:"password",value:h,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 mb-4 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60"})]})]}),(0,Oe.jsx)("button",{onClick:async()=>{try{await fy.signOut(),u("/login")}catch(e){m("Error signing out: "+e.message)}},className:"w-full bg-red-600 hover:bg-red-700 py-2 rounded-lg font-medium",children:"Add / Switch Account"}),p&&(0,Oe.jsx)("p",{className:"text-center mt-4 text-sm text-green-300",children:p}),b&&(0,Oe.jsx)("p",{className:"text-center mt-2 text-sm text-red-400",children:b}),y&&(0,Oe.jsx)("p",{className:"text-center mt-2 text-sm text-gray-300",children:"Loading Spotify info..."})]})}):(0,Oe.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,Oe.jsx)("p",{children:"No user logged in."})})}const jy=new class{constructor(){this.auth=vl(),this.db=Qm(),this.analytics=ly(),this.currentSongStartTime=null,this.currentSong=null,this.sessionStartTime=Date.now()}async trackSongPlay(e){const t=this.auth.currentUser;if(!t)return;this.currentSong=e,this.currentSongStartTime=Date.now(),uy(this.analytics,"song_play",{song_id:e.id,song_name:e.title,artist:e.artist,genre:e.genre,duration:e.duration});const n=Km(this.db,"userAnalytics",t.uid);await Ug(n,{totalSongsPlayed:$g(1),lastPlayed:zg(),[`genreCount.${e.genre}`]:$g(1),recentlyPlayed:Bg({songId:e.id,title:e.title,artist:e.artist,playedAt:Date.now()})});const r=Km(this.db,"songAnalytics",e.id);await Mg(r,{songId:e.id,title:e.title,artist:e.artist,genre:e.genre,totalPlays:$g(1),uniqueListeners:Bg(t.uid),lastPlayed:zg()},{merge:!0})}async trackSongComplete(e){const t=this.auth.currentUser;if(!t||!this.currentSong)return;const n=Date.now()-this.currentSongStartTime;if(uy(this.analytics,"song_complete",{song_id:this.currentSong.id,completion_percentage:e,listen_duration:n}),e>=80){const r=Km(this.db,"userAnalytics",t.uid);await Ug(r,{songsCompleted:$g(1),totalListeningTime:$g(n)});const i=Km(this.db,"songAnalytics",this.currentSong.id);await Ug(i,{completedPlays:$g(1),avgCompletionRate:$g(e)})}}async trackSongSkip(e,t){const n=this.auth.currentUser;if(!n||!this.currentSong)return;const r=e/t*100;uy(this.analytics,"song_skip",{song_id:this.currentSong.id,skip_at_seconds:e,skip_percentage:r});const i=Km(this.db,"userAnalytics",n.uid);await Ug(i,{songsSkipped:$g(1)});const s=Km(this.db,"songAnalytics",this.currentSong.id);await Ug(s,{skips:$g(1),avgSkipTime:$g(e)})}async trackSongLike(e){const t=this.auth.currentUser;if(!t)return;uy(this.analytics,"song_like",{song_id:e.id,artist:e.artist});const n=Km(this.db,"userAnalytics",t.uid);await Ug(n,{totalLikes:$g(1),likedSongs:Bg(e.id)});const r=Km(this.db,"songAnalytics",e.id);await Ug(r,{likes:$g(1)})}async trackPlaylistCreate(e){const t=this.auth.currentUser;if(!t)return;uy(this.analytics,"playlist_create",{playlist_name:e.name,song_count:e.songs.length});const n=Km(this.db,"userAnalytics",t.uid);await Ug(n,{playlistsCreated:$g(1)})}async trackPlaylistPlay(e){if(!this.auth.currentUser)return;uy(this.analytics,"playlist_play",{playlist_id:e.id,playlist_name:e.name,song_count:e.songs.length});const t=Km(this.db,"playlistAnalytics",e.id);await Mg(t,{playlistId:e.id,name:e.name,totalPlays:$g(1),lastPlayed:zg()},{merge:!0})}async trackSearch(e,t){const n=this.auth.currentUser;if(!n)return;uy(this.analytics,"search",{search_term:e,results_count:t});const r=Km(this.db,"searchAnalytics",`${Date.now()}_${n.uid}`);await Mg(r,{userId:n.uid,query:e,resultsCount:t,timestamp:zg()})}async trackShare(e,t){const n=this.auth.currentUser;if(!n)return;uy(this.analytics,"share",{content_type:"song",song_id:e.id,platform:t});const r=Km(this.db,"userAnalytics",n.uid);await Ug(r,{totalShares:$g(1)});const i=Km(this.db,"songAnalytics",e.id);await Ug(i,{shares:$g(1)})}async trackRepeatMode(e){const t=this.auth.currentUser;if(!t)return;uy(this.analytics,"repeat_mode",{mode:e});const n=Km(this.db,"userAnalytics",t.uid);await Ug(n,{[`repeatModeUsage.${e}`]:$g(1)})}async trackShuffleToggle(e){const t=this.auth.currentUser;if(!t)return;uy(this.analytics,"shuffle_toggle",{enabled:e});const n=Km(this.db,"userAnalytics",t.uid);await Ug(n,{shuffleToggles:$g(1)})}async trackQualityChange(e){const t=this.auth.currentUser;if(!t)return;uy(this.analytics,"quality_change",{quality:e});const n=Km(this.db,"userAnalytics",t.uid);await Ug(n,{preferredQuality:e})}async trackDownload(e){const t=this.auth.currentUser;if(!t)return;uy(this.analytics,"song_download",{song_id:e.id,song_name:e.title});const n=Km(this.db,"userAnalytics",t.uid);await Ug(n,{totalDownloads:$g(1),downloadedSongs:Bg(e.id)});const r=Km(this.db,"songAnalytics",e.id);await Ug(r,{downloads:$g(1)})}async trackSessionEnd(){const e=this.auth.currentUser;if(!e)return;const t=Date.now()-this.sessionStartTime;uy(this.analytics,"session_end",{duration:t});const n=Km(this.db,"userAnalytics",e.uid);await Ug(n,{totalSessions:$g(1),totalSessionTime:$g(t),lastActive:zg()})}async trackPeakListeningTime(){const e=this.auth.currentUser;if(!e)return;const t=(new Date).getHours(),n=Km(this.db,"userAnalytics",e.uid);await Ug(n,{[`listeningByHour.hour${t}`]:$g(1)})}async trackError(e,t){const n=this.auth.currentUser;uy(this.analytics,"app_error",{error_type:e,error_message:t,user_id:(null===n||void 0===n?void 0:n.uid)||"anonymous"});const r=Km(this.db,"errors",`${Date.now()}_${(null===n||void 0===n?void 0:n.uid)||"anon"}`);await Mg(r,{userId:(null===n||void 0===n?void 0:n.uid)||null,errorType:e,errorMessage:t,timestamp:zg()})}async trackBuffering(e){var t;uy(this.analytics,"buffering",{duration:e,song_id:null===(t=this.currentSong)||void 0===t?void 0:t.id})}async initializeUserAnalytics(e){const t=Km(this.db,"userAnalytics",e);await Mg(t,{userId:e,createdAt:zg(),totalSongsPlayed:0,songsCompleted:0,songsSkipped:0,totalListeningTime:0,totalLikes:0,totalShares:0,totalDownloads:0,playlistsCreated:0,totalSessions:0,totalSessionTime:0,genreCount:{},listeningByHour:{},repeatModeUsage:{},likedSongs:[],downloadedSongs:[],recentlyPlayed:[]},{merge:!0})}},Ly=jy;const My=new class{constructor(){this.auth=vl(),this.db=Qm(),this.sessionStartTime=null,this.activeStartTime=null,this.totalActiveTime=0,this.isActive=!1,this.currentSessionId=null,this.saveInterval=null,this.init()}init(){na(this.auth,e=>{e?this.startSession(e.uid):this.endSession()}),document.addEventListener("visibilitychange",()=>{document.hidden?this.handleInactive():this.handleActive()}),window.addEventListener("beforeunload",()=>{this.saveSessionSync()})}async startSession(e){this.sessionStartTime=Date.now(),this.activeStartTime=Date.now(),this.isActive=!0,this.currentSessionId=`${e}_${Date.now()}`;const t=Km(this.db,"sessions",this.currentSessionId);await Mg(t,{userId:e,sessionStart:zg(),sessionEnd:null,totalDuration:0,activeTime:0,isActive:!0});const n=Km(this.db,"userStats",e);(await jg(n)).exists()?await Ug(n,{totalSessions:$g(1),lastLogin:zg()}):await Mg(n,{totalSessions:1,totalTimeSpent:0,totalActiveTime:0,firstLogin:zg(),lastLogin:zg()}),this.saveInterval=setInterval(()=>{this.saveSession()},6e4)}async endSession(){if(!this.currentSessionId)return;clearInterval(this.saveInterval),this.isActive&&(this.totalActiveTime+=Date.now()-this.activeStartTime);const e=Date.now()-this.sessionStartTime,t=this.auth.currentUser;if(t){const n=Km(this.db,"sessions",this.currentSessionId);await Ug(n,{sessionEnd:zg(),totalDuration:e,activeTime:this.totalActiveTime,isActive:!1});const r=Km(this.db,"userStats",t.uid);await Ug(r,{totalTimeSpent:$g(e),totalActiveTime:$g(this.totalActiveTime)})}this.sessionStartTime=null,this.activeStartTime=null,this.totalActiveTime=0,this.isActive=!1,this.currentSessionId=null}handleActive(){!this.isActive&&this.sessionStartTime&&(this.isActive=!0,this.activeStartTime=Date.now())}handleInactive(){this.isActive&&this.activeStartTime&&(this.totalActiveTime+=Date.now()-this.activeStartTime,this.isActive=!1)}async saveSession(){if(!this.currentSessionId||!this.auth.currentUser)return;let e=this.totalActiveTime;this.isActive&&this.activeStartTime&&(e+=Date.now()-this.activeStartTime);const t=Date.now()-this.sessionStartTime,n=Km(this.db,"sessions",this.currentSessionId);await Ug(n,{totalDuration:t,activeTime:e,lastUpdated:zg()})}saveSessionSync(){if(!this.currentSessionId||!this.auth.currentUser)return;let e=this.totalActiveTime;this.isActive&&this.activeStartTime&&(e+=Date.now()-this.activeStartTime);const t=Date.now()-this.sessionStartTime,n=JSON.stringify({fields:{totalDuration:{integerValue:t.toString()},activeTime:{integerValue:e.toString()},sessionEnd:{timestampValue:(new Date).toISOString()}}});navigator.sendBeacon(`https://firestore.googleapis.com/v1/projects/YOUR_PROJECT_ID/databases/(default)/documents/sessions/${this.currentSessionId}?updateMask.fieldPaths=totalDuration&updateMask.fieldPaths=activeTime&updateMask.fieldPaths=sessionEnd`,n)}async logout(){await this.endSession(),await function(e){return Nr(e).signOut()}(this.auth)}async getUserStats(e){const t=Km(this.db,"userStats",e),n=await jg(t);return n.exists()?n.data():null}};function Uy(){const[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(null),[i,o]=(0,s.useState)(null),[a,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=na(fy,e=>{e&&Ly.initializeUserAnalytics(e.uid)});return()=>{My.endSession(),e()}},[]),(0,s.useEffect)(()=>{const e=na(fy,e=>{e?(r({uid:e.uid,email:e.email,username:e.displayName||e.email.split("@")[0]}),t(!0)):(r(null),t(!1)),l(!1)});return()=>e()},[]),(0,s.useEffect)(()=>{const e=localStorage.getItem("spotifyAccessToken"),t=localStorage.getItem("spotifyRefreshToken"),n=localStorage.getItem("spotifyExpiresIn");e&&o({accessToken:e,refreshToken:t,expiresIn:n})},[]);return a?(0,Oe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"text-center text-white",children:[(0,Oe.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Loading..."}),(0,Oe.jsx)("p",{className:"text-blue-200",children:"Checking authentication status"})]})}):(0,Oe.jsx)(Ne,{children:(0,Oe.jsxs)(xe,{children:[(0,Oe.jsx)(we,{path:"/",element:e||i?(0,Oe.jsx)(ye,{to:"/dashboard"}):(0,Oe.jsx)(wy,{})}),(0,Oe.jsx)(we,{path:"/login",element:e||i?(0,Oe.jsx)(ye,{to:"/dashboard"}):(0,Oe.jsx)(py,{onAuth:e=>{r(e),t(!0)}})}),(0,Oe.jsx)(we,{path:"/dashboard",element:e||i?(0,Oe.jsx)(yy,{user:n,onLogout:async()=>{try{await fy.signOut(),t(!1),r(null),o(null),localStorage.removeItem("spotifyAccessToken"),localStorage.removeItem("spotifyRefreshToken"),localStorage.removeItem("spotifyExpiresIn")}catch(e){console.error("Error logging out:",e)}},spotifyTokens:i}):(0,Oe.jsx)(ye,{to:"/login"})}),(0,Oe.jsx)(we,{path:"/spotify/callback",element:(0,Oe.jsx)(Py,{onSpotifyLogin:e=>{o(e),localStorage.setItem("spotifyAccessToken",e.accessToken),localStorage.setItem("spotifyRefreshToken",e.refreshToken),localStorage.setItem("spotifyExpiresIn",e.expiresIn)}})}),(0,Oe.jsx)(we,{path:"/player",element:(0,Oe.jsx)(Ny,{})}),(0,Oe.jsx)(we,{path:"/MoodDetection",element:(0,Oe.jsx)(Iy,{})}),(0,Oe.jsx)(we,{path:"/analytics",element:i?(0,Oe.jsx)(Cy,{spotifyTokens:i}):(0,Oe.jsx)(ye,{to:"/dashboard"})}),(0,Oe.jsx)(we,{path:"/about",element:i?(0,Oe.jsx)(De,{spotifyTokens:i}):(0,Oe.jsx)(ye,{to:"/dashboard"})}),(0,Oe.jsx)(we,{path:"/library",element:i?(0,Oe.jsx)(Oy,{spotifyTokens:i}):(0,Oe.jsx)(ye,{to:"/dashboard"})}),(0,Oe.jsx)(we,{path:"/Profile",element:e||i?(0,Oe.jsx)(Dy,{spotifyTokens:i}):(0,Oe.jsx)(ye,{to:"/login"})}),(0,Oe.jsx)(we,{path:"*",element:(0,Oe.jsx)(ye,{to:"/"})})]})})}a.createRoot(document.getElementById("root")).render((0,Oe.jsx)(s.StrictMode,{children:(0,Oe.jsx)(Uy,{})}))})();
//# sourceMappingURL=main.6adc91de.js.map